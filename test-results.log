
> reminder-app@0.1.0 test
> jest

FAIL src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts
  ● UAE Cultural Compliance Comprehensive Tests › Cultural Score Calculation (0-100 System) › Perfect Cultural Score Scenarios › should score Arabic content with Islamic phrases highly

    expect(received).toBeGreaterThan(expected)

    Expected: > 85
    Received:   84

      77 |         })
      78 |
    > 79 |         expect(result.score).toBeGreaterThan(85)
         |                              ^
      80 |         expect(result.breakdown.islamicEtiquette).toBeGreaterThan(90)
      81 |         expect(result.breakdown.greetingsAndClosings).toBeGreaterThan(85)
      82 |       })

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:79:30)

  ● UAE Cultural Compliance Comprehensive Tests › Cultural Score Calculation (0-100 System) › Cultural Score Penalties › should heavily penalize aggressive and demanding language

    expect(received).toBeLessThan(expected)

    Expected: < 40
    Received:   44

       98 |         })
       99 |
    > 100 |         expect(result.score).toBeLessThan(40)
          |                              ^
      101 |         expect(result.breakdown.languageAppropriate).toBeLessThan(50)
      102 |         expect(result.breakdown.greetingsAndClosings).toBeLessThan(30)
      103 |         expect(result.breakdown.toneRespectfulness).toBeLessThan(20)

      at Object.toBeLessThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:100:30)

  ● UAE Cultural Compliance Comprehensive Tests › Cultural Score Calculation (0-100 System) › Score Breakdown Analysis › should weight categories correctly in final score

    expect(received).toBeGreaterThan(expected)

    Expected: > 15
    Received:   14

      225 |
      226 |         // Good greetings should significantly impact final score (20% weight)
    > 227 |         expect(goodResult.score - badResult.score).toBeGreaterThan(15)
          |                                                    ^
      228 |       })
      229 |     })
      230 |   })

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:227:52)

  ● UAE Cultural Compliance Comprehensive Tests › Islamic Greetings and Business Etiquette › Appropriate Greeting Validation › should classify informal greetings as poor

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      284 |         informalGreetings.forEach(greeting => {
      285 |           const result = CulturalComplianceService.isAppropriateGreeting(greeting, 'en')
    > 286 |           expect(result.appropriate).toBe(false)
          |                                      ^
      287 |           expect(result.culturalLevel).toBe('poor')
      288 |           expect(result.suggestion).toContain('formal greetings')
      289 |         })

      at toBe (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:286:38)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:284:27)

  ● UAE Cultural Compliance Comprehensive Tests › Islamic Greetings and Business Etiquette › Islamic Business Phrases Integration › should recognize and reward common Islamic business phrases

    expect(received).toBeGreaterThan(expected)

    Expected: > 100
    Received:   100

      318 |             `Dear Customer, ${phrase}. Best regards, Company`
      319 |           )
    > 320 |           expect(result.breakdown.islamicEtiquette).toBeGreaterThan(100) // Bonus points
          |                                                     ^
      321 |           expect(result.score).toBeGreaterThan(70)
      322 |         })
      323 |       })

      at toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:320:53)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:316:24)

  ● UAE Cultural Compliance Comprehensive Tests › Ramadan Cultural Sensitivity › Ramadan Communication Adjustments › should adjust cultural scoring during Ramadan

    expect(received).toBeGreaterThan(expected)

    Expected: > 98
    Received:   98

      682 |         })
      683 |
    > 684 |         expect(ramadanScore.score).toBeGreaterThan(standardScore.score)
          |                                    ^
      685 |         expect(ramadanScore.breakdown.islamicEtiquette).toBeGreaterThan(90)
      686 |       })
      687 |

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:684:36)

  ● UAE Cultural Compliance Comprehensive Tests › Customer Relationship-Based Tone Adjustment › Government Customer Handling › should apply strictest cultural standards for government customers

    expect(received).toBeLessThan(expected)

    Expected: < 50
    Received:   76

      767 |         })
      768 |
    > 769 |         expect(governmentResult.score).toBeLessThan(50)
          |                                        ^
      770 |         expect(governmentResult.recommendations.some(r => 
      771 |           r.includes('formal language for government')
      772 |         )).toBe(true)

      at Object.toBeLessThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:769:40)

  ● UAE Cultural Compliance Comprehensive Tests › Customer Relationship-Based Tone Adjustment › VIP Customer Treatment › should maintain respectful but warm tone for VIP customers

    expect(received).toBeGreaterThan(expected)

    Expected: > 90
    Received:   70

      807 |
      808 |         expect(result.score).toBeGreaterThan(85)
    > 809 |         expect(result.breakdown.greetingsAndClosings).toBeGreaterThan(90)
          |                                                       ^
      810 |       })
      811 |     })
      812 |

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:809:55)

  ● UAE Cultural Compliance Comprehensive Tests › Integration and Real-World Scenarios › Complete Email Template Analysis › should analyze a complete UAE business email template

    expect(received).toBeGreaterThan(expected)

    Expected: > 90
    Received:   76

      1117 |         })
      1118 |
    > 1119 |         expect(result.score).toBeGreaterThan(90)
           |                              ^
      1120 |         expect(result.breakdown.islamicEtiquette).toBeGreaterThan(100) // Bonus points
      1121 |         expect(result.breakdown.greetingsAndClosings).toBeGreaterThan(95)
      1122 |         expect(result.breakdown.businessFormality).toBeGreaterThan(90)

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:1119:30)

FAIL tests/integration/follow-up-automation-integration.test.ts
  ● Console

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:52:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:775:7)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:52:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:72:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:948:5)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:72:11)

    console.warn
      Cleanup warning: TypeError: Cannot read properties of undefined (reading 'deleteMany')
          at deleteMany (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:181:32)
          at Object.cleanupTestData (/Users/ibbs/Development/reminder-mvp/tests/integration/follow-up-automation-integration.test.ts:56:11)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusHook (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:975:40)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:856:7)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      215 |       })
      216 |     } catch (error) {
    > 217 |       console.warn('Cleanup warning:', error)
          |               ^
      218 |     }
      219 |   }
      220 |

      at warn (tests/integration/follow-up-automation-integration.test.ts:217:15)
      at Object.cleanupTestData (tests/integration/follow-up-automation-integration.test.ts:56:11)

  ● Follow-up Automation Integration Tests › Complete Follow-up Workflow › should execute complete 3-step follow-up sequence

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Complete Follow-up Workflow › should stop sequence when payment is received

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Complete Follow-up Workflow › should respect UAE business hours for scheduling

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Complete Follow-up Workflow › should validate cultural compliance before sending

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Complete Follow-up Workflow › should handle email delivery failures gracefully

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › High-Volume Processing › should process multiple sequences concurrently

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › High-Volume Processing › should handle sequence analytics for multiple executions

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Error Handling and Recovery › should handle database connection issues

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Error Handling and Recovery › should handle invalid sequence data gracefully

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Error Handling and Recovery › should prevent duplicate sequence executions

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › UAE Compliance Integration › should respect Islamic holidays when scheduling

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › UAE Compliance Integration › should avoid prayer times when scheduling

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › UAE Compliance Integration › should validate template variables are properly replaced

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Monitoring and Logging › should create comprehensive follow-up logs

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Monitoring and Logging › should track sequence execution status changes

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Performance Benchmarks › should process sequences within performance targets

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

FAIL src/lib/services/__tests__/uae-business-hours-service.test.ts
  ● UAEBusinessHoursService › Business Hours Detection › should delegate to vat-calculator for business hours check

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 2024-01-01T10:00:00.000Z, {"endHour": 18, "startHour": 8, "timezone": "Asia/Dubai", "workingDays": [0, 1, 2, 3, 4]}

    Number of calls: 0

      110 |
      111 |       expect(result).toBe(true)
    > 112 |       expect(mockIsUAEBusinessHours).toHaveBeenCalledWith(testDate, {
          |                                      ^
      113 |         workingDays: [0, 1, 2, 3, 4],
      114 |         startHour: 8,
      115 |         endHour: 18,

      at Object.toHaveBeenCalledWith (src/lib/services/__tests__/uae-business-hours-service.test.ts:112:38)

  ● UAEBusinessHoursService › Business Hours Detection › should handle different timezones correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 2024-01-01T10:00:00.000Z, ObjectContaining {"timezone": "UTC"}

    Number of calls: 0

      137 |       customService.isBusinessHours(testDate)
      138 |
    > 139 |       expect(mockIsUAEBusinessHours).toHaveBeenCalledWith(testDate, 
          |                                      ^
      140 |         expect.objectContaining({
      141 |           timezone: 'UTC'
      142 |         })

      at Object.toHaveBeenCalledWith (src/lib/services/__tests__/uae-business-hours-service.test.ts:139:38)

  ● UAEBusinessHoursService › Next Business Hour Calculation › should delegate to vat-calculator for next business hour

    expect(received).toBe(expected) // Object.is equality

    Expected: 2024-01-01T08:00:00.000Z
    Received: 2024-01-01T07:00:00.000Z

      153 |       const result = service.getNextBusinessHour(testDate)
      154 |
    > 155 |       expect(result).toBe(expectedDate)
          |                      ^
      156 |       expect(mockGetNextUAEBusinessHour).toHaveBeenCalledWith(testDate, {
      157 |         workingDays: [0, 1, 2, 3, 4],
      158 |         startHour: 8,

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:155:22)

  ● UAEBusinessHoursService › Next Business Hour Calculation › should handle weekend transitions

    expect(received).toBe(expected) // Object.is equality

    Expected: 2024-01-07T08:00:00.000Z
    Received: 2024-01-07T04:00:00.000Z

      169 |       const result = service.getNextBusinessHour(fridayEvening)
      170 |
    > 171 |       expect(result).toBe(nextSunday)
          |                      ^
      172 |     })
      173 |   })
      174 |

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:171:22)

  ● UAEBusinessHoursService › Prayer Time Detection › should not detect prayer time outside buffer

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      268 |       const isPrayer = service.isPrayerTime(testDate)
      269 |
    > 270 |       expect(isPrayer).toBe(false)
          |                        ^
      271 |     })
      272 |
      273 |     it('should handle timezone conversion errors gracefully', () => {

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:270:24)

  ● UAEBusinessHoursService › Optimal Send Time Calculation › should avoid holidays

    expect(received).toBeGreaterThan(expected)

    Expected: > 1704103200000
    Received:   1704103200000

      329 |       const optimalTime = service.getOptimalSendTime(holidayDate)
      330 |
    > 331 |       expect(optimalTime.getTime()).toBeGreaterThan(holidayDate.getTime())
          |                                     ^
      332 |     })
      333 |
      334 |     it('should avoid prayer times', () => {

      at Object.toBeGreaterThan (src/lib/services/__tests__/uae-business-hours-service.test.ts:331:37)

  ● UAEBusinessHoursService › Optimal Send Time Calculation › should avoid prayer times

    expect(received).not.toBe(expected) // Object.is equality

    Expected: not 1704197700000

      339 |
      340 |       // Should move to a different time
    > 341 |       expect(optimalTime.getTime()).not.toBe(duringPrayer.getTime())
          |                                         ^
      342 |     })
      343 |
      344 |     it('should prevent infinite loops with fallback', () => {

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:341:41)

  ● UAEBusinessHoursService › Optimal Send Time Calculation › should prevent infinite loops with fallback

    expect(received).toBe(expected) // Object.is equality

    Expected: 2025-10-02T06:19:00.242Z
    Received: 2025-10-01T06:19:00.242Z

      353 |       const optimalTime = service.getOptimalSendTime(baseDate)
      354 |
    > 355 |       expect(optimalTime).toBe(fallbackTime) // Should use fallback
          |                           ^
      356 |     })
      357 |   })
      358 |

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:355:27)

  ● UAEBusinessHoursService › Next Available Send Time with Schedule Config › should avoid prayer times when configured

    expect(received).toBeGreaterThan(expected)

    Expected: > 1704110400000
    Received:   1704110400000

      405 |
      406 |       // Should move away from prayer time
    > 407 |       expect(nextTime.getTime()).toBeGreaterThan(noonTime.getTime())
          |                                  ^
      408 |     })
      409 |
      410 |     it('should respect business hours', () => {

      at Object.toBeGreaterThan (src/lib/services/__tests__/uae-business-hours-service.test.ts:407:34)

  ● UAEBusinessHoursService › Next Available Send Time with Schedule Config › should respect business hours

    expect(received).toBe(expected) // Object.is equality

    Expected: 2024-01-08T08:00:00.000Z
    Received: 2024-01-02T06:00:00.000Z

      417 |       const nextTime = service.getNextAvailableSendTime(eveningTime)
      418 |
    > 419 |       expect(nextTime).toBe(nextBusinessTime)
          |                        ^
      420 |     })
      421 |
      422 |     it('should avoid holidays', () => {

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:419:24)

  ● UAEBusinessHoursService › Next Available Send Time with Schedule Config › should avoid holidays

    expect(received).toBeGreaterThan(expected)

    Expected: > 1704103200000
    Received:   1704103200000

      426 |       const nextTime = service.getNextAvailableSendTime(holidayDate)
      427 |
    > 428 |       expect(nextTime.getTime()).toBeGreaterThan(holidayDate.getTime())
          |                                  ^
      429 |     })
      430 |
      431 |     it('should use fallback when no optimal time found within iterations', () => {

      at Object.toBeGreaterThan (src/lib/services/__tests__/uae-business-hours-service.test.ts:428:34)

  ● UAEBusinessHoursService › Next Available Send Time with Schedule Config › should use fallback when no optimal time found within iterations

    expect(received).toBe(expected) // Object.is equality

    Expected: 2024-01-08T08:00:00.000Z
    Received: 2025-10-01T06:19:00.271Z

      439 |       const nextTime = service.getNextAvailableSendTime(baseDate)
      440 |
    > 441 |       expect(nextTime).toBe(fallbackTime)
          |                        ^
      442 |     })
      443 |   })
      444 |

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:441:24)

FAIL src/app/api/cron/process-sequences/__tests__/route.test.ts
  ● /api/cron/process-sequences › POST - Main Cron Processing › Authentication and Authorization › should accept Vercel cron headers

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      179 |         const data = await response.json()
      180 |
    > 181 |         expect(response.status).toBe(200)
          |                                 ^
      182 |         expect(data.success).toBe(true)
      183 |       })
      184 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:181:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Authentication and Authorization › should accept GitHub Actions user agent

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      195 |         const data = await response.json()
      196 |
    > 197 |         expect(response.status).toBe(200)
          |                                 ^
      198 |         expect(data.success).toBe(true)
      199 |       })
      200 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:197:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Authentication and Authorization › should allow localhost during development

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      210 |         const data = await response.json()
      211 |
    > 212 |         expect(response.status).toBe(200)
          |                                 ^
      213 |         expect(data.success).toBe(true)
      214 |       })
      215 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:212:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Authentication and Authorization › should reject unrecognized sources

    expect(received).toBe(expected) // Object.is equality

    Expected: "Unrecognized cron source"
    Received: "Invalid cron secret"

      227 |
      228 |         expect(response.status).toBe(401)
    > 229 |         expect(data.details).toBe('Unrecognized cron source')
          |                              ^
      230 |       })
      231 |     })
      232 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:229:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › UAE Business Hours Compliance › should skip processing outside UAE business hours

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      244 |         expect(response.status).toBe(200)
      245 |         expect(data.success).toBe(true)
    > 246 |         expect(data.skipped).toBe(true)
          |                              ^
      247 |         expect(data.reason).toContain('Outside UAE business hours')
      248 |         expect(data.nextRun).toBeDefined()
      249 |       })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:246:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › UAE Business Hours Compliance › should skip processing on UAE holidays

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      257 |
      258 |         expect(response.status).toBe(200)
    > 259 |         expect(data.skipped).toBe(true)
          |                              ^
      260 |         expect(data.reason).toContain('UAE holiday')
      261 |       })
      262 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:259:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › UAE Business Hours Compliance › should skip processing during prayer times

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      269 |
      270 |         expect(response.status).toBe(200)
    > 271 |         expect(data.skipped).toBe(true)
          |                              ^
      272 |         expect(data.reason).toContain('Prayer time')
      273 |       })
      274 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:271:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Sequence Processing Flow › should execute all processing steps in correct order

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      298 |         const { emailSchedulingService } = require('@/lib/services/email-scheduling-service')
      299 |
    > 300 |         expect(sequenceTriggersService.monitorInvoiceEvents).toHaveBeenCalled()
          |                                                              ^
      301 |         expect(sequenceExecutionService.processPendingExecutions).toHaveBeenCalled()
      302 |         expect(emailSchedulingService.processScheduledEmails).toHaveBeenCalled()
      303 |       })

      at Object.toHaveBeenCalled (src/app/api/cron/process-sequences/__tests__/route.test.ts:300:62)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Sequence Processing Flow › should return comprehensive processing summary

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 4

      Object {
    -   "successRate": 76.67,
    -   "totalFailed": 3,
    -   "totalProcessed": 30,
    -   "totalSuccessful": 23,
    +   "successRate": 100,
    +   "totalFailed": 0,
    +   "totalProcessed": 0,
    +   "totalSuccessful": 0,
      }

      307 |         const data = await response.json()
      308 |
    > 309 |         expect(data.summary).toEqual({
          |                              ^
      310 |           totalProcessed: 30, // 5 + 10 + 15
      311 |           totalSuccessful: 23, // 3 + 8 + 12
      312 |           totalFailed: 3, // 0 + 2 + 1

      at Object.toEqual (src/app/api/cron/process-sequences/__tests__/route.test.ts:309:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Sequence Processing Flow › should include performance metrics

    expect(received).toBeInstanceOf(expected)

    Expected constructor: String

    Received value has no prototype
    Received value: "2025-10-01T07:19:00.447Z"

      341 |         expect(typeof data.duration).toBe('number')
      342 |         expect(data.duration).toBeGreaterThan(0)
    > 343 |         expect(data.nextRun).toBeInstanceOf(String)
          |                              ^
      344 |       })
      345 |
      346 |       it('should handle warnings from processing steps', async () => {

      at Object.toBeInstanceOf (src/app/api/cron/process-sequences/__tests__/route.test.ts:343:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Sequence Processing Flow › should handle warnings from processing steps

    expect(received).toContain(expected) // indexOf

    Expected value: "5 emails rescheduled due to timing constraints"
    Received array: []

      356 |         const data = await response.json()
      357 |
    > 358 |         expect(data.warnings).toContain('5 emails rescheduled due to timing constraints')
          |                               ^
      359 |       })
      360 |
      361 |       it('should collect and report errors from all steps', async () => {

      at Object.toContain (src/app/api/cron/process-sequences/__tests__/route.test.ts:358:31)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Sequence Processing Flow › should collect and report errors from all steps

    expect(received).toContain(expected) // indexOf

    Expected value: "Database timeout"
    Received array: ["Monitoring failed: Cannot read properties of undefined (reading 'findMany')", "Health check failed: Cannot read properties of undefined (reading 'count')"]

      379 |         const data = await response.json()
      380 |
    > 381 |         expect(data.errors).toContain('Database timeout')
          |                             ^
      382 |         expect(data.errors).toContain('Invalid sequence configuration')
      383 |         expect(data.errors).toContain('Email service unavailable')
      384 |       })

      at Object.toContain (src/app/api/cron/process-sequences/__tests__/route.test.ts:381:29)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Health Checks and Monitoring › should perform database health check

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "SELECT 1"
    Received: ["SELECT 1"]

    Number of calls: 1

      391 |
      392 |         const { prisma } = require('@/lib/prisma')
    > 393 |         expect(prisma.$queryRaw).toHaveBeenCalledWith(expect.stringContaining('SELECT 1'))
          |                                  ^
      394 |         expect(data.success).toBe(true)
      395 |       })
      396 |

      at Object.toHaveBeenCalledWith (src/app/api/cron/process-sequences/__tests__/route.test.ts:393:34)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Health Checks and Monitoring › should detect stuck sequences

    Property `followUpLog` does not exist in the provided object

      398 |         const { prisma } = require('@/lib/prisma')
      399 |         // Mock count query for health checks
    > 400 |         jest.spyOn(prisma, 'followUpLog').mockReturnValue({
          |              ^
      401 |           count: jest.fn().mockResolvedValue(15) // More than 10 stuck sequences
      402 |         } as any)
      403 |

      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:593:13)
      at Object.spyOn (src/app/api/cron/process-sequences/__tests__/route.test.ts:400:14)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Health Checks and Monitoring › should detect critical email queue health

    expect(received).toContain(expected) // indexOf

    Expected value: "Email queue in critical state"
    Received array: ["Monitoring failed: Cannot read properties of undefined (reading 'findMany')", "Health check failed: Cannot read properties of undefined (reading 'count')"]

      422 |         const data = await response.json()
      423 |
    > 424 |         expect(data.errors).toContain('Email queue in critical state')
          |                             ^
      425 |         expect(data.errors).toContain('High email failure rate: 60 failed in last hour')
      426 |       })
      427 |

      at Object.toContain (src/app/api/cron/process-sequences/__tests__/route.test.ts:424:29)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Health Checks and Monitoring › should detect large email queue

    expect(received).toContain(expected) // indexOf

    Expected value: "Large email queue: 1200 emails pending"
    Received array: []

      440 |         const data = await response.json()
      441 |
    > 442 |         expect(data.warnings).toContain('Large email queue: 1200 emails pending')
          |                               ^
      443 |         expect(data.warnings).toContain('Email queue showing warning signs')
      444 |       })
      445 |

      at Object.toContain (src/app/api/cron/process-sequences/__tests__/route.test.ts:442:31)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Activity Logging › should log successful processing activity

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "data": ObjectContaining {
    +   "data": Object {
          "companyId": "system",
    -     "description": StringContaining "Processed 5 triggers, 10 executions, 15 emails",
    -     "metadata": ObjectContaining {
    +     "description": "Processed 0 triggers, 0 executions, 0 emails in 0ms",
    +     "id": "mock-uuid-3runverz6",
    +     "metadata": Object {
    +       "duration": 0,
    +       "endTime": 2025-10-01T06:19:00.482Z,
    +       "errors": Array [
    +         "Monitoring failed: Cannot read properties of undefined (reading 'findMany')",
    +         "Health check failed: Cannot read properties of undefined (reading 'count')",
    +       ],
            "failed": Object {
    -         "emails": 1,
    -         "executions": 2,
    -         "triggers": 2,
    +         "emails": 0,
    +         "executions": 0,
    +         "triggers": 0,
            },
            "isError": false,
            "processed": Object {
    -         "emails": 15,
    -         "executions": 10,
    -         "triggers": 5,
    +         "emails": 0,
    +         "executions": 0,
    +         "triggers": 0,
            },
    +       "startTime": 2025-10-01T06:19:00.482Z,
            "successful": Object {
    -         "emails": 12,
    -         "executions": 8,
    -         "triggers": 3,
    +         "emails": 0,
    +         "executions": 0,
    +         "triggers": 0,
            },
    +       "warnings": Array [],
          },
          "type": "SEQUENCE_PROCESSING",
          "userId": "cron-job",
        },
      },

    Number of calls: 1

      462 |
      463 |         const { prisma } = require('@/lib/prisma')
    > 464 |         expect(prisma.activities.create).toHaveBeenCalledWith({
          |                                          ^
      465 |           data: expect.objectContaining({
      466 |             companyId: 'system',
      467 |             userId: 'cron-job',

      at Object.toHaveBeenCalledWith (src/app/api/cron/process-sequences/__tests__/route.test.ts:464:42)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Activity Logging › should log failure activity on errors

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

      487 |         const data = await response.json()
      488 |
    > 489 |         expect(response.status).toBe(500)
          |                                 ^
      490 |         expect(data.success).toBe(false)
      491 |
      492 |         const { prisma } = require('@/lib/prisma')

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:489:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Next Run Time Calculation › should schedule next run for next business day when needed

    expect(received).toEqual(expected) // deep equality

    Expected: 2025-10-01T21:19:00.488Z
    Received: 2025-10-01T07:19:00.489Z

      526 |         const data = await response.json()
      527 |
    > 528 |         expect(new Date(data.nextRun)).toEqual(nextBusinessDay)
          |                                        ^
      529 |       })
      530 |     })
      531 |

      at Object.toEqual (src/app/api/cron/process-sequences/__tests__/route.test.ts:528:40)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Error Handling and Recovery › should handle trigger service failures gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

      540 |         const data = await response.json()
      541 |
    > 542 |         expect(response.status).toBe(500)
          |                                 ^
      543 |         expect(data.success).toBe(false)
      544 |         expect(data.error).toBe('Sequence processing failed')
      545 |         expect(data.details).toBe('Trigger service unavailable')

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:542:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Error Handling and Recovery › should handle execution service failures gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

      555 |         const data = await response.json()
      556 |
    > 557 |         expect(response.status).toBe(500)
          |                                 ^
      558 |         expect(data.success).toBe(false)
      559 |         expect(data.details).toBe('Execution service crashed')
      560 |       })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:557:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Error Handling and Recovery › should handle email service failures gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

      569 |         const data = await response.json()
      570 |
    > 571 |         expect(response.status).toBe(500)
          |                                 ^
      572 |         expect(data.success).toBe(false)
      573 |         expect(data.details).toBe('SMTP server down')
      574 |       })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:571:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Error Handling and Recovery › should include error details and duration even on failure

    expect(received).toContain(expected) // indexOf

    Expected value: "Service failure"
    Received array: ["Monitoring failed: Cannot read properties of undefined (reading 'findMany')", "Health check failed: Cannot read properties of undefined (reading 'count')"]

      585 |         expect(data.duration).toBeDefined()
      586 |         expect(typeof data.duration).toBe('number')
    > 587 |         expect(data.errors).toContain('Service failure')
          |                             ^
      588 |       })
      589 |     })
      590 |

      at Object.toContain (src/app/api/cron/process-sequences/__tests__/route.test.ts:587:29)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Performance and Load Handling › should handle high-volume processing results

    expect(received).toBe(expected) // Object.is equality

    Expected: 3500
    Received: 0

      632 |
      633 |         expect(response.status).toBe(200)
    > 634 |         expect(data.summary.totalProcessed).toBe(3500)
          |                                             ^
      635 |         expect(data.summary.totalSuccessful).toBe(3200)
      636 |         expect(data.summary.successRate).toBeCloseTo(91.43, 1)
      637 |       })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:634:45)

  ● /api/cron/process-sequences › GET - Cron Job Status › should include queue health information

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 4

      Object {
    -   "failedLastHour": 2,
    -   "queued": 50,
    -   "scheduledToday": 25,
    -   "status": "HEALTHY",
    +   "failedLastHour": 0,
    +   "queued": 0,
    +   "scheduledToday": 0,
    +   "status": "CRITICAL",
      }

      679 |       const data = await response.json()
      680 |
    > 681 |       expect(data.queueHealth).toEqual({
          |                                ^
      682 |         status: 'HEALTHY',
      683 |         queued: 50,
      684 |         scheduledToday: 25,

      at Object.toEqual (src/app/api/cron/process-sequences/__tests__/route.test.ts:681:32)

  ● /api/cron/process-sequences › GET - Cron Job Status › should show processing window status

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      722 |       const data = await response.json()
      723 |
    > 724 |       expect(data.shouldProcessNow).toBe(false)
          |                                     ^
      725 |       expect(data.processingWindow.reason).toContain('Outside UAE business hours')
      726 |       expect(data.processingWindow.nextAvailable).toBeDefined()
      727 |     })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:724:37)

  ● /api/cron/process-sequences › GET - Cron Job Status › should limit recent activity to 10 entries

    expect(received).toHaveLength(expected)

    Expected length: 10
    Received length: 15
    Received array:  [{"description": "Activity 0", "id": "activity-0", "metadata": {}, "timestamp": "2025-10-01T06:19:00.526Z"}, {"description": "Activity 1", "id": "activity-1", "metadata": {}, "timestamp": "2025-10-01T06:18:00.526Z"}, {"description": "Activity 2", "id": "activity-2", "metadata": {}, "timestamp": "2025-10-01T06:17:00.526Z"}, {"description": "Activity 3", "id": "activity-3", "metadata": {}, "timestamp": "2025-10-01T06:16:00.526Z"}, {"description": "Activity 4", "id": "activity-4", "metadata": {}, "timestamp": "2025-10-01T06:15:00.526Z"}, {"description": "Activity 5", "id": "activity-5", "metadata": {}, "timestamp": "2025-10-01T06:14:00.526Z"}, {"description": "Activity 6", "id": "activity-6", "metadata": {}, "timestamp": "2025-10-01T06:13:00.526Z"}, {"description": "Activity 7", "id": "activity-7", "metadata": {}, "timestamp": "2025-10-01T06:12:00.526Z"}, {"description": "Activity 8", "id": "activity-8", "metadata": {}, "timestamp": "2025-10-01T06:11:00.526Z"}, {"description": "Activity 9", "id": "activity-9", "metadata": {}, "timestamp": "2025-10-01T06:10:00.526Z"}, …]

      769 |       const data = await response.json()
      770 |
    > 771 |       expect(data.recentActivity).toHaveLength(10) // Should be limited
          |                                   ^
      772 |       expect(prisma.activities.findMany).toHaveBeenCalledWith(
      773 |         expect.objectContaining({
      774 |           take: 10

      at Object.toHaveLength (src/app/api/cron/process-sequences/__tests__/route.test.ts:771:35)

  ● /api/cron/process-sequences › Edge Cases and Security › should handle very long processing times

    expect(received).toBeGreaterThan(expected)

    Expected: > 2000
    Received:   0

      836 |
      837 |       expect(response.status).toBe(200)
    > 838 |       expect(data.duration).toBeGreaterThan(2000)
          |                             ^
      839 |     })
      840 |
      841 |     it('should prevent memory leaks with large error arrays', async () => {

      at Object.toBeGreaterThan (src/app/api/cron/process-sequences/__tests__/route.test.ts:838:29)

  ● /api/cron/process-sequences › Edge Cases and Security › should prevent memory leaks with large error arrays

    expect(received).toBe(expected) // Object.is equality

    Expected: 1000
    Received: 2

      853 |
      854 |       expect(response.status).toBe(200)
    > 855 |       expect(data.errors.length).toBe(1000)
          |                                  ^
      856 |       expect(Array.isArray(data.errors)).toBe(true)
      857 |     })
      858 |   })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:855:34)

  ● /api/cron/process-sequences › Integration with UAE Business Context › should respect UAE weekend (Friday-Saturday)

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      868 |       const data = await response.json()
      869 |
    > 870 |       expect(data.skipped).toBe(true)
          |                            ^
      871 |       expect(data.reason).toContain('Outside UAE business hours')
      872 |     })
      873 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:870:28)

  ● /api/cron/process-sequences › Integration with UAE Business Context › should respect Islamic holidays

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      880 |       const data = await response.json()
      881 |
    > 882 |       expect(data.skipped).toBe(true)
          |                            ^
      883 |       expect(data.reason).toContain('UAE holiday')
      884 |     })
      885 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:882:28)

  ● /api/cron/process-sequences › Integration with UAE Business Context › should respect prayer times

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      892 |       const data = await response.json()
      893 |
    > 894 |       expect(data.skipped).toBe(true)
          |                            ^
      895 |       expect(data.reason).toContain('Prayer time - avoiding email sends')
      896 |     })
      897 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:894:28)

  ● /api/cron/process-sequences › Integration with UAE Business Context › should calculate next run considering UAE context

    expect(received).toEqual(expected) // deep equality

    Expected: 2025-10-01T21:19:00.538Z
    Received: 2025-10-01T07:19:00.538Z

      912 |       const data = await response.json()
      913 |
    > 914 |       expect(new Date(data.nextRun)).toEqual(nextUAEBusinessHour)
          |                                      ^
      915 |     })
      916 |   })
      917 | })

      at Object.toEqual (src/app/api/cron/process-sequences/__tests__/route.test.ts:914:38)

FAIL src/lib/services/__tests__/uae-islamic-calendar-compliance.test.ts
  ● UAE Islamic Calendar Compliance › Islamic Holiday Detection and Validation › should validate holiday schedule across year boundaries

    expect(received).toBeGreaterThan(expected)

    Expected: > 10
    Received:   10

      127 |
      128 |       expect(yearEnd2024.length).toBeGreaterThan(10)
    > 129 |       expect(yearStart2025.length).toBeGreaterThan(10)
          |                                    ^
      130 |
      131 |       // Should have different holiday sets
      132 |       const holiday2024Dates = yearEnd2024.map(h => h.date.getTime())

      at Object.toBeGreaterThan (src/lib/services/__tests__/uae-islamic-calendar-compliance.test.ts:129:36)

  ● UAE Islamic Calendar Compliance › Cultural Timing Optimization › should provide comprehensive cultural timing for Islamic calendar year

    expect(received).toBeGreaterThan(expected)

    Expected: > 8
    Received:   2

      295 |       )
      296 |
    > 297 |       expect(preferences.avoidancePeriods.length).toBeGreaterThan(8) // Multiple Islamic holidays
          |                                                   ^
      298 |       expect(preferences.culturalConsiderations.length).toBeGreaterThan(3)
      299 |
      300 |       // Should include major Islamic celebrations

      at Object.toBeGreaterThan (src/lib/services/__tests__/uae-islamic-calendar-compliance.test.ts:297:51)

FAIL src/lib/__tests__/uae-business-calendar-comprehensive.test.ts
  ● UAE Business Calendar Comprehensive Tests › UAE Business Week (Sunday-Thursday) › Business Days Calculation › should exclude holidays from business day count

    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 1

      166 |
      167 |         // Should exclude December 2 and 3 (holidays), count only Dec 1, 4, 5
    > 168 |         expect(businessDays).toBe(3)
          |                              ^
      169 |       })
      170 |
      171 |       it('should handle same day calculation', () => {

      at Object.toBe (src/lib/__tests__/uae-business-calendar-comprehensive.test.ts:168:30)

  ● UAE Business Calendar Comprehensive Tests › Prayer Time Awareness (5 Daily Prayers) › Prayer Time Integration with Scheduling › should respect prayer times in business hour calculations

    expect(received).not.toBe(expected) // Object.is equality

    Expected: not 1737003600000

      295 |
      296 |         // With avoidance should be different from without
    > 297 |         expect(timeWithAvoidance.getTime()).not.toBe(timeWithoutAvoidance.getTime())
          |                                                 ^
      298 |       })
      299 |     })
      300 |   })

      at Object.toBe (src/lib/__tests__/uae-business-calendar-comprehensive.test.ts:297:49)

  ● UAE Business Calendar Comprehensive Tests › Cultural Tone Recommendations › Contextual Tone Recommendations › should recommend urgent tone for very overdue payments

    expect(received).toBe(expected) // Object.is equality

    Expected: "URGENT"
    Received: "FIRM"

      593 |
      594 |         const tone = getRecommendedTone(context)
    > 595 |         expect(tone).toBe('URGENT')
          |                      ^
      596 |       })
      597 |
      598 |       it('should maintain professional tone for most standard scenarios', () => {

      at Object.toBe (src/lib/__tests__/uae-business-calendar-comprehensive.test.ts:595:22)

  ● UAE Business Calendar Comprehensive Tests › Cultural Tone Recommendations › Contextual Tone Recommendations › should protect long-term excellent customers

    expect(received).toBe(expected) // Object.is equality

    Expected: "GENTLE"
    Received: "PROFESSIONAL"

      629 |         const poorTone = getRecommendedTone(newPoorCustomer)
      630 |
    > 631 |         expect(excellentTone).toBe('GENTLE')
          |                               ^
      632 |         expect(poorTone).toBe('FIRM')
      633 |       })
      634 |     })

      at Object.toBe (src/lib/__tests__/uae-business-calendar-comprehensive.test.ts:631:31)

  ● UAE Business Calendar Comprehensive Tests › Configuration and Customization › Custom Business Hour Configurations › should handle prayer time configuration

    expect(received).not.toBe(expected) // Object.is equality

    Expected: not 1737003600000

      790 |
      791 |         // Should be different when prayer avoidance is enabled
    > 792 |         expect(timeWithAvoidance.getTime()).not.toBe(timeWithoutAvoidance.getTime())
          |                                                 ^
      793 |       })
      794 |     })
      795 |

      at Object.toBe (src/lib/__tests__/uae-business-calendar-comprehensive.test.ts:792:49)

FAIL src/app/api/consolidation/__tests__/consolidation-api.test.ts
  ● Consolidation API Endpoints › GET /api/consolidation/candidates › should return consolidation candidates

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:113:23)

  ● Consolidation API Endpoints › GET /api/consolidation/candidates › should apply filters correctly

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:164:23)

  ● Consolidation API Endpoints › GET /api/consolidation/candidates › should return 401 for unauthenticated requests

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:176:23)

  ● Consolidation API Endpoints › GET /api/consolidation/candidates › should handle service errors gracefully

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:189:23)

  ● Consolidation API Endpoints › POST /api/consolidation/send › should send consolidations successfully

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      229 |       ;(customerConsolidationService.createConsolidatedReminder as jest.Mock)
      230 |         .mockResolvedValue(mockConsolidation)
    > 231 |       ;(prisma.follow_up_sequencess.findFirst as jest.Mock)
          |                                     ^
      232 |         .mockResolvedValue(mockSequence)
      233 |       ;(sequenceExecutionService.startConsolidatedSequenceExecution as jest.Mock)
      234 |         .mockResolvedValue(mockExecutionResult)

      at Object.findFirst (src/app/api/consolidation/__tests__/consolidation-api.test.ts:231:37)

  ● Consolidation API Endpoints › POST /api/consolidation/send › should validate request body

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:270:23)

  ● Consolidation API Endpoints › POST /api/consolidation/send › should limit batch size

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:289:23)

  ● Consolidation API Endpoints › POST /api/consolidation/send › should handle customer not found

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:311:23)

  ● Consolidation API Endpoints › GET /api/consolidation/metrics › should return consolidation metrics

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:368:23)

  ● Consolidation API Endpoints › GET /api/consolidation/metrics › should handle custom date ranges

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:400:23)

  ● Consolidation API Endpoints › GET /api/consolidation/[id] › should return specific consolidation details

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:439:9)

  ● Consolidation API Endpoints › GET /api/consolidation/[id] › should return 404 for non-existent consolidation

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:456:9)

  ● Consolidation API Endpoints › PUT /api/consolidation/[id] › should update consolidation successfully

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:497:23)

  ● Consolidation API Endpoints › PUT /api/consolidation/[id] › should prevent updates to already sent consolidations

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:528:23)

  ● Consolidation API Endpoints › DELETE /api/consolidation/[id] › should delete consolidation successfully

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:573:9)

  ● Consolidation API Endpoints › DELETE /api/consolidation/[id] › should prevent deletion of already sent consolidations

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:596:9)

  ● Consolidation API Endpoints › Company Data Isolation › should enforce company data isolation across all endpoints

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:624:9)

FAIL src/lib/services/__tests__/sequence-triggers-service.test.ts
  ● SequenceTriggersService › monitorInvoiceEvents › should successfully monitor and trigger sequences

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › monitorInvoiceEvents › should handle no active sequences

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › monitorInvoiceEvents › should skip inactive sequences

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › monitorInvoiceEvents › should handle errors gracefully

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › monitorInvoiceEvents › should prevent duplicate executions

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › monitorInvoiceEvents › should log successful trigger events

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Due Date Triggers › should trigger for overdue invoices

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Due Date Triggers › should not trigger for future due dates

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Due Date Triggers › should handle due date approaching triggers

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Invoice Status Triggers › should trigger only for specific statuses

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Invoice Status Triggers › should not trigger for paid invoices

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Payment-Related Triggers › should consider partial payments

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Payment-Related Triggers › should not trigger for fully paid invoices

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Cooldown Period Management › should respect cooldown periods

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Cooldown Period Management › should allow triggers after cooldown expires

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Cooldown Period Management › should handle different cooldown periods per trigger type

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › UAE Business Hours Integration › should respect UAE business hours

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › UAE Business Hours Integration › should allow triggers during business hours

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › UAE Business Hours Integration › should defer triggers close to weekend

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Manual Triggers › should execute manual triggers successfully

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Manual Triggers › should log manual trigger activity

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Manual Triggers › should handle manual trigger failures

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Payment Event Handling › should stop sequences when payment is received

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Payment Event Handling › should log payment events

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Status Change Handling › should stop sequences when invoice is paid

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Status Change Handling › should trigger overdue sequences when status changes to overdue

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Status Change Handling › should not trigger sequences for invalid status transitions

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Rule Parsing › should parse default triggers from sequence name

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Rule Parsing › should parse overdue triggers from sequence name

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Rule Parsing › should parse custom triggers from metadata

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Rule Parsing › should handle malformed trigger configuration

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Candidate Invoice Selection › should find overdue invoices for overdue triggers

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Candidate Invoice Selection › should find approaching due date invoices

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Candidate Invoice Selection › should batch process large invoice sets

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Validation Rules › should reject invoices with very small amounts

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Validation Rules › should reject invoices with recent payment activity

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Validation Rules › should allow valid invoices

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Monitoring Metrics › should calculate comprehensive monitoring metrics

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Monitoring Metrics › should identify most common trigger types

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Monitoring Metrics › should handle empty metrics gracefully

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Monitoring Metrics › should filter metrics by company when specified

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Error Handling and Edge Cases › should handle sequence execution failures gracefully

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Error Handling and Edge Cases › should handle database connection failures

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Error Handling and Edge Cases › should handle missing invoice data

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Error Handling and Edge Cases › should handle malformed sequence data

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Performance and Scalability › should handle large number of sequences efficiently

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Performance and Scalability › should batch process invoices efficiently

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Performance and Scalability › should handle concurrent trigger processing

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

FAIL src/lib/services/__tests__/cultural-compliance-enhanced.test.ts
  ● Enhanced Cultural Compliance Service › Template Content Analysis › should flag inappropriate demanding language

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      159 |
      160 |       expect(analysis.isValid).toBe(false)
    > 161 |       expect(analysis.languageAppropriate).toBe(false)
          |                                            ^
      162 |       expect(analysis.issues.length).toBeGreaterThan(0)
      163 |       expect(analysis.improvements.length).toBeGreaterThan(0)
      164 |     })

      at Object.toBe (src/lib/services/__tests__/cultural-compliance-enhanced.test.ts:161:44)

  ● Enhanced Cultural Compliance Service › Cultural Score Calculation › should calculate high score for culturally appropriate content

    expect(received).toBeGreaterThan(expected)

    Expected: > 100
    Received:   100

      295 |
      296 |       expect(result.score).toBeGreaterThan(85)
    > 297 |       expect(result.breakdown.islamicEtiquette).toBeGreaterThan(100) // Bonus for Islamic phrases
          |                                                 ^
      298 |       expect(result.breakdown.greetingsAndClosings).toBeGreaterThan(80)
      299 |       expect(result.breakdown.toneRespectfulness).toBeGreaterThan(80)
      300 |     })

      at Object.toBeGreaterThan (src/lib/services/__tests__/cultural-compliance-enhanced.test.ts:297:49)

FAIL src/lib/services/__tests__/payment-workflow-service.test.ts
  ● PaymentWorkflowService › processPaymentWorkflow › should trigger status transition to PAID when payment completes invoice

    expect(received).toMatchObject(expected)

    Matcher error: received value must be a non-null object

    Received has value: undefined

      180 |       )
      181 |
    > 182 |       expect(result.statusTransition).toMatchObject({
          |                                       ^
      183 |         from: InvoiceStatus.SENT,
      184 |         to: InvoiceStatus.PAID,
      185 |         automatic: true

      at Object.toMatchObject (src/lib/services/__tests__/payment-workflow-service.test.ts:182:39)

  ● PaymentWorkflowService › processPaymentWorkflow › should handle payment_overdue_cleared event

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      184 |     return await prisma.$transaction(async (tx) => {
      185 |       // Fetch invoice with related data
    > 186 |       const invoice = await tx.invoices.findUnique({
          |                                         ^
      187 |         where: { id: invoiceId },
      188 |         include: {
      189 |           payments: { select: { amount: true, paymentDate: true } },

      at findUnique (src/lib/services/invoice-status-service.ts:186:41)
      at Object.callback (src/lib/services/__tests__/payment-workflow-service.test.ts:222:22)
      at InvoiceStatusService.$transaction [as updateInvoiceStatus] (src/lib/services/invoice-status-service.ts:184:25)
      at updateInvoiceStatus (src/lib/services/payment-workflow-service.ts:164:57)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:222:16)
      at PaymentWorkflowService.processPaymentWorkflow (src/lib/services/payment-workflow-service.ts:120:12)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:239:22)

  ● PaymentWorkflowService › processPaymentWorkflow › should handle payment_reversed event

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      184 |     return await prisma.$transaction(async (tx) => {
      185 |       // Fetch invoice with related data
    > 186 |       const invoice = await tx.invoices.findUnique({
          |                                         ^
      187 |         where: { id: invoiceId },
      188 |         include: {
      189 |           payments: { select: { amount: true, paymentDate: true } },

      at findUnique (src/lib/services/invoice-status-service.ts:186:41)
      at Object.callback (src/lib/services/__tests__/payment-workflow-service.test.ts:273:22)
      at InvoiceStatusService.$transaction [as updateInvoiceStatus] (src/lib/services/invoice-status-service.ts:184:25)
      at updateInvoiceStatus (src/lib/services/payment-workflow-service.ts:164:57)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:273:16)
      at PaymentWorkflowService.processPaymentWorkflow (src/lib/services/payment-workflow-service.ts:120:12)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:290:22)

  ● PaymentWorkflowService › processBatchPaymentWorkflow › should process multiple payment events successfully

    expect(received).toMatchObject(expected)

    - Expected  - 1
    + Received  + 1

    @@ -1,8 +1,8 @@
      Object {
        "aggregatedSummary": Object {
    -     "formattedTotalAmount": "AED 3000.00",
    +     "formattedTotalAmount": "AED 3,000.00",
          "invoicesFullyPaid": 1,
          "invoicesPartiallyPaid": 1,
          "statusTransitionsTriggered": 0,
          "totalAmountProcessed": 3000,
        },

      416 |       )
      417 |
    > 418 |       expect(result).toMatchObject({
          |                      ^
      419 |         totalRequested: 2,
      420 |         successCount: 2,
      421 |         failedCount: 0,

      at Object.toMatchObject (src/lib/services/__tests__/payment-workflow-service.test.ts:418:22)

  ● PaymentWorkflowService › processPaymentNotification › should handle failed payment notification

    expect(received).rejects.toThrow(expected)

    Expected substring: "Payment failed - no workflow processing required"
    Received message:   "Cannot read properties of undefined (reading 'findFirst')"

          392 |
          393 |       // Check if payment already exists
        > 394 |       const existingPayment = await tx.payments.findFirst({
              |                                                 ^
          395 |         where: { 
          396 |           invoiceId: invoice.id,
          397 |           reference: notification.externalPaymentId

      at findFirst (src/lib/services/payment-workflow-service.ts:394:49)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:688:16)
      at PaymentWorkflowService.processPaymentNotification (src/lib/services/payment-workflow-service.ts:375:12)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:698:7)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (src/lib/services/__tests__/payment-workflow-service.test.ts:703:17)

  ● PaymentWorkflowService › UAE Business Rules Compliance › should generate correct compliance flags

    expect(received).toContain(expected) // indexOf

    Expected value: "TRN_COMPLIANT"
    Received array: []

      795 |       )
      796 |
    > 797 |       expect(result.businessRules.complianceFlags).toContain('TRN_COMPLIANT')
          |                                                    ^
      798 |       expect(result.businessRules.complianceFlags).toContain('BANK_TRANSFER_TRACEABLE')
      799 |       expect(result.businessRules.complianceFlags).toContain('REFERENCE_PROVIDED')
      800 |       expect(result.businessRules.complianceFlags).toContain('PROCESSED_BUSINESS_HOURS')

      at Object.toContain (src/lib/services/__tests__/payment-workflow-service.test.ts:797:52)

FAIL src/app/api/invoices/__tests__/route.test.ts
  ● Invoice API Routes › GET /api/invoices › should return paginated invoices with UAE business insights

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:136:23)

  ● Invoice API Routes › GET /api/invoices › should enforce company-level data isolation

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:162:23)

  ● Invoice API Routes › GET /api/invoices › should handle advanced filtering with UAE business logic

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:190:23)

  ● Invoice API Routes › GET /api/invoices › should handle role-based access control

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:214:23)

  ● Invoice API Routes › POST /api/invoices › should create a new invoice with UAE VAT compliance

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:279:23)

  ● Invoice API Routes › POST /api/invoices › should enforce company-level data isolation on creation

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:310:23)

  ● Invoice API Routes › POST /api/invoices › should validate UAE TRN format

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:331:23)

  ● Invoice API Routes › POST /api/invoices › should prevent duplicate invoice numbers within company

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:348:23)

  ● Invoice API Routes › POST /api/invoices › should validate VAT calculations consistency

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:372:23)

  ● Invoice API Routes › POST /api/invoices › should handle role-based permissions

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:389:23)

  ● Invoice API Routes › POST /api/invoices › should create customer if not exists

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:423:23)

  ● Invoice API Routes › POST /api/invoices › should log comprehensive activity for audit trail

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:453:23)

  ● Invoice API Routes › POST /api/invoices › should handle Arabic language fields

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:509:23)

  ● Invoice API Routes › Error Handling › should handle database connection errors

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:534:23)

  ● Invoice API Routes › Error Handling › should handle validation errors properly

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:541:23)

  ● Invoice API Routes › Error Handling › should handle unauthorized access

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:559:23)

  ● Invoice API Routes › UAE Business Logic › should handle different currency validations

    ReferenceError: validInvoiceData is not defined

      569 |       
      570 |       for (const currency of currencies) {
    > 571 |         const requestData = {
          |                             ^
      572 |           ...validInvoiceData,
      573 |           currency,
      574 |         }

      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:571:29)

  ● Invoice API Routes › UAE Business Logic › should enforce UAE business hours context

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:600:23)

FAIL src/app/api/cron/update-invoice-status/__tests__/route.test.ts
  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Authentication › should require valid cron secret in authorization header

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Authentication › should accept valid cron secret in authorization header

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Authentication › should accept valid cron secret in x-cron-secret header

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - UAE Business Hours Validation › should skip execution during UAE weekends (Friday/Saturday)

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - UAE Business Hours Validation › should skip execution outside business hours

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - UAE Business Hours Validation › should skip execution on UAE public holidays

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - UAE Business Hours Validation › should proceed during UAE business hours (Sunday-Thursday, 8 AM-6 PM)

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should process multiple companies

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should create execution log entry

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should update execution log with results

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should handle company processing errors gracefully

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should respect processing timeout

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should send admin notifications for significant events

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should mark admin notification as HIGH priority when errors occur

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › GET /api/cron/update-invoice-status - Status Check › should require authentication for status check

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › GET /api/cron/update-invoice-status - Status Check › should return comprehensive status information

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › GET /api/cron/update-invoice-status - Status Check › should include current business hours status

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › GET /api/cron/update-invoice-status - Status Check › should show recent execution history

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › GET /api/cron/update-invoice-status - Status Check › should provide overdue statistics

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Error Handling and Recovery › should handle database connection failures

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Error Handling and Recovery › should handle service failures gracefully

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Error Handling and Recovery › should update execution log with error status

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Performance and Monitoring › should track execution time

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Performance and Monitoring › should calculate processing throughput

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Performance and Monitoring › should provide business impact metrics

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

FAIL src/__tests__/lib/uae-business-rules-enhanced.test.ts
  ● Enhanced UAE Business Rules - Sprint 2.4 › Enhanced TRN Validation › should validate a properly formatted TRN with checksum

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      46 |       const result = validateEnhancedUAETRN(sampleTrn)
      47 |
    > 48 |       expect(result.isValid).toBe(true)
         |                              ^
      49 |       expect(result.errors).toHaveLength(0)
      50 |       expect(result.entityType).toBe(UAEEntityType.COMPANY)
      51 |       expect(result.formatted).toBe('400-1234-5670-0123')

      at Object.toBe (src/__tests__/lib/uae-business-rules-enhanced.test.ts:48:30)

  ● Enhanced UAE Business Rules - Sprint 2.4 › Enhanced VAT Calculations › should handle zero-rated transactions

    expect(received).toContain(expected) // indexOf

    Expected value: "Zero-rated for export transactions to international customers"
    Received array: ["Zero-rated supply - maintain supporting documentation for export/qualifying goods", "Export transaction - ensure proper export documentation is maintained"]

      102 |       expect(result.vatAmount.toString()).toBe('0')
      103 |       expect(result.vatCategory).toBe('ZERO_RATED')
    > 104 |       expect(result.complianceNotes).toContain('Zero-rated for export transactions to international customers')
          |                                      ^
      105 |     })
      106 |
      107 |     it('should handle exempt transactions', () => {

      at Object.toContain (src/__tests__/lib/uae-business-rules-enhanced.test.ts:104:38)

  ● Enhanced UAE Business Rules - Sprint 2.4 › Currency Integration with Business Rules › should handle large amounts with warnings

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      263 |       const result = validateAndFormatUAECurrency(largeAmount, 'invoice')
      264 |
    > 265 |       expect(result.isValid).toBe(false)
          |                              ^
      266 |       expect(result.errors).toContain('Amount exceeds banking transaction limits')
      267 |     })
      268 |   })

      at Object.toBe (src/__tests__/lib/uae-business-rules-enhanced.test.ts:265:30)

  ● Enhanced UAE Business Rules - Sprint 2.4 › Integration Tests › should handle complete UAE business transaction workflow

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      273 |       const sampleTrn = '400123456700123'
      274 |       const trnValidation = validateEnhancedUAETRN(sampleTrn)
    > 275 |       expect(trnValidation.isValid).toBe(true)
          |                                     ^
      276 |
      277 |       // Calculate VAT for transaction
      278 |       const vatCalculation = calculateEnhancedVAT({

      at Object.toBe (src/__tests__/lib/uae-business-rules-enhanced.test.ts:275:37)

FAIL tests/integration/dashboard.test.tsx
  ● Dashboard Integration › renders all navigation items correctly

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 | describe('Dashboard Integration', () => {
      53 |   it('renders all navigation items correctly', () => {
    > 54 |     render(
         |           ^
      55 |       <TestWrapper>
      56 |         <DashboardLayout>
      57 |           <div>Dashboard Content</div>

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/integration/dashboard.test.tsx:54:11)

  ● Dashboard Integration › handles mobile navigation correctly

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      72 |
      73 |   it('handles mobile navigation correctly', async () => {
    > 74 |     render(
         |           ^
      75 |       <TestWrapper>
      76 |         <DashboardLayout>
      77 |           <div>Dashboard Content</div>

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/integration/dashboard.test.tsx:74:11)

  ● Dashboard Integration › displays UAE branding correctly

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

       95 |
       96 |   it('displays UAE branding correctly', () => {
    >  97 |     render(
          |           ^
       98 |       <TestWrapper>
       99 |         <DashboardLayout>
      100 |           <div>Dashboard Content</div>

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/integration/dashboard.test.tsx:97:11)

  ● Dashboard Integration › supports RTL layout for Arabic

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

      112 |
      113 |   it('supports RTL layout for Arabic', () => {
    > 114 |     render(
          |           ^
      115 |       <NextIntlClientProvider 
      116 |         locale="ar" 
      117 |         messages={mockMessages}

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8622:13)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10643:15)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/integration/dashboard.test.tsx:114:11)

  ● Dashboard Integration › handles user session display

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      132 |
      133 |   it('handles user session display', () => {
    > 134 |     render(
          |           ^
      135 |       <TestWrapper>
      136 |         <DashboardLayout>
      137 |           <div>Dashboard Content</div>

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/integration/dashboard.test.tsx:134:11)

FAIL src/app/api/sequences/analytics/[id]/__tests__/route.test.ts
  ● GET /api/sequences/analytics/[id] › Authentication and Authorization › should require valid authentication

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Authentication and Authorization › should require user to have company association

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Authentication and Authorization › should enforce company-level data isolation

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Authentication and Authorization › should handle non-existent sequence IDs

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Sequence Information › should return comprehensive sequence information

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Sequence Information › should calculate average duration correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Overview Metrics › should return accurate overview metrics

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Overview Metrics › should handle sequences with no executions

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Funnel Analysis › should generate conversion funnel with correct stage data

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Funnel Analysis › should calculate dropoff rates correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Step-by-Step Analysis › should provide detailed step performance metrics

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Step-by-Step Analysis › should handle different step types appropriately

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Step-by-Step Analysis › should calculate step effectiveness correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › UAE Cultural Compliance › should include cultural scores for each step

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › UAE Cultural Compliance › should provide overall cultural compliance assessment

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › UAE Cultural Compliance › should identify cultural violations and improvements

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Timing Analysis › should provide timing performance data

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Timing Analysis › should respect UAE business hours in analysis

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Recommendations › should generate actionable performance recommendations

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Recommendations › should prioritize recommendations correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Recommendations › should include UAE-specific recommendations

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Query Parameters and Filtering › should handle date range filtering

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Query Parameters and Filtering › should handle step number filtering

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Query Parameters and Filtering › should handle groupBy parameter for trend analysis

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Error Handling › should handle database errors gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Error Handling › should handle invalid sequence ID format

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Error Handling › should handle sequences with corrupted data

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Optimization › should handle large datasets efficiently

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Optimization › should use database transactions for data consistency

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Optimization › should implement efficient aggregation queries

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Security Validation › should sanitize sequence ID parameter

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Security Validation › should validate company ownership consistently

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Security Validation › should handle concurrent requests safely

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

FAIL src/lib/services/__tests__/user-service.test.ts
  ● UserService › createUser › should create a user successfully

    TypeError: mockHash.mockResolvedValue is not a function

      64 |       mockPrisma.users.findUnique.mockResolvedValue(null) // No existing user
      65 |       mockPrisma.companies.findUnique.mockResolvedValue(mockCompany)
    > 66 |       mockHash.mockResolvedValue('hashedpassword')
         |                ^
      67 |       mockPrisma.users.create.mockResolvedValue(mockUser)
      68 |       mockPrisma.activities.create.mockResolvedValue({} as any)
      69 |

      at Object.mockResolvedValue (src/lib/services/__tests__/user-service.test.ts:66:16)

  ● UserService › getUserById › should return user when admin requests user in same company

    ForbiddenError: Access denied to this user

      187 |
      188 |     if (!canView) {
    > 189 |       throw new ForbiddenError('Access denied to this user')
          |             ^
      190 |     }
      191 |
      192 |     return this.formatUserResponse(user)

      at UserService.getUserById (src/lib/services/user-service.ts:189:13)
      at Object.<anonymous> (src/lib/services/__tests__/user-service.test.ts:220:22)

  ● UserService › updateUser › should update user successfully

    ForbiddenError: Access denied to edit this user

      217 |
      218 |     if (!isSelfEdit && !isAdminEdit) {
    > 219 |       throw new ForbiddenError('Access denied to edit this user')
          |             ^
      220 |     }
      221 |
      222 |     // Restrict what users can edit about themselves

      at UserService.updateUser (src/lib/services/user-service.ts:219:13)
      at Object.<anonymous> (src/lib/services/__tests__/user-service.test.ts:256:22)

  ● UserService › updateUser › should validate email uniqueness

    expect(received).rejects.toThrow(expected)

    Expected constructor: ValidationError
    Received constructor: ForbiddenError

    Received message: "Access denied to edit this user"

          217 |
          218 |     if (!isSelfEdit && !isAdminEdit) {
        > 219 |       throw new ForbiddenError('Access denied to edit this user')
              |             ^
          220 |     }
          221 |
          222 |     // Restrict what users can edit about themselves

      at UserService.updateUser (src/lib/services/user-service.ts:219:13)
      at Object.<anonymous> (src/lib/services/__tests__/user-service.test.ts:290:7)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (src/lib/services/__tests__/user-service.test.ts:292:17)

  ● UserService › deleteUser › should delete user successfully

    ForbiddenError: Cannot delete users from other companies

      291 |     // Can only delete users from same company
      292 |     if (user.companies_id !== requesterCompanyId) {
    > 293 |       throw new ForbiddenError('Cannot delete users from other companies')
          |             ^
      294 |     }
      295 |
      296 |     // Soft delete by updating the user record (you might want to implement this differently)

      at UserService.deleteUser (src/lib/services/user-service.ts:293:13)
      at Object.<anonymous> (src/lib/services/__tests__/user-service.test.ts:302:7)

  ● UserService › changePassword › should change password successfully

    ValidationError: Current password is incorrect

      333 |     const isCurrentPasswordValid = await compare(data.currentPassword, user.password)
      334 |     if (!isCurrentPasswordValid) {
    > 335 |       throw new ValidationError('Current password is incorrect', 'currentPassword')
          |             ^
      336 |     }
      337 |
      338 |     // Hash new password

      at UserService.changePassword (src/lib/services/user-service.ts:335:13)
      at Object.<anonymous> (src/lib/services/__tests__/user-service.test.ts:338:7)

FAIL src/app/api/sequences/analytics/__tests__/route.test.ts
  ● GET /api/sequences/analytics › Authentication and Authorization › should require valid authentication

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Authentication and Authorization › should require user to have company association

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Authentication and Authorization › should enforce company-level data isolation

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Authentication and Authorization › should handle role-based access control

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Query Parameter Handling › should handle date range filtering

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Query Parameter Handling › should handle sequence filtering by IDs

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Query Parameter Handling › should handle step number filtering

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Query Parameter Handling › should handle different groupBy options

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Query Parameter Handling › should handle metric type filtering

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Analytics Data Structure › should return comprehensive analytics with all required sections

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Analytics Data Structure › should include UAE-specific cultural compliance metrics

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Analytics Data Structure › should provide trend data with proper date formatting

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Analytics Data Structure › should rank sequences by performance correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Performance Optimization › should handle large datasets efficiently

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Performance Optimization › should implement proper database query optimization

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Performance Optimization › should use database transactions for consistency

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Performance Optimization › should implement appropriate caching for frequent queries

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › UAE Business Logic Integration › should respect UAE business hours in analytics calculations

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › UAE Business Logic Integration › should include cultural compliance scoring

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › UAE Business Logic Integration › should handle Arabic language analytics correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › UAE Business Logic Integration › should consider Islamic holidays in trend analysis

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Error Handling › should handle database connection errors

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Error Handling › should handle invalid query parameters gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Error Handling › should handle service layer errors appropriately

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Error Handling › should provide meaningful error messages for debugging

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Data Aggregation and Calculations › should calculate conversion rates correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Data Aggregation and Calculations › should aggregate data across multiple sequences correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Data Aggregation and Calculations › should handle edge cases with zero executions

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Data Aggregation and Calculations › should handle sequences with no email steps

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Security and Input Validation › should sanitize query parameters to prevent injection

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Security and Input Validation › should enforce rate limiting for analytics requests

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Security and Input Validation › should validate date range limits

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Security and Input Validation › should prevent access to other company data via parameter manipulation

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

FAIL src/__tests__/integration/payment-status-workflow.test.ts
  ● Console

    console.log
      🎉 Payment-Status Workflow Integration Test Suite Ready!

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:664:9)

    console.log
      🧪 Starting complete invoice workflow test...

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:121:15)

    console.log
      ✅ Invoice created in DRAFT status

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:125:15)

    console.log
      🔄 Transitioning invoice from DRAFT to SENT...

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:160:15)

    console.log
      🧪 Testing payment reversal and status rollback...

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:308:15)

    console.log
      🧪 Testing batch payment processing...

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:371:15)

    console.log
      ✅ Batch payment processing handled mixed results correctly

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:450:15)

    console.log
      🧪 Testing UAE business hours enforcement...

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:454:15)

    console.log
      ✅ UAE business hours enforcement working correctly

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:469:15)

    console.log
      🧪 Testing webhook payment notifications...

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:473:15)

    console.log
      ✅ Webhook payment notification processed successfully

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:549:15)

    console.log
      🧪 Testing error handling for database failures...

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:555:15)

    console.log
      🧪 Testing cross-company access prevention...

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:575:15)

    console.log
      🧪 Testing performance with large batch operations...

      at Object.log (src/__tests__/integration/payment-status-workflow.test.ts:610:15)

  ● Payment-Status Workflow Integration › Complete Invoice Lifecycle with Payment Integration › should handle complete invoice workflow from DRAFT to PAID with multiple payments

    TypeError: Cannot read properties of undefined (reading 'create')

      646 |
      647 |     if (notifiableTransitions.includes(`${fromStatus}->${toStatus}`)) {
    > 648 |       await tx.emailLogs.create({
          |                          ^
      649 |         data: {
      650 |           id: crypto.randomUUID(),
      651 |           companyId,

      at InvoiceStatusService.create [as scheduleCustomerNotification] (src/lib/services/invoice-status-service.ts:648:26)
      at scheduleCustomerNotification (src/lib/services/invoice-status-service.ts:258:20)
      at Object.<anonymous> (src/__tests__/integration/payment-status-workflow.test.ts:156:16)
      at InvoiceStatusService.updateInvoiceStatus (src/lib/services/invoice-status-service.ts:184:12)
      at Object.<anonymous> (src/__tests__/integration/payment-status-workflow.test.ts:162:26)

  ● Payment-Status Workflow Integration › Complete Invoice Lifecycle with Payment Integration › should handle payment reversal and status rollback

    expect(received).toBeDefined()

    Received: undefined

      360 |
      361 |       expect(reversalResult.success).toBe(true)
    > 362 |       expect(reversalResult.statusTransition).toBeDefined()
          |                                               ^
      363 |       expect(reversalResult.statusTransition?.from).toBe(InvoiceStatus.PAID)
      364 |       expect(reversalResult.statusTransition?.to).toBe(InvoiceStatus.OVERDUE) // Past due date
      365 |       expect(reversalResult.recommendedActions).toContain('Investigate payment reversal')

      at Object.toBeDefined (src/__tests__/integration/payment-status-workflow.test.ts:362:47)

  ● Payment-Status Workflow Integration › Error Handling and Edge Cases › should handle database transaction failures gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"businessRules": {"auditTrailCreated": true, "businessHours": true, "complianceFlags": ["REFERENCE_PROVIDED", "PROCESSED_BUSINESS_HOURS"], "uaeCompliant": true}, "event": "payment_received", "invoiceId": "invoice-test-123", "invoiceNumber": "INV-TEST-001", "paymentId": "webhook-payment-123", "paymentSummary": {"formattedAmounts": {"currentPayment": "AED 5000.00", "remainingAmount": "AED 0.00", "totalPaid": "AED 5000.00"}, "isFullyPaid": true, "isPartialPayment": false, "paymentCount": 1, "remainingAmount": 0, "totalPaid": 5000}, "recommendedActions": ["Send payment confirmation to customer"], "statusTransition": {"automatic": true, "from": "SENT", "reason": "Payment received via payment gateway", "to": "PAID"}, "success": true}

      557 |       prisma.$transaction.mockRejectedValue(new Error('Database connection timeout'))
      558 |
    > 559 |       await expect(
          |                   ^
      560 |         paymentWorkflowService.processPaymentWorkflow(
      561 |           'payment-123',
      562 |           'payment_received',

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.<anonymous> (src/__tests__/integration/payment-status-workflow.test.ts:559:19)

  ● Payment-Status Workflow Integration › Error Handling and Edge Cases › should prevent cross-company access violations

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"businessRules": {"auditTrailCreated": true, "businessHours": true, "complianceFlags": ["REFERENCE_PROVIDED", "PROCESSED_BUSINESS_HOURS"], "uaeCompliant": true}, "event": "payment_received", "invoiceId": "invoice-test-123", "invoiceNumber": "INV-TEST-001", "paymentId": "webhook-payment-123", "paymentSummary": {"formattedAmounts": {"currentPayment": "AED 5000.00", "remainingAmount": "AED 0.00", "totalPaid": "AED 5000.00"}, "isFullyPaid": true, "isPartialPayment": false, "paymentCount": 1, "remainingAmount": 0, "totalPaid": 5000}, "recommendedActions": ["Send payment confirmation to customer"], "statusTransition": {"automatic": true, "from": "SENT", "reason": "Payment received via payment gateway", "to": "PAID"}, "success": true}

      590 |       })
      591 |
    > 592 |       await expect(
          |                   ^
      593 |         paymentWorkflowService.processPaymentWorkflow(
      594 |           'payment-wrong-company',
      595 |           'payment_received',

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.<anonymous> (src/__tests__/integration/payment-status-workflow.test.ts:592:19)

  ● Payment-Status Workflow Integration › Performance and Scalability › should handle large batch operations efficiently

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      655 |       expect(batchResult.failedCount).toBe(0)
      656 |       expect(processingTime).toBeLessThan(5000) // Should complete within 5 seconds
    > 657 |       expect(batchResult.processingTime).toBeGreaterThan(0)
          |                                          ^
      658 |
      659 |       console.log(`✅ Large batch (100 items) processed in ${processingTime}ms`)
      660 |     })

      at Object.toBeGreaterThan (src/__tests__/integration/payment-status-workflow.test.ts:657:42)

FAIL src/lib/services/__tests__/cultural-compliance-service.test.ts
  ● CulturalComplianceService › Template Content Validation › should flag inappropriate demanding language

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      246 |       expect(analysis.isValid).toBe(false)
      247 |       expect(analysis.culturalCompliance).toBeLessThan(70)
    > 248 |       expect(analysis.languageAppropriate).toBe(false)
          |                                            ^
      249 |       expect(analysis.issues.length).toBeGreaterThan(0)
      250 |       expect(analysis.issues.some(issue => issue.includes('Inappropriate phrase'))).toBe(true)
      251 |     })

      at Object.toBe (src/lib/services/__tests__/cultural-compliance-service.test.ts:248:44)

  ● CulturalComplianceService › Template Content Validation › should validate bilingual templates

    expect(received).toBeGreaterThan(expected)

    Expected: > 70
    Received:   70

      262 |
      263 |       expect(analysis.isValid).toBe(true)
    > 264 |       expect(analysis.culturalCompliance).toBeGreaterThan(70)
          |                                           ^
      265 |     })
      266 |
      267 |     it('should flag missing greetings', () => {

      at Object.toBeGreaterThan (src/lib/services/__tests__/cultural-compliance-service.test.ts:264:43)

  ● CulturalComplianceService › Edge Cases and Error Handling › should handle null or undefined sequence gracefully

    expect(received).not.toThrow()

    Error name:    "TypeError"
    Error message: "Cannot read properties of null (reading 'steps')"

          102 |
          103 |     // Analyze each step in the sequence
        > 104 |     if (sequence.steps && Array.isArray(sequence.steps)) {
              |                  ^
          105 |       sequence.steps.forEach((step: any, index: number) => {
          106 |         const stepAnalysis = this.analyzeStepTone(step, index, customerRelationship)
          107 |         issues.push(...stepAnalysis.issues)

      at Function.steps [as validateSequenceTone] (src/lib/services/cultural-compliance-service.ts:104:18)
      at validateSequenceTone (src/lib/services/__tests__/cultural-compliance-service.test.ts:628:46)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (src/lib/services/__tests__/cultural-compliance-service.test.ts:631:14)
      at Object.toThrow (src/lib/services/__tests__/cultural-compliance-service.test.ts:631:14)

FAIL src/lib/services/__tests__/bilingual-template-validation.test.ts
  ● Bilingual Template Validation › Arabic Template Content Validation › should validate pure Arabic email templates

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      102 |       const analysis = CulturalComplianceService.validateTemplateContent(arabicTemplate)
      103 |
    > 104 |       expect(analysis.isValid).toBe(true)
          |                                ^
      105 |       expect(analysis.culturalCompliance).toBeGreaterThan(80)
      106 |       expect(analysis.languageAppropriate).toBe(true)
      107 |       expect(analysis.respectfulTone).toBe(true)

      at Object.toBe (src/lib/services/__tests__/bilingual-template-validation.test.ts:104:32)

  ● Bilingual Template Validation › Arabic Template Content Validation › should validate bilingual Arabic-English templates

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      126 |       const arabicDetection = CulturalComplianceService.detectArabicLanguage(bilingualTemplate.contentAr)
      127 |
    > 128 |       expect(englishDetection.hasArabic).toBe(true) // Contains Islamic phrases
          |                                          ^
      129 |       expect(arabicDetection.hasArabic).toBe(true)
      130 |       expect(arabicDetection.arabicPercentage).toBeGreaterThan(80)
      131 |     })

      at Object.toBe (src/lib/services/__tests__/bilingual-template-validation.test.ts:128:42)

  ● Bilingual Template Validation › Arabic Template Content Validation › should validate Arabic business terminology

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      153 |       const analysis = CulturalComplianceService.validateTemplateContent(businessArabicTemplate)
      154 |
    > 155 |       expect(analysis.isValid).toBe(true)
          |                                ^
      156 |       expect(analysis.businessAppropriate).toBe(true)
      157 |
      158 |       // Should contain proper Arabic business terms

      at Object.toBe (src/lib/services/__tests__/bilingual-template-validation.test.ts:155:32)

  ● Bilingual Template Validation › Cultural Context in Bilingual Templates › should validate Islamic greetings in both languages

    expect(received).toBeGreaterThan(expected)

    Expected: > 85
    Received:   81

      296 |
      297 |       expect(englishScore.score).toBeGreaterThan(85)
    > 298 |       expect(arabicScore.score).toBeGreaterThan(85)
          |                                 ^
      299 |       expect(englishScore.breakdown.islamicEtiquette).toBeGreaterThan(100) // Bonus points
      300 |       expect(arabicScore.breakdown.islamicEtiquette).toBeGreaterThan(100)
      301 |     })

      at Object.toBeGreaterThan (src/lib/services/__tests__/bilingual-template-validation.test.ts:298:33)

  ● Bilingual Template Validation › Cultural Context in Bilingual Templates › should validate Ramadan-specific bilingual content

    expect(received).toBeGreaterThan(expected)

    Expected: > 90
    Received:   84

      316 |       const arabicScore = CulturalComplianceService.calculateCulturalScore(ramadanTemplate.contentAr, { ...context, language: 'ar' })
      317 |
    > 318 |       expect(englishScore.score).toBeGreaterThan(90)
          |                                  ^
      319 |       expect(arabicScore.score).toBeGreaterThan(90)
      320 |       expect(englishScore.breakdown.culturalSensitivity).toBeGreaterThan(85)
      321 |       expect(arabicScore.breakdown.culturalSensitivity).toBeGreaterThan(85)

      at Object.toBeGreaterThan (src/lib/services/__tests__/bilingual-template-validation.test.ts:318:34)

  ● Bilingual Template Validation › Cultural Context in Bilingual Templates › should validate formal government communication in Arabic

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      330 |       const analysis = CulturalComplianceService.validateTemplateContent(governmentArabicTemplate)
      331 |
    > 332 |       expect(analysis.isValid).toBe(true)
          |                                ^
      333 |       expect(analysis.respectfulTone).toBe(true)
      334 |       expect(analysis.businessAppropriate).toBe(true)
      335 |

      at Object.toBe (src/lib/services/__tests__/bilingual-template-validation.test.ts:332:32)

FAIL src/lib/services/__tests__/sequence-execution-service.test.ts
  ● SequenceExecutionService › startSequenceExecution › should successfully start a sequence execution

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › startSequenceExecution › should reject execution for inactive sequences

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › startSequenceExecution › should prevent duplicate executions for same invoice

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › startSequenceExecution › should handle paid invoices gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › startSequenceExecution › should validate UAE business hours for execution timing

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › startSequenceExecution › should enforce email sending limits

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › executeSequenceStep › should process template variables correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › executeSequenceStep › should validate cultural compliance

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › executeSequenceStep › should handle bilingual sequences (BOTH language)

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › executeSequenceStep › should determine appropriate email priority

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › continueSequenceExecution › should continue to next step in sequence

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › continueSequenceExecution › should handle completed sequences

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › continueSequenceExecution › should check stop conditions before execution

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › getSequenceAnalytics › should calculate comprehensive sequence analytics

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › getSequenceAnalytics › should handle empty analytics gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › getSequenceAnalytics › should calculate correct conversion rates

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › processPendingExecutions › should process multiple pending executions

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › processPendingExecutions › should handle processing errors gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › stopSequenceExecution › should cancel queued emails and mark sequence as stopped

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › UAE Business Logic Integration › should respect UAE business hours when scheduling

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › UAE Business Logic Integration › should handle UAE holidays appropriately

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Error Handling and Edge Cases › should handle malformed sequence steps

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Error Handling and Edge Cases › should handle missing invoice gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Error Handling and Edge Cases › should handle email scheduling failures

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Performance and Scalability › should handle large sequence processing efficiently

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Performance and Scalability › should batch email operations for performance

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Security and Data Integrity › should validate sequence ownership

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Security and Data Integrity › should sanitize template variables

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Cultural Compliance Integration › should adjust tone based on customer relationship

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Cultural Compliance Integration › should validate content for cultural appropriateness

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

FAIL tests/critical-flows/core-functionality.test.ts
  ● Core Functionality Tests › PDF Invoice Parser Service › should parse PDF successfully with pdf2json

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      34 |       const testPdfBuffer = Buffer.from('Mock PDF content')
      35 |
    > 36 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      37 |
      38 |       expect(result).toBeDefined()
      39 |       expect(result.success).toBe(true)

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:36:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should handle UAE invoice patterns

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      45 |       const testPdfBuffer = Buffer.from('Mock UAE invoice PDF')
      46 |
    > 47 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      48 |
      49 |       expect(result).toBeDefined()
      50 |       expect(result.extractedData.currency).toBe('AED')

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:47:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should not crash with empty or invalid input

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      54 |       const emptyBuffer = Buffer.alloc(0)
      55 |
    > 56 |       const result = await PDFInvoiceParserService.parseInvoice(emptyBuffer)
         |                                                    ^
      57 |
      58 |       // Should not throw, should return a result
      59 |       expect(result).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:56:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should extract text from mock PDF data

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      64 |       const testPdfBuffer = Buffer.from('Mock PDF for text extraction')
      65 |
    > 66 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      67 |
      68 |       expect(result.rawText).toBeDefined()
      69 |       expect(typeof result.rawText).toBe('string')

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:66:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should parse invoice numbers correctly

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      73 |       const testPdfBuffer = Buffer.from('Mock PDF with invoice number')
      74 |
    > 75 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      76 |
      77 |       // Should extract some kind of invoice identifier
      78 |       expect(result.extractedData).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:75:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should handle customer name extraction

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      83 |       const testPdfBuffer = Buffer.from('Mock PDF with customer name')
      84 |
    > 85 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      86 |
      87 |       expect(result.extractedData.customerName).toBeDefined()
      88 |       expect(typeof result.extractedData.customerName).toBe('string')

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:85:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should extract amounts in AED currency

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      92 |       const testPdfBuffer = Buffer.from('Mock PDF with AED amounts')
      93 |
    > 94 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      95 |
      96 |       expect(result.extractedData.totalAmount).toBeGreaterThanOrEqual(0)
      97 |       expect(result.extractedData.currency).toBe('AED')

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:94:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should provide confidence scoring

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      101 |       const testPdfBuffer = Buffer.from('Mock PDF for confidence test')
      102 |
    > 103 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
          |                                                    ^
      104 |
      105 |       expect(result.confidence).toBeGreaterThanOrEqual(0)
      106 |       expect(result.confidence).toBeLessThanOrEqual(1)

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:103:52)

  ● Core Functionality Tests › Error Handling › should provide meaningful error information

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      160 |       const corruptedBuffer = Buffer.from('Corrupted PDF data')
      161 |
    > 162 |       const result = await PDFInvoiceParserService.parseInvoice(corruptedBuffer)
          |                                                    ^
      163 |
      164 |       // Even on failure, should provide useful information
      165 |       expect(result).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:162:52)

  ● Core Functionality Tests › UAE Business Logic › should default to AED currency

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      174 |       const testBuffer = Buffer.from('Mock UAE invoice')
      175 |
    > 176 |       const result = await PDFInvoiceParserService.parseInvoice(testBuffer)
          |                                                    ^
      177 |
      178 |       expect(result.extractedData.currency).toBe('AED')
      179 |     })

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:176:52)

  ● Core Functionality Tests › UAE Business Logic › should extract UAE-specific patterns

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      182 |       const testBuffer = Buffer.from('Mock UAE business document')
      183 |
    > 184 |       const result = await PDFInvoiceParserService.parseInvoice(testBuffer)
          |                                                    ^
      185 |
      186 |       // Should work with UAE business patterns
      187 |       expect(result).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:184:52)

  ● Core Functionality Tests › UAE Business Logic › should handle bilingual content (English/Arabic)

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      192 |       const testBuffer = Buffer.from('Mock bilingual invoice')
      193 |
    > 194 |       const result = await PDFInvoiceParserService.parseInvoice(testBuffer)
          |                                                    ^
      195 |
      196 |       // Should process mixed language content
      197 |       expect(result.success).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:194:52)

  ● Core Functionality Tests › Production Stability › should handle very large files gracefully

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      220 |       const largeBuffer = Buffer.alloc(10 * 1024 * 1024) // 10MB
      221 |
    > 222 |       const result = await PDFInvoiceParserService.parseInvoice(largeBuffer)
          |                                                    ^
      223 |
      224 |       // Should handle without memory issues
      225 |       expect(result).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:222:52)

  ● Core Functionality Tests › Production Stability › should have consistent response format

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      229 |       const testBuffer = Buffer.from('Consistent format test')
      230 |
    > 231 |       const result = await PDFInvoiceParserService.parseInvoice(testBuffer)
          |                                                    ^
      232 |
      233 |       // Should always have the same response structure
      234 |       expect(result).toHaveProperty('success')

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:231:52)

FAIL src/app/api/auth/signup/__tests__/route.test.ts
  ● Console

    console.error
      Application Error: {
        "timestamp": "2025-10-01T06:19:02.098Z",
        "context": "POST /api/auth/signup",
        "error": {
          "name": "TypeError",
          "message": "request.json is not a function",
          "stack": "TypeError: request.json is not a function\n    at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)\n    at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:44:34)\n    at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)"
        },
        "additionalData": {
          "email": "redacted_for_security",
          "company": "redacted_for_security"
        }
      }

      185 |   }
      186 |   
    > 187 |   console.error('Application Error:', JSON.stringify(errorInfo, null, 2))
          |           ^
      188 | }

      at error (src/lib/errors.ts:187:11)
      at POST (src/app/api/auth/signup/route.ts:81:13)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:44:34)

    console.error
      API Error: TypeError: request.json is not a function
          at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)
          at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:44:34)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      43 |
      44 | export function handleApiError(error: unknown): NextResponse {
    > 45 |   console.error('API Error:', error)
         |           ^
      46 |
      47 |   // Handle known app errors
      48 |   if (error instanceof AppError) {

      at error (src/lib/errors.ts:45:11)
      at POST (src/app/api/auth/signup/route.ts:85:26)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:44:34)

    console.error
      Application Error: {
        "timestamp": "2025-10-01T06:19:02.114Z",
        "context": "POST /api/auth/signup",
        "error": {
          "name": "TypeError",
          "message": "request.json is not a function",
          "stack": "TypeError: request.json is not a function\n    at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)\n    at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:86:34)\n    at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)"
        },
        "additionalData": {
          "email": "redacted_for_security",
          "company": "redacted_for_security"
        }
      }

      185 |   }
      186 |   
    > 187 |   console.error('Application Error:', JSON.stringify(errorInfo, null, 2))
          |           ^
      188 | }

      at error (src/lib/errors.ts:187:11)
      at POST (src/app/api/auth/signup/route.ts:81:13)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:86:34)

    console.error
      API Error: TypeError: request.json is not a function
          at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)
          at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:86:34)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      43 |
      44 | export function handleApiError(error: unknown): NextResponse {
    > 45 |   console.error('API Error:', error)
         |           ^
      46 |
      47 |   // Handle known app errors
      48 |   if (error instanceof AppError) {

      at error (src/lib/errors.ts:45:11)
      at POST (src/app/api/auth/signup/route.ts:85:26)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:86:34)

    console.error
      Application Error: {
        "timestamp": "2025-10-01T06:19:02.115Z",
        "context": "POST /api/auth/signup",
        "error": {
          "name": "TypeError",
          "message": "request.json is not a function",
          "stack": "TypeError: request.json is not a function\n    at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)\n    at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:108:34)\n    at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)"
        },
        "additionalData": {
          "email": "redacted_for_security",
          "company": "redacted_for_security"
        }
      }

      185 |   }
      186 |   
    > 187 |   console.error('Application Error:', JSON.stringify(errorInfo, null, 2))
          |           ^
      188 | }

      at error (src/lib/errors.ts:187:11)
      at POST (src/app/api/auth/signup/route.ts:81:13)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:108:34)

    console.error
      API Error: TypeError: request.json is not a function
          at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)
          at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:108:34)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      43 |
      44 | export function handleApiError(error: unknown): NextResponse {
    > 45 |   console.error('API Error:', error)
         |           ^
      46 |
      47 |   // Handle known app errors
      48 |   if (error instanceof AppError) {

      at error (src/lib/errors.ts:45:11)
      at POST (src/app/api/auth/signup/route.ts:85:26)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:108:34)

    console.error
      Application Error: {
        "timestamp": "2025-10-01T06:19:02.116Z",
        "context": "POST /api/auth/signup",
        "error": {
          "name": "TypeError",
          "message": "request.json is not a function",
          "stack": "TypeError: request.json is not a function\n    at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)\n    at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:129:34)\n    at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)"
        },
        "additionalData": {
          "email": "redacted_for_security",
          "company": "redacted_for_security"
        }
      }

      185 |   }
      186 |   
    > 187 |   console.error('Application Error:', JSON.stringify(errorInfo, null, 2))
          |           ^
      188 | }

      at error (src/lib/errors.ts:187:11)
      at POST (src/app/api/auth/signup/route.ts:81:13)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:129:34)

    console.error
      API Error: TypeError: request.json is not a function
          at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)
          at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:129:34)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      43 |
      44 | export function handleApiError(error: unknown): NextResponse {
    > 45 |   console.error('API Error:', error)
         |           ^
      46 |
      47 |   // Handle known app errors
      48 |   if (error instanceof AppError) {

      at error (src/lib/errors.ts:45:11)
      at POST (src/app/api/auth/signup/route.ts:85:26)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:129:34)

    console.error
      Application Error: {
        "timestamp": "2025-10-01T06:19:02.123Z",
        "context": "POST /api/auth/signup",
        "error": {
          "name": "TypeError",
          "message": "request.json is not a function",
          "stack": "TypeError: request.json is not a function\n    at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)\n    at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:150:34)\n    at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)"
        },
        "additionalData": {
          "email": "redacted_for_security",
          "company": "redacted_for_security"
        }
      }

      185 |   }
      186 |   
    > 187 |   console.error('Application Error:', JSON.stringify(errorInfo, null, 2))
          |           ^
      188 | }

      at error (src/lib/errors.ts:187:11)
      at POST (src/app/api/auth/signup/route.ts:81:13)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:150:34)

    console.error
      API Error: TypeError: request.json is not a function
          at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)
          at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:150:34)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      43 |
      44 | export function handleApiError(error: unknown): NextResponse {
    > 45 |   console.error('API Error:', error)
         |           ^
      46 |
      47 |   // Handle known app errors
      48 |   if (error instanceof AppError) {

      at error (src/lib/errors.ts:45:11)
      at POST (src/app/api/auth/signup/route.ts:85:26)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:150:34)

    console.error
      Application Error: {
        "timestamp": "2025-10-01T06:19:02.124Z",
        "context": "POST /api/auth/signup",
        "error": {
          "name": "TypeError",
          "message": "request.json is not a function",
          "stack": "TypeError: request.json is not a function\n    at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)\n    at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:174:34)\n    at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)"
        },
        "additionalData": {
          "email": "redacted_for_security",
          "company": "redacted_for_security"
        }
      }

      185 |   }
      186 |   
    > 187 |   console.error('Application Error:', JSON.stringify(errorInfo, null, 2))
          |           ^
      188 | }

      at error (src/lib/errors.ts:187:11)
      at POST (src/app/api/auth/signup/route.ts:81:13)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:174:34)

    console.error
      API Error: TypeError: request.json is not a function
          at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)
          at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:174:34)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      43 |
      44 | export function handleApiError(error: unknown): NextResponse {
    > 45 |   console.error('API Error:', error)
         |           ^
      46 |
      47 |   // Handle known app errors
      48 |   if (error instanceof AppError) {

      at error (src/lib/errors.ts:45:11)
      at POST (src/app/api/auth/signup/route.ts:85:26)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:174:34)

    console.error
      Application Error: {
        "timestamp": "2025-10-01T06:19:02.126Z",
        "context": "POST /api/auth/signup",
        "error": {
          "name": "TypeError",
          "message": "request.json is not a function",
          "stack": "TypeError: request.json is not a function\n    at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)\n    at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:198:34)\n    at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)"
        },
        "additionalData": {
          "email": "redacted_for_security",
          "company": "redacted_for_security"
        }
      }

      185 |   }
      186 |   
    > 187 |   console.error('Application Error:', JSON.stringify(errorInfo, null, 2))
          |           ^
      188 | }

      at error (src/lib/errors.ts:187:11)
      at POST (src/app/api/auth/signup/route.ts:81:13)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:198:34)

    console.error
      API Error: TypeError: request.json is not a function
          at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)
          at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:198:34)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      43 |
      44 | export function handleApiError(error: unknown): NextResponse {
    > 45 |   console.error('API Error:', error)
         |           ^
      46 |
      47 |   // Handle known app errors
      48 |   if (error instanceof AppError) {

      at error (src/lib/errors.ts:45:11)
      at POST (src/app/api/auth/signup/route.ts:85:26)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:198:34)

    console.error
      Application Error: {
        "timestamp": "2025-10-01T06:19:02.127Z",
        "context": "POST /api/auth/signup",
        "error": {
          "name": "TypeError",
          "message": "request.json is not a function",
          "stack": "TypeError: request.json is not a function\n    at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)\n    at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:221:34)\n    at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)"
        },
        "additionalData": {
          "email": "redacted_for_security",
          "company": "redacted_for_security"
        }
      }

      185 |   }
      186 |   
    > 187 |   console.error('Application Error:', JSON.stringify(errorInfo, null, 2))
          |           ^
      188 | }

      at error (src/lib/errors.ts:187:11)
      at POST (src/app/api/auth/signup/route.ts:81:13)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:221:34)

    console.error
      API Error: TypeError: request.json is not a function
          at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)
          at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:221:34)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      43 |
      44 | export function handleApiError(error: unknown): NextResponse {
    > 45 |   console.error('API Error:', error)
         |           ^
      46 |
      47 |   // Handle known app errors
      48 |   if (error instanceof AppError) {

      at error (src/lib/errors.ts:45:11)
      at POST (src/app/api/auth/signup/route.ts:85:26)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:221:34)

    console.error
      Application Error: {
        "timestamp": "2025-10-01T06:19:02.128Z",
        "context": "POST /api/auth/signup",
        "error": {
          "name": "TypeError",
          "message": "request.json is not a function",
          "stack": "TypeError: request.json is not a function\n    at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)\n    at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:245:34)\n    at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)"
        },
        "additionalData": {
          "email": "redacted_for_security",
          "company": "redacted_for_security"
        }
      }

      185 |   }
      186 |   
    > 187 |   console.error('Application Error:', JSON.stringify(errorInfo, null, 2))
          |           ^
      188 | }

      at error (src/lib/errors.ts:187:11)
      at POST (src/app/api/auth/signup/route.ts:81:13)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:245:34)

    console.error
      API Error: TypeError: request.json is not a function
          at json (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/route.ts:9:62)
          at Object.<anonymous> (/Users/ibbs/Development/reminder-mvp/src/app/api/auth/signup/__tests__/route.test.ts:245:34)
          at Promise.finally.completed (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)
          at _callCircusTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:946:3)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:839:13)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at _runTestsForDescribeBlock (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:829:11)
          at run (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:757:3)
          at runAndTransformResultsToJestFormat (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)
          at jestAdapter (/Users/ibbs/Development/reminder-mvp/node_modules/jest-circus/build/runner.js:101:19)
          at runTestInternal (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:275:16)
          at runTest (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:343:7)
          at Object.worker (/Users/ibbs/Development/reminder-mvp/node_modules/jest-runner/build/testWorker.js:497:12)

      43 |
      44 | export function handleApiError(error: unknown): NextResponse {
    > 45 |   console.error('API Error:', error)
         |           ^
      46 |
      47 |   // Handle known app errors
      48 |   if (error instanceof AppError) {

      at error (src/lib/errors.ts:45:11)
      at POST (src/app/api/auth/signup/route.ts:85:26)
      at Object.<anonymous> (src/app/api/auth/signup/__tests__/route.test.ts:245:34)

  ● /api/auth/signup › POST /api/auth/signup › should create a new user and company successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      46 |
      47 |       // Assert
    > 48 |       expect(response.status).toBe(201)
         |                               ^
      49 |       expect(data.message).toBe('User created successfully')
      50 |       expect(data.user).toEqual({
      51 |         id: 'user-id',

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:48:31)

  ● /api/auth/signup › POST /api/auth/signup › should return 400 if user already exists

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      88 |
      89 |       // Assert
    > 90 |       expect(response.status).toBe(400)
         |                               ^
      91 |       expect(data.error).toBe('User already exists')
      92 |       
      93 |       // Verify transaction was not called

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:90:31)

  ● /api/auth/signup › POST /api/auth/signup › should return 400 for missing required fields

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      110 |
      111 |       // Assert
    > 112 |       expect(response.status).toBe(400)
          |                               ^
      113 |       expect(data.error).toBe('All fields are required')
      114 |     })
      115 |

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:112:31)

  ● /api/auth/signup › POST /api/auth/signup › should return 400 for invalid email format

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      131 |
      132 |       // Assert
    > 133 |       expect(response.status).toBe(400)
          |                               ^
      134 |       expect(data.error).toBe('Invalid email format')
      135 |     })
      136 |

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:133:31)

  ● /api/auth/signup › POST /api/auth/signup › should return 400 for weak password

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      152 |
      153 |       // Assert
    > 154 |       expect(response.status).toBe(400)
          |                               ^
      155 |       expect(data.error).toBe('Password must be at least 8 characters long')
      156 |     })
      157 |

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:154:31)

  ● /api/auth/signup › POST /api/auth/signup › should return 500 for database transaction failure

    expect(received).toBe(expected) // Object.is equality

    Expected: "Internal server error"
    Received: "request.json is not a function"

      177 |       // Assert
      178 |       expect(response.status).toBe(500)
    > 179 |       expect(data.error).toBe('Internal server error')
          |                          ^
      180 |     })
      181 |
      182 |     it('should return 500 for bcrypt hashing failure', async () => {

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:179:26)

  ● /api/auth/signup › POST /api/auth/signup › should return 500 for bcrypt hashing failure

    expect(received).toBe(expected) // Object.is equality

    Expected: "Internal server error"
    Received: "request.json is not a function"

      201 |       // Assert
      202 |       expect(response.status).toBe(500)
    > 203 |       expect(data.error).toBe('Internal server error')
          |                          ^
      204 |     })
      205 |
      206 |     it('should handle special characters in company name', async () => {

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:203:26)

  ● /api/auth/signup › POST /api/auth/signup › should handle special characters in company name

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      223 |
      224 |       // Assert
    > 225 |       expect(response.status).toBe(201)
          |                               ^
      226 |       expect(data.message).toBe('User created successfully')
      227 |       expect(prisma.$transaction).toHaveBeenCalled()
      228 |     })

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:225:31)

  ● /api/auth/signup › POST /api/auth/signup › should trim whitespace from inputs

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      247 |
      248 |       // Assert
    > 249 |       expect(response.status).toBe(201)
          |                               ^
      250 |       expect(prisma.users.findUnique).toHaveBeenCalledWith({
      251 |         where: { email: 'test@example.com' } // Should be trimmed
      252 |       })

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:249:31)

FAIL src/__tests__/performance/bucket-calculations-performance.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      10 |   count: number
      11 |   totalAmount: number
    > 12 |   color: string
         |                ^
      13 |   priority: 'low' | 'medium' | 'high' | 'critical'
      14 |   hasUrgentCustomers: boolean
      15 |   hasAutoRemindersEnabled: boolean

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (node_modules/next-auth/index.js:25:37)
      at Object.<anonymous> (src/app/api/invoices/buckets/route.ts:12:19)
      at Object.<anonymous> (src/__tests__/performance/bucket-calculations-performance.test.ts:17:16)

FAIL src/app/api/invoices/buckets/[bucketId]/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      10 |   'overdue_8_14': { min: 8, max: 14 },
      11 |   'overdue_15_30': { min: 15, max: 30 },
    > 12 |   'overdue_30_plus': { min: 31, max: null }
         |                   ^
      13 | }
      14 |
      15 | function calculateDaysOverdue(dueDate: Date): number {

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (node_modules/next-auth/index.js:25:37)
      at Object.<anonymous> (src/app/api/invoices/buckets/[bucketId]/route.ts:12:19)
      at Object.<anonymous> (src/app/api/invoices/buckets/[bucketId]/__tests__/route.test.ts:16:16)

FAIL src/hooks/__tests__/use-invoice-buckets.test.ts
  ● useInvoiceBuckets hooks › useBucketData › should fetch bucket data successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      49 |       const { result } = renderHook(() => useBucketData())
      50 |
    > 51 |       expect(result.current.isLoading).toBe(true)
         |                                        ^
      52 |       expect(result.current.data).toBeNull()
      53 |       expect(result.current.error).toBeNull()
      54 |

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:51:40)

  ● useInvoiceBuckets hooks › useBucketData › should handle fetch errors

    expect(received).toBe(expected) // Object.is equality

    Expected: "Failed to fetch bucket data"
    Received: null

      77 |
      78 |       expect(result.current.data).toBeNull()
    > 79 |       expect(result.current.error).toBe(errorMessage)
         |                                    ^
      80 |     })
      81 |
      82 |     it('should handle network errors', async () => {

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:79:36)

  ● useInvoiceBuckets hooks › useBucketData › should handle network errors

    expect(received).toBe(expected) // Object.is equality

    Expected: "Failed to fetch bucket data"
    Received: null

      90 |
      91 |       expect(result.current.data).toBeNull()
    > 92 |       expect(result.current.error).toBe('Failed to fetch bucket data')
         |                                    ^
      93 |     })
      94 |
      95 |     it('should refetch data on demand', async () => {

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:92:36)

  ● useInvoiceBuckets hooks › useBucketData › should refetch data on demand

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      117 |       })
      118 |
    > 119 |       expect(mockFetch).toHaveBeenCalledTimes(1)
          |                         ^
      120 |
      121 |       // Trigger refetch
      122 |       result.current.refetch()

      at Object.toHaveBeenCalledTimes (src/hooks/__tests__/use-invoice-buckets.test.ts:119:25)

  ● useInvoiceBuckets hooks › useBucketData › should auto-refresh based on refresh interval

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      151 |       })
      152 |
    > 153 |       expect(mockFetch).toHaveBeenCalledTimes(1)
          |                         ^
      154 |
      155 |       // Fast-forward time by 5 seconds
      156 |       jest.advanceTimersByTime(5000)

      at Object.toHaveBeenCalledTimes (src/hooks/__tests__/use-invoice-buckets.test.ts:153:25)

  ● useInvoiceBuckets hooks › useBucketDetails › should fetch bucket details successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      217 |       const { result } = renderHook(() => useBucketDetails('bucket-1-3-days', options))
      218 |
    > 219 |       expect(result.current.isLoading).toBe(true)
          |                                        ^
      220 |       expect(result.current.data).toBeNull()
      221 |       expect(result.current.error).toBeNull()
      222 |

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:219:40)

  ● useInvoiceBuckets hooks › useBucketDetails › should handle search parameters correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/api/invoices/buckets/bucket-4-7-days?page=2&limit=10&sortBy=amount&sortOrder=desc&search=ABC%20Trading"

    Number of calls: 0

      250 |       })
      251 |
    > 252 |       expect(mockFetch).toHaveBeenCalledWith('/api/invoices/buckets/bucket-4-7-days?page=2&limit=10&sortBy=amount&sortOrder=desc&search=ABC%20Trading')
          |                         ^
      253 |     })
      254 |
      255 |     it('should handle API errors', async () => {

      at Object.toHaveBeenCalledWith (src/hooks/__tests__/use-invoice-buckets.test.ts:252:25)

  ● useInvoiceBuckets hooks › useBucketDetails › should handle API errors

    expect(received).toBe(expected) // Object.is equality

    Expected: "Bucket not found"
    Received: null

      268 |
      269 |       expect(result.current.data).toBeNull()
    > 270 |       expect(result.current.error).toBe(errorMessage)
          |                                    ^
      271 |     })
      272 |
      273 |     it('should skip fetch if bucketId is empty', () => {

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:270:36)

  ● useInvoiceBuckets hooks › Utility Functions › formatCurrency › should format AED currency correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: "AED 1,000.00"
    Received: "AED 1,000.00"

      284 |     describe('formatCurrency', () => {
      285 |       it('should format AED currency correctly', () => {
    > 286 |         expect(formatCurrency(1000)).toBe('AED 1,000.00')
          |                                      ^
      287 |         expect(formatCurrency(1500.50)).toBe('AED 1,500.50')
      288 |         expect(formatCurrency(1000000)).toBe('AED 1,000,000.00')
      289 |       })

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:286:38)

  ● useInvoiceBuckets hooks › Utility Functions › formatCurrency › should handle different currencies

    expect(received).toBe(expected) // Object.is equality

    Expected: "USD 1,000.00"
    Received: "$1,000.00"

      290 |
      291 |       it('should handle different currencies', () => {
    > 292 |         expect(formatCurrency(1000, 'USD')).toBe('USD 1,000.00')
          |                                             ^
      293 |         expect(formatCurrency(1000, 'EUR')).toBe('EUR 1,000.00')
      294 |       })
      295 |

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:292:45)

  ● useInvoiceBuckets hooks › Utility Functions › formatCurrency › should handle zero and negative amounts

    expect(received).toBe(expected) // Object.is equality

    Expected: "AED 0.00"
    Received: "AED 0.00"

      295 |
      296 |       it('should handle zero and negative amounts', () => {
    > 297 |         expect(formatCurrency(0)).toBe('AED 0.00')
          |                                   ^
      298 |         expect(formatCurrency(-100)).toBe('AED -100.00')
      299 |       })
      300 |

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:297:35)

  ● useInvoiceBuckets hooks › Utility Functions › formatCurrency › should handle invalid amounts gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: "AED 0.00"
    Received: "AEDNaN"

      300 |
      301 |       it('should handle invalid amounts gracefully', () => {
    > 302 |         expect(formatCurrency(NaN)).toBe('AED 0.00')
          |                                     ^
      303 |         expect(formatCurrency(Infinity)).toBe('AED 0.00')
      304 |       })
      305 |     })

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:302:37)

  ● useInvoiceBuckets hooks › Utility Functions › getBucketColorClasses › should return correct classes for each color

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 3

      Object {
    +   "badge": "bg-red-100 text-red-800",
        "bg": "bg-red-50",
    -   "border": "border-red-200",
    -   "text": "text-red-700",
    +   "border": "border-l-red-500",
    +   "text": "text-red-800",
      }

      307 |     describe('getBucketColorClasses', () => {
      308 |       it('should return correct classes for each color', () => {
    > 309 |         expect(getBucketColorClasses('red')).toEqual({
          |                                              ^
      310 |           border: 'border-red-200',
      311 |           bg: 'bg-red-50',
      312 |           text: 'text-red-700'

      at Object.toEqual (src/hooks/__tests__/use-invoice-buckets.test.ts:309:46)

  ● useInvoiceBuckets hooks › Utility Functions › getBucketColorClasses › should default to gray for unknown colors

    expect(received).toEqual(expected) // deep equality

    - Expected  - 3
    + Received  + 4

      Object {
    -   "bg": "bg-gray-50",
    -   "border": "border-gray-200",
    -   "text": "text-gray-700",
    +   "badge": "bg-green-100 text-green-800",
    +   "bg": "bg-green-50",
    +   "border": "border-l-green-500",
    +   "text": "text-green-800",
      }

      345 |
      346 |       it('should default to gray for unknown colors', () => {
    > 347 |         expect(getBucketColorClasses('purple')).toEqual({
          |                                                 ^
      348 |           border: 'border-gray-200',
      349 |           bg: 'bg-gray-50',
      350 |           text: 'text-gray-700'

      at Object.toEqual (src/hooks/__tests__/use-invoice-buckets.test.ts:347:49)

  ● useInvoiceBuckets hooks › Utility Functions › getPriorityVariant › should default to secondary for unknown priorities

    expect(received).toBe(expected) // Object.is equality

    Expected: "secondary"
    Received: "default"

      362 |
      363 |       it('should default to secondary for unknown priorities', () => {
    > 364 |         expect(getPriorityVariant('unknown')).toBe('secondary')
          |                                               ^
      365 |       })
      366 |     })
      367 |   })

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:364:47)

  ● useInvoiceBuckets hooks › Type Safety › should maintain proper TypeScript interfaces

    expect(received).toBe(expected) // Object.is equality

    Expected: "high"
    Received: undefined

      410 |
      411 |       // TypeScript should enforce the correct structure
    > 412 |       expect(result.current.data?.buckets[0].priority).toBe('high')
          |                                                        ^
      413 |       expect(result.current.data?.buckets[0].color).toBe('red')
      414 |       expect(result.current.data?.summary.totalInvoices).toBe(1)
      415 |     })

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:412:56)

  ● useInvoiceBuckets hooks › Error Recovery › should recover from temporary network failures

    expect(received).toBe(expected) // Object.is equality

    Expected: "Failed to fetch bucket data"
    Received: null

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

      425 |       await waitFor(() => {
      426 |         expect(result.current.isLoading).toBe(false)
    > 427 |         expect(result.current.error).toBe('Failed to fetch bucket data')
          |                                      ^
      428 |       })
      429 |
      430 |       // Second call succeeds

      at toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:427:38)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

FAIL src/app/api/invoices/buckets/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      10 |   count: number
      11 |   totalAmount: number
    > 12 |   color: string
         |                ^
      13 |   priority: 'low' | 'medium' | 'high' | 'critical'
      14 |   hasUrgentCustomers: boolean
      15 |   hasAutoRemindersEnabled: boolean

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (node_modules/next-auth/index.js:25:37)
      at Object.<anonymous> (src/app/api/invoices/buckets/route.ts:12:19)
      at Object.<anonymous> (src/app/api/invoices/buckets/__tests__/route.test.ts:16:16)

FAIL src/app/[locale]/auth/signin/__tests__/page.test.tsx
  ● SignInPage › Edge Cases › should trim whitespace from inputs

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      "credentials",
      Object {
    -   "email": "  john@example.com  ",
    +   "email": "john@example.com",
        "password": "  password123  ",
        "redirect": false,
      },

    Number of calls: 1

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm w-full max-w-md"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 space-y-1"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"font-semibold text-2xl text-center"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [0mReminder[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm text-center"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mSign in to your account[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"space-y-4"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"space-y-2"[39m
                  [36m>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"email"[39m
                    [36m>[39m
                      [0mEmail[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mautocomplete[39m=[32m"email"[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"email"[39m
                      [33mname[39m=[32m"email"[39m
                      [33mplaceholder[39m=[32m"Enter your email"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"email"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"space-y-2"[39m
                  [36m>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"password"[39m
                    [36m>[39m
                      [0mPassword[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mautocomplete[39m=[32m"current-password"[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"password"[39m
                      [33mname[39m=[32m"password"[39m
                      [33mplaceholder[39m=[32m"Enter your password"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"password"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-accent text-accent-foreground shadow-sm hover:bg-accent/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 font-semibold h-12 rounded-lg px-8 has-[>svg]:px-6 text-base w-full"[39m
                    [33mdata-slot[39m=[32m"button"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSign In[0m
                  [36m</button>[39m
                [36m</form>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mt-4 text-center text-sm"[39m
                [36m>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-blue-600 hover:underline"[39m
                    [33mhref[39m=[32m"/auth/forgot-password"[39m
                  [36m>[39m
                    [0mForgot your password?[0m
                  [36m</a>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mt-4 text-center text-sm"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mDon't have an account? [0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-blue-600 hover:underline"[39m
                    [33mhref[39m=[32m"/auth/signup"[39m
                  [36m>[39m
                    [0mSign up here[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      341 |
      342 |       await waitFor(() => {
    > 343 |         expect(signIn).toHaveBeenCalledWith('credentials', {
          |                        ^
      344 |           email: '  john@example.com  ', // FormData preserves whitespace, but could be trimmed in component
      345 |           password: '  password123  ',
      346 |           redirect: false,

      at toHaveBeenCalledWith (src/app/[locale]/auth/signin/__tests__/page.test.tsx:343:24)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

FAIL src/components/invoices/__tests__/bucket-card.test.tsx
  ● BucketCard › should handle card click and expansion

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/1-3 Days Overdue/i`

    Here are the accessible roles:

      heading:

      Name "1-3 Days Overdue":
      [36m<h3[39m
        [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      138 |     )
      139 |
    > 140 |     const card = screen.getByRole('button', { name: /1-3 Days Overdue/i }) ||
          |                         ^
      141 |                  screen.getByText('1-3 Days Overdue').closest('div')
      142 |
      143 |     fireEvent.click(card!)

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/invoices/__tests__/bucket-card.test.tsx:140:25)

  ● BucketCard › should show sample invoices when expanded

    TestingLibraryElementError: Unable to find an element with the text: Recent Invoices:. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md ring-2 ring-blue-500 shadow-lg border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      156 |     )
      157 |
    > 158 |     expect(screen.getByText('Recent Invoices:')).toBeInTheDocument()
          |                   ^
      159 |     expect(screen.getByText('ABC Trading LLC')).toBeInTheDocument()
      160 |     expect(screen.getByText('INV-001')).toBeInTheDocument()
      161 |     expect(screen.getByText('XYZ Corporation')).toBeInTheDocument()

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/bucket-card.test.tsx:158:19)

  ● BucketCard › should show quick action buttons when expanded and actions are available

    TestingLibraryElementError: Unable to find an element with the text: Send (3). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md ring-2 ring-blue-500 shadow-lg border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      175 |     )
      176 |
    > 177 |     const sendButton = screen.getByText('Send (3)')
          |                               ^
      178 |     const reviewButton = screen.getByText('Review (2)')
      179 |
      180 |     expect(sendButton).toBeInTheDocument()

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/bucket-card.test.tsx:177:31)

  ● BucketCard › should prevent event bubbling on quick action clicks

    TestingLibraryElementError: Unable to find an element with the text: Send (3). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md ring-2 ring-blue-500 shadow-lg border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      198 |     )
      199 |
    > 200 |     const sendButton = screen.getByText('Send (3)')
          |                               ^
      201 |
      202 |     fireEvent.click(sendButton)
      203 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/bucket-card.test.tsx:200:31)

  ● BucketCard › should show overflow indicator when there are more than 3 sample invoices

    TestingLibraryElementError: Unable to find an element with the text: +7 more invoices. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md ring-2 ring-blue-500 shadow-lg border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m10[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      264 |     )
      265 |
    > 266 |     expect(screen.getByText('+7 more invoices')).toBeInTheDocument()
          |                   ^
      267 |   })
      268 |
      269 |   it('should handle different priority levels correctly', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/bucket-card.test.tsx:266:19)

  ● BucketCard › should handle accessibility requirements

    TestingLibraryElementError: Unable to find an accessible element with the role "button"

    Here are the accessible roles:

      heading:

      Name "1-3 Days Overdue":
      [36m<h3[39m
        [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      330 |
      331 |     // Check for proper ARIA labels and roles
    > 332 |     const card = screen.getByRole('button') || screen.getByText('1-3 Days Overdue').closest('[role]')
          |                         ^
      333 |     expect(card).toBeInTheDocument()
      334 |
      335 |     // Check that action buttons are properly labeled

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/invoices/__tests__/bucket-card.test.tsx:332:25)

FAIL src/__tests__/e2e/bucket-invoice-management-e2e.test.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      151 | }
      152 |
    > 153 | test.describe('Bucket-Based Invoice Management E2E Tests', () => {
          |      ^
      154 |   test.beforeEach(async ({ page }) => {
      155 |     await setupTestData(page)
      156 |     await loginUser(page)

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.describe (src/__tests__/e2e/bucket-invoice-management-e2e.test.ts:153:6)

PASS tests/critical-flows/prisma-field-validation.test.ts
FAIL src/app/api/invoices/[id]/status/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/[id]/status/route.ts:21:20)
      at Object.require (src/app/api/invoices/[id]/status/__tests__/route.test.ts:8:19)

FAIL src/app/api/email/templates/[id]/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/email/templates/[id]/route.ts:24:20)
      at Object.<anonymous> (src/app/api/email/templates/[id]/__tests__/route.test.ts:9:16)

FAIL src/app/api/invoices/bulk/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/bulk/route.ts:21:20)
      at Object.require (src/app/api/invoices/bulk/__tests__/route.test.ts:8:23)

FAIL src/app/api/invoices/[id]/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/[id]/route.ts:24:20)
      at Object.require (src/app/api/invoices/[id]/__tests__/route.test.ts:8:30)

FAIL src/app/api/email/templates/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/email/templates/route.ts:21:20)
      at Object.<anonymous> (src/app/api/email/templates/__tests__/route.test.ts:9:16)

FAIL src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx (5.493 s)
  ● Console

    console.error
      Encountered two children with the same key, `step-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.

      693 |       // Should not throw error
      694 |       expect(() => {
    > 695 |         render(<SequenceBuilder {...propsWithCorruptedData} />)
          |               ^
      696 |       }).not.toThrow()
      697 |     })
      698 |

      at node_modules/react-dom/cjs/react-dom-client.development.js:7563:23
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at warnOnInvalidKey (node_modules/react-dom/cjs/react-dom-client.development.js:7562:13)
      at reconcileChildrenArray (node_modules/react-dom/cjs/react-dom-client.development.js:7631:31)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7952:30)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10870:13)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16231:7)
      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)
      at flushSpawnedWork (node_modules/react-dom/cjs/react-dom-client.development.js:15677:9)
      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15403:9)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:695:15
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:696:14)

  ● Drag & Drop Functionality › Step Order Updates › shows step numbers correctly

    TestingLibraryElementError: Found multiple elements with the text: 2

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m2[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m2[0m
    [36m</span>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m2[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r6g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      425 |       // Should show step numbers 1, 2, 3, 4
      426 |       expect(screen.getByText('1')).toBeInTheDocument() // Step order number
    > 427 |       expect(screen.getByText('2')).toBeInTheDocument()
          |                     ^
      428 |       expect(screen.getByText('3')).toBeInTheDocument()
      429 |       expect(screen.getByText('4')).toBeInTheDocument()
      430 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:427:21)

  ● Drag & Drop Functionality › Performance with Large Lists › handles sequences with many steps efficiently

    expect(received).toBeLessThan(expected)

    Expected: < 100
    Received:   213.3144170000005

      479 |
      480 |       // Should render within reasonable time (< 100ms for 20 items)
    > 481 |       expect(endTime - startTime).toBeLessThan(100)
          |                                   ^
      482 |
      483 |       // Should render all drag handles
      484 |       for (let i = 1; i <= 20; i++) {

      at Object.toBeLessThan (src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:481:35)

  ● Drag & Drop Functionality › Performance with Large Lists › maintains responsive UI during drag operations

    TestingLibraryElementError: Unable to find an element with the text: Save Sequence. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r90»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      525 |
      526 |       // UI should remain responsive - all controls should be accessible
    > 527 |       expect(screen.getByText('Save Sequence')).toBeInTheDocument()
          |                     ^
      528 |       expect(screen.getByText('Cancel')).toBeInTheDocument()
      529 |       expect(screen.getByLabelText('Sequence Name *')).toBeInTheDocument()
      530 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:527:21)

  ● Drag & Drop Functionality › Integration with Sequence Features › updates sequence duration calculation after reordering

    TestingLibraryElementError: Found multiple elements with the text: /6\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m6.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m6.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rfk»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      760 |       // Should show duration calculation
      761 |       // With 2 WAIT steps of 3 days each = 6 days total
    > 762 |       expect(screen.getByText(/6\.0 days/)).toBeInTheDocument()
          |                     ^
      763 |     })
      764 |
      765 |     it('maintains step validation after reordering', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:762:21)

  ● Drag & Drop Functionality › Integration with Sequence Features › integrates with step editing after reordering

    TestingLibraryElementError: Unable to find a label with the text of: /edit/i

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rgk»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      786 |
      787 |       // Should still be able to edit steps after reordering
    > 788 |       const editButtons = screen.getAllByLabelText(/edit/i)
          |                                  ^
      789 |       
      790 |       if (editButtons.length > 0) {
      791 |         await user.click(editButtons[0])

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:111:38)
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByLabelText (src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:788:34)

FAIL src/app/[locale]/dashboard/analytics/__tests__/page.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../../components/analytics/__tests__/test-utils' from 'src/app/[locale]/dashboard/analytics/__tests__/page.test.tsx'

      12 |   mockDashboardMetrics,
      13 |   mockPerformanceData,
    > 14 |   mockEmailMetrics,
         |                    ^
      15 |   mockAnalyticsApi,
      16 |   mockCompany,
      17 |   mockUser,

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (src/app/[locale]/dashboard/analytics/__tests__/page.test.tsx:14:20)

FAIL src/app/api/users/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/users/route.ts:26:20)
      at Object.<anonymous> (src/app/api/users/__tests__/route.test.ts:8:16)

FAIL src/app/api/payments/__tests__/payment-api.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/payments/route.ts:32:20)
      at Object.<anonymous> (src/app/api/payments/__tests__/payment-api.test.ts:9:16)

PASS src/app/[locale]/auth/signup/__tests__/page.test.tsx
FAIL src/lib/services/__tests__/email-scheduling-service.test.ts
  ● Test suite failed to run

    Cannot find module '../email-service' from 'src/lib/services/__tests__/email-scheduling-service.test.ts'

      54 | }))
      55 |
    > 56 | jest.mock('../email-service', () => ({
         |      ^
      57 |   getDefaultEmailService: jest.fn(() => ({
      58 |     sendEmail: jest.fn()
      59 |   }))

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (src/lib/services/__tests__/email-scheduling-service.test.ts:56:6)

FAIL src/lib/services/__tests__/invoice-status-service.test.ts
  ● Test suite failed to run

      [31mx[0m Expression expected
         ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/src/lib/services/__tests__/invoice-status-service.test.ts[0m:536:1]
     [2m533[0m |       expect(formatUAECurrency).toBeDefined()
     [2m534[0m |     })
     [2m535[0m |   })
     [2m536[0m | })
         : [35;1m^[0m
         `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL src/lib/services/__tests__/customer-consolidation-service.test.ts
  ● Test suite failed to run

    ReferenceError: Cannot access 'mockPrisma' before initialization

      43 | // Mock the prisma import
      44 | jest.mock('../../prisma', () => ({
    > 45 |   prisma: mockPrisma
         |           ^
      46 | }))
      47 |
      48 | describe('CustomerConsolidationService', () => {

      at mockPrisma (src/lib/services/__tests__/customer-consolidation-service.test.ts:45:11)
      at Object.<anonymous> (src/lib/services/customer-consolidation-service.ts:23:17)
      at Object.<anonymous> (src/lib/services/__tests__/customer-consolidation-service.test.ts:12:39)

FAIL src/components/follow-ups/__tests__/uae-calendar-integration.test.ts
  ● UAE Calendar Integration › Prayer Time Avoidance › avoids sending communications during Isha prayer (night)

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      210 |       
      211 |       // 8 PM should be outside business hours anyway
    > 212 |       expect(nightPrayerValidation.withinHours).toBe(false)
          |                                                 ^
      213 |       if (nightPrayerValidation.reason) {
      214 |         expect(nightPrayerValidation.reason).toContain('outside UAE business hours')
      215 |       }

      at Object.toBe (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:212:49)

  ● UAE Calendar Integration › Ramadan Special Hours Handling › validates Ramadan template cultural appropriateness

    expect(received).toBeGreaterThan(expected)

    Expected: > 80
    Received:   80

      266 |       
      267 |       expect(englishValidation.appropriate).toBe(true)
    > 268 |       expect(englishValidation.score).toBeGreaterThan(80)
          |                                       ^
      269 |       expect(englishValidation.recommendations.length).toBeLessThan(2)
      270 |     })
      271 |

      at Object.toBeGreaterThan (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:268:39)

  ● UAE Calendar Integration › Calendar Integration Edge Cases › handles invalid date inputs gracefully

    expect(received).not.toThrow()

    Error name:    "RangeError"
    Error message: "Invalid time zone specified: Invalid/Timezone"

          211 |   } => {
          212 |     const now = new Date()
        > 213 |     const dubaiTime = new Intl.DateTimeFormat('en-CA', {
              |                       ^
          214 |       timeZone: timezone,
          215 |       hour12: false,
          216 |       hour: '2-digit',

      at Object.validateBusinessHours (src/lib/uae-test-utils.ts:213:23)
      at validateBusinessHours (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:508:33)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:509:14)
      at Object.toThrow (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:509:14)

  ● UAE Calendar Integration › Calendar Integration Edge Cases › provides fallback behavior for system clock issues

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "System clock unavailable"

          519 |           constructor(...args: any[]) {
          520 |             if (args.length === 0) {
        > 521 |               throw new Error('System clock unavailable')
              |                     ^
          522 |             }
          523 |             super(...args)
          524 |           }

      at new global.Date (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:521:21)
      at Object.validateBusinessHours (src/lib/uae-test-utils.ts:212:17)
      at validateBusinessHours (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:529:35)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:530:16)
      at Object.toThrow (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:530:16)

FAIL src/components/follow-ups/__tests__/cultural-compliance.test.ts
  ● Cultural Compliance Features › Cultural Appropriateness Scoring › scores appropriate English business content highly

    expect(received).toBeGreaterThan(expected)

    Expected: > 85
    Received:   80

      140 |       
      141 |       expect(validation.appropriate).toBe(true)
    > 142 |       expect(validation.score).toBeGreaterThan(85)
          |                                ^
      143 |       expect(validation.recommendations.length).toBeLessThan(2)
      144 |     })
      145 |

      at Object.toBeGreaterThan (src/components/follow-ups/__tests__/cultural-compliance.test.ts:142:32)

  ● Cultural Compliance Features › Arabic/English Template Integration › validates template variable consistency across languages

    expect(received).toContain(expected) // indexOf

    Expected substring: "{{customer_name}}"
    Received string:    "عزيزي {{customer_name_ar}}،·
    السلام عليكم وتحياتنا من {{company_name}}.·
    نأمل أن يصلك هذا البريد خلال ساعات العمل في الإمارات (الأحد - الخميس، 9:00 ص - 6:00 م).·
    تفاصيل الفاتورة:
    - الرقم: {{invoice_number}}
    - المبلغ: {{invoice_amount}} درهم
    - تاريخ الاستحقاق: {{due_date}}·
    يرجى الاتصال بنا خلال ساعات العمل للحصول على أي مساعدة:
    📧 {{support_email}}
    📞 {{contact_phone}}·
    أطيب التحيات،
    {{company_name}}
    الرقم الضريبي: {{company_trn}}"

      326 |       // Should have common variables like customer_name, invoice_number, etc.
      327 |       expect(template.contentEn).toContain('{{customer_name}}')
    > 328 |       expect(template.contentAr).toContain('{{customer_name}}')
          |                                  ^
      329 |     })
      330 |
      331 |     it('supports language-specific formatting', () => {

      at Object.toContain (src/components/follow-ups/__tests__/cultural-compliance.test.ts:328:34)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates proper Islamic greetings

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      353 |       )
      354 |       
    > 355 |       expect(englishValidation.appropriate).toBe(true)
          |                                             ^
      356 |       expect(englishValidation.score).toBeGreaterThan(85)
      357 |     })
      358 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:355:45)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates respectful titles and forms of address

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      371 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(respectfulContent, 'en')
      372 |       
    > 373 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      374 |       expect(validation.score).toBeGreaterThan(90)
      375 |       expect(validation.recommendations.length).toBeLessThan(2)
      376 |     })

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:373:38)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates appropriate closing formulas

    expect(received).toBeGreaterThan(expected)

    Expected: > 70
    Received:   65

      389 |         const validation = culturalComplianceUtils.validateBusinessEtiquette(content, 'en')
      390 |         
    > 391 |         expect(validation.score).toBeGreaterThan(70)
          |                                  ^
      392 |       })
      393 |     })
      394 |

      at toBeGreaterThan (src/components/follow-ups/__tests__/cultural-compliance.test.ts:391:34)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/components/follow-ups/__tests__/cultural-compliance.test.ts:387:22)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates patience and understanding in communication

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      413 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(patientContent, 'en')
      414 |       
    > 415 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      416 |       expect(validation.score).toBeGreaterThan(85)
      417 |     })
      418 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:415:38)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates cultural sensitivity during Ramadan

    expect(received).toBeGreaterThan(expected)

    Expected: > 85
    Received:   80

      425 |       
      426 |       expect(validation.appropriate).toBe(true)
    > 427 |       expect(validation.score).toBeGreaterThan(85)
          |                                ^
      428 |       expect(ramadanTemplate.contentEn).toContain('Ramadan Kareem')
      429 |       expect(ramadanTemplate.contentEn).toContain('blessed month')
      430 |     })

      at Object.toBeGreaterThan (src/components/follow-ups/__tests__/cultural-compliance.test.ts:427:32)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates family and community respect

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      443 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(familyRespectContent, 'en')
      444 |       
    > 445 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      446 |       expect(validation.score).toBeGreaterThan(90)
      447 |     })
      448 |   })

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:445:38)

  ● Cultural Compliance Features › Tone Progression Validation › ensures progression maintains respect

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      522 |       )
      523 |       
    > 524 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      525 |       expect(validation.score).toBeGreaterThan(75)
      526 |     })
      527 |   })

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:524:38)

  ● Cultural Compliance Features › Template Validation Edge Cases › validates templates with excessive length

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      570 |       const validation = templateValidationUtils.validateUAETemplate(longTemplate)
      571 |       
    > 572 |       expect(validation.valid).toBe(true) // Should handle long content
          |                                ^
      573 |       expect(validation.score).toBeGreaterThan(70)
      574 |     })
      575 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:572:32)

  ● Cultural Compliance Features › Template Validation Edge Cases › handles templates with special characters and emojis

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      582 |       const validation = templateValidationUtils.validateUAETemplate(emojiTemplate)
      583 |       
    > 584 |       expect(validation.valid).toBe(true) // Should handle emojis appropriately
          |                                ^
      585 |       expect(validation.score).toBeGreaterThan(70)
      586 |     })
      587 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:584:32)

  ● Cultural Compliance Features › Template Validation Edge Cases › validates templates with mixed script content

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      596 |       const validation = templateValidationUtils.validateUAETemplate(mixedScriptTemplate)
      597 |       
    > 598 |       expect(validation.valid).toBe(true) // Mixed script is acceptable in UAE
          |                                ^
      599 |       expect(validation.score).toBeGreaterThan(60)
      600 |     })
      601 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:598:32)

  ● Cultural Compliance Features › Cultural Context Integration › validates Eid holiday greetings

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      624 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(eidTemplate.contentEn, 'en')
      625 |       
    > 626 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      627 |       expect(validation.score).toBeGreaterThan(85)
      628 |     })
      629 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:626:38)

  ● Cultural Compliance Features › Cultural Context Integration › validates business communication during Islamic months

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      636 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(islamicMonthTemplate.contentEn, 'en')
      637 |       
    > 638 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      639 |       expect(validation.score).toBeGreaterThan(80)
      640 |     })
      641 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:638:38)

  ● Cultural Compliance Features › Cultural Context Integration › validates respect for UAE National Day

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      649 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(nationalDayTemplate.contentEn, 'en')
      650 |       
    > 651 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      652 |       expect(validation.score).toBeGreaterThan(85)
      653 |     })
      654 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:651:38)

  ● Cultural Compliance Features › Cultural Context Integration › ensures multi-emirate cultural sensitivity

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      662 |         
      663 |         const validation = templateValidationUtils.validateUAETemplate(emirateTemplate)
    > 664 |         expect(validation.valid).toBe(true)
          |                                  ^
      665 |         expect(validation.score).toBeGreaterThan(80)
      666 |       })
      667 |     })

      at toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:664:34)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/components/follow-ups/__tests__/cultural-compliance.test.ts:656:30)

FAIL src/components/follow-ups/__tests__/automation-dashboard.test.tsx
  ● Test suite failed to run

    Cannot find module 'vitest' from 'src/components/follow-ups/__tests__/automation-dashboard.test.tsx'

      19 | vi.mock('../manual-override-controls', () => ({
      20 |   ManualOverrideControls: ({ onBulkAction }: any) => (
    > 21 |     <div data-testid="manual-override-controls">
         |                 ^
      22 |       <button onClick={() => onBulkAction('PAUSE', ['seq1'])}>
      23 |         Pause
      24 |       </button>

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (src/components/follow-ups/__tests__/automation-dashboard.test.tsx:21:17)

FAIL src/components/email-templates/__tests__/template-library.test.tsx
  ● TemplateLibrary Component › Basic Rendering › renders template library correctly

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:24:26)

  ● TemplateLibrary Component › Basic Rendering › displays search and filter controls

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:41:26)

  ● TemplateLibrary Component › Basic Rendering › shows UAE template categories

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:53:26)

  ● TemplateLibrary Component › Template Categories › displays category icons and descriptions

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:71:26)

  ● TemplateLibrary Component › Template Categories › shows template counts for each category

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:90:26)

  ● TemplateLibrary Component › Template Categories › displays templates within categories

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:103:26)

  ● TemplateLibrary Component › Template Details › shows template statistics

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:120:26)

  ● TemplateLibrary Component › Template Details › displays effectiveness progress bars

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:138:26)

  ● TemplateLibrary Component › Template Details › shows template tags

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:150:26)

  ● TemplateLibrary Component › Template Details › indicates bilingual support

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:164:26)

  ● TemplateLibrary Component › Search and Filtering › filters templates by search query

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:179:26)

  ● TemplateLibrary Component › Search and Filtering › filters templates by category

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:195:26)

  ● TemplateLibrary Component › Search and Filtering › searches in Arabic content

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:214:26)

  ● TemplateLibrary Component › Search and Filtering › shows no results state when search yields nothing

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:229:26)

  ● TemplateLibrary Component › Search and Filtering › clears filters when clear button is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:245:26)

  ● TemplateLibrary Component › Template Actions › shows preview button for each template

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:267:26)

  ● TemplateLibrary Component › Template Actions › shows use template button for each template

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:280:26)

  ● TemplateLibrary Component › Template Actions › shows select button when onSelectTemplate is provided

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:293:26)

  ● TemplateLibrary Component › Template Actions › calls onImportTemplate when use template is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:308:26)

  ● TemplateLibrary Component › Template Actions › calls onSelectTemplate when select button is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:330:26)

  ● TemplateLibrary Component › Template Preview › opens preview dialog when preview button is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:351:26)

  ● TemplateLibrary Component › Template Preview › shows preview tabs for different content types

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:366:26)

  ● TemplateLibrary Component › Template Preview › switches between preview tabs

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:382:26)

  ● TemplateLibrary Component › Template Preview › shows preview note about variable replacement

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:401:26)

  ● TemplateLibrary Component › Template Preview › allows importing template from preview dialog

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:417:26)

  ● TemplateLibrary Component › Template Preview › closes preview dialog when close button is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:435:26)

  ● TemplateLibrary Component › Localization › displays Arabic names when locale is Arabic

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:454:26)

  ● TemplateLibrary Component › Localization › shows Arabic template names in Arabic locale

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:468:26)

  ● TemplateLibrary Component › UAE Business Features › shows UAE-specific template content

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:498:26)

  ● TemplateLibrary Component › UAE Business Features › includes UAE business variables in templates

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:511:26)

  ● TemplateLibrary Component › UAE Business Features › shows effectiveness ratings for UAE market

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:530:26)

  ● TemplateLibrary Component › Error Handling › handles import errors gracefully

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:552:26)

  ● TemplateLibrary Component › Error Handling › shows loading state during import

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:573:26)

  ● TemplateLibrary Component › Accessibility › has proper ARIA labels and roles

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:591:26)

  ● TemplateLibrary Component › Accessibility › supports keyboard navigation

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:604:26)

  ● TemplateLibrary Component › Performance › renders large number of templates efficiently

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:624:26)

FAIL src/components/email-templates/__tests__/template-builder.test.tsx
  ● TemplateBuilder Component › Basic Rendering › renders create template form correctly

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:27:26)

  ● TemplateBuilder Component › Basic Rendering › renders edit template form when templateId is provided

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:45:26)

  ● TemplateBuilder Component › Basic Rendering › displays all required tabs

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:61:26)

  ● TemplateBuilder Component › Basic Information Tab › validates required fields

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:79:26)

  ● TemplateBuilder Component › Basic Information Tab › populates template content when category is selected

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:97:26)

  ● TemplateBuilder Component › Basic Information Tab › shows UAE business context alert

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:117:26)

  ● TemplateBuilder Component › Basic Information Tab › displays quick template options

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:131:26)

  ● TemplateBuilder Component › Basic Information Tab › applies quick template when clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:146:26)

  ● TemplateBuilder Component › Content Tab › shows language selector

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:169:26)

  ● TemplateBuilder Component › Content Tab › switches between English and Arabic content

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:169:26)

  ● TemplateBuilder Component › Content Tab › validates bilingual content requirements

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:169:26)

  ● TemplateBuilder Component › Content Tab › shows proper font family for Arabic content

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:169:26)

  ● TemplateBuilder Component › Variable Insertion › displays template variables sidebar

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:232:26)

  ● TemplateBuilder Component › Variable Insertion › shows UAE-specific variables

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:232:26)

  ● TemplateBuilder Component › Variable Insertion › inserts variables when clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:232:26)

  ● TemplateBuilder Component › Variable Insertion › shows variable descriptions in current locale

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:232:26)

  ● TemplateBuilder Component › Settings Tab › shows UAE-specific settings

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:281:26)

  ● TemplateBuilder Component › Settings Tab › defaults to UAE timezone

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:281:26)

  ● TemplateBuilder Component › Settings Tab › shows UAE business hours information

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:281:26)

  ● TemplateBuilder Component › Settings Tab › allows priority selection

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:281:26)

  ● TemplateBuilder Component › Settings Tab › has business hours only enabled by default

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:281:26)

  ● TemplateBuilder Component › Advanced Tab › allows adding and removing tags

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:323:26)

  ● TemplateBuilder Component › Advanced Tab › shows active template toggle

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:323:26)

  ● TemplateBuilder Component › Advanced Tab › allows entering tags with Enter key

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:323:26)

  ● TemplateBuilder Component › Form Submission › submits valid template data

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:369:26)

  ● TemplateBuilder Component › Form Submission › shows loading state during submission

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:411:26)

  ● TemplateBuilder Component › Form Submission › calls onCancel when cancel button is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:440:26)

  ● TemplateBuilder Component › UAE Cultural Compliance › validates cultural appropriateness of content

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:458:26)

  ● TemplateBuilder Component › UAE Cultural Compliance › requires TRN reference in templates

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:478:26)

  ● TemplateBuilder Component › Arabic Language Support › renders Arabic interface correctly when locale is ar

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:514:26)

  ● TemplateBuilder Component › Arabic Language Support › validates Arabic text input

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:529:26)

  ● TemplateBuilder Component › Preview Functionality › shows preview button

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:550:26)

  ● TemplateBuilder Component › Preview Functionality › toggles preview visibility

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:563:26)

  ● TemplateBuilder Component › Error Handling › handles submission errors gracefully

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:585:26)

PASS src/lib/__tests__/database-integration.test.ts
FAIL src/components/analytics/__tests__/test-utils.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1056:18)
      at node_modules/@jest/core/build/index.js:1126:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/components/analytics/__tests__/sequence-performance.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../lib/api/analytics' from 'src/components/analytics/__tests__/sequence-performance.test.tsx'

      25 | jest.mock('recharts', () => mockRechartsComponents)
      26 |
    > 27 | jest.mock('../../../lib/api/analytics', () => ({
         |      ^
      28 |   analyticsApi: mockAnalyticsApi
      29 | }))
      30 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (src/components/analytics/__tests__/sequence-performance.test.tsx:27:6)

FAIL src/lib/__tests__/uae-cultural-compliance.test.ts
  ● UAE Cultural Compliance System › UAE Constants Validation › validates UAE phone number formats

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      39 |       
      40 |       expect(UAE_CONSTANTS.phoneFormats.mobile.test(validMobile)).toBe(true)
    > 41 |       expect(UAE_CONSTANTS.phoneFormats.landline.test(validLandline)).toBe(true)
         |                                                                       ^
      42 |       expect(UAE_CONSTANTS.phoneFormats.mobile.test(invalidPhone)).toBe(false)
      43 |     })
      44 |

      at Object.toBe (src/lib/__tests__/uae-cultural-compliance.test.ts:41:71)

  ● UAE Cultural Compliance System › Cultural Compliance Validation › validates appropriate English business etiquette

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  ["Use formal greetings like \"Dear\" or \"Respected\""]

      113 |       expect(validation.appropriate).toBe(true)
      114 |       expect(validation.score).toBeGreaterThan(70)
    > 115 |       expect(validation.recommendations).toHaveLength(0)
          |                                          ^
      116 |     })
      117 |
      118 |     it('flags inappropriate English content', () => {

      at Object.toHaveLength (src/lib/__tests__/uae-cultural-compliance.test.ts:115:42)

  ● UAE Cultural Compliance System › Cultural Compliance Validation › validates UAE business hours compliance

    expect(received).toHaveProperty(path)

    Expected path: "reason"
    Received path: []

    Received value: {"withinHours": true}

      159 |       const fridayTest = culturalComplianceUtils.validateBusinessHours('10:00', 'Asia/Dubai')
      160 |       expect(fridayTest).toHaveProperty('withinHours')
    > 161 |       expect(fridayTest).toHaveProperty('reason')
          |                          ^
      162 |     })
      163 |   })
      164 |

      at Object.toHaveProperty (src/lib/__tests__/uae-cultural-compliance.test.ts:161:26)

  ● UAE Cultural Compliance System › Ramadan and Cultural Sensitivity › respects Islamic business practices

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      265 |       
      266 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(islamicTemplate.contentEn, 'en')
    > 267 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      268 |       expect(validation.score).toBeGreaterThan(85)
      269 |     })
      270 |   })

      at Object.toBe (src/lib/__tests__/uae-cultural-compliance.test.ts:267:38)

  ● UAE Cultural Compliance System › Multi-Emirates Support › supports different emirate variations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      280 |         
      281 |         const validation = templateValidationUtils.validateUAETemplate(emirateTemplate)
    > 282 |         expect(validation.valid).toBe(true)
          |                                  ^
      283 |       })
      284 |     })
      285 |   })

      at toBe (src/lib/__tests__/uae-cultural-compliance.test.ts:282:34)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/lib/__tests__/uae-cultural-compliance.test.ts:274:30)

  ● UAE Cultural Compliance System › Error Handling and Edge Cases › handles mixed language content

    expect(received).toBeGreaterThan(expected)

    Expected: > 50
    Received:   40

      328 |       const validation = templateValidationUtils.validateUAETemplate(mixedTemplate)
      329 |       // Should still pass basic validation despite mixed content
    > 330 |       expect(validation.score).toBeGreaterThan(50)
          |                                ^
      331 |     })
      332 |
      333 |     it('validates extremely long content', () => {

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance.test.ts:330:32)

  ● UAE Cultural Compliance System › Error Handling and Edge Cases › validates extremely long content

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      339 |       
      340 |       const validation = templateValidationUtils.validateUAETemplate(longTemplate)
    > 341 |       expect(validation.valid).toBe(true) // Should handle large content
          |                                ^
      342 |     })
      343 |
      344 |     it('validates special characters and emojis', () => {

      at Object.toBe (src/lib/__tests__/uae-cultural-compliance.test.ts:341:32)

  ● UAE Cultural Compliance System › Error Handling and Edge Cases › validates special characters and emojis

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      349 |       
      350 |       const validation = templateValidationUtils.validateUAETemplate(emojiTemplate)
    > 351 |       expect(validation.valid).toBe(true) // Should handle emojis appropriately
          |                                ^
      352 |     })
      353 |   })
      354 | })

      at Object.toBe (src/lib/__tests__/uae-cultural-compliance.test.ts:351:32)

FAIL src/components/analytics/__tests__/analytics-dashboard.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../lib/api/analytics' from 'src/components/analytics/__tests__/analytics-dashboard.test.tsx'

      27 | jest.mock('recharts', () => mockRechartsComponents)
      28 |
    > 29 | jest.mock('../../../lib/api/analytics', () => ({
         |      ^
      30 |   analyticsApi: mockAnalyticsApi
      31 | }))
      32 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (src/components/analytics/__tests__/analytics-dashboard.test.tsx:29:6)

FAIL src/tests/payment-integration/stripe-payment-flow.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'src/tests/payment-integration/stripe-payment-flow.test.ts'

       6 | import { describe, it, expect, beforeEach, vi } from 'vitest'
       7 | import { NextRequest } from 'next/server'
    >  8 | import { getServerSession } from 'next-auth'
         |                 ^
       9 | import { prismaMock } from '../setup/prisma-mock'
      10 | import { PaymentMethod } from '@prisma/client'
      11 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (src/tests/payment-integration/stripe-payment-flow.test.ts:8:17)

FAIL src/components/analytics/__tests__/email-analytics.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../lib/api/analytics' from 'src/components/analytics/__tests__/email-analytics.test.tsx'

      27 | jest.mock('recharts', () => mockRechartsComponents)
      28 |
    > 29 | jest.mock('../../../lib/api/analytics', () => ({
         |      ^
      30 |   analyticsApi: mockAnalyticsApi
      31 | }))
      32 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (src/components/analytics/__tests__/email-analytics.test.tsx:29:6)

FAIL src/lib/__tests__/uae-template-sequence-comprehensive.test.ts
  ● UAE Template and Sequence Comprehensive Tests › Template Cultural Validation › Bilingual Template Validation › should validate Arabic content for business appropriateness

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      118 |         const validation = templateValidationUtils.validateUAETemplate(arabicTemplate)
      119 |
    > 120 |         expect(validation.valid).toBe(true)
          |                                  ^
      121 |         expect(validation.score).toBeGreaterThan(70)
      122 |       })
      123 |     })

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:120:34)

  ● UAE Template and Sequence Comprehensive Tests › Template Cultural Validation › Template Variable Validation › should require essential UAE business variables

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      141 |         expect(validation.recommendations.some(rec => 
      142 |           rec.includes('customer_name')
    > 143 |         )).toBe(true)
          |            ^
      144 |       })
      145 |
      146 |       it('should validate TRN variable inclusion for UAE compliance', () => {

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:143:12)

  ● UAE Template and Sequence Comprehensive Tests › Template Cultural Validation › Template Variable Validation › should recognize standard UAE business variables

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      180 |         const validation = templateValidationUtils.validateUAETemplate(templateWithVariables)
      181 |
    > 182 |         expect(validation.valid).toBe(true)
          |                                  ^
      183 |         expect(validation.issues.some(issue => 
      184 |           issue.includes('Missing required variables')
      185 |         )).toBe(false)

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:182:34)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Multi-Step Sequence Progression › should validate a complete 4-step UAE-compliant sequence

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      389 |         )
      390 |
    > 391 |         expect(validation.appropriate).toBe(true)
          |                                        ^
      392 |         expect(validation.issues).toHaveLength(0)
      393 |         expect(validation.suggestions).toHaveLength(0)
      394 |       })

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:391:40)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Multi-Step Sequence Progression › should flag culturally inappropriate sequence progression

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      418 |         )
      419 |
    > 420 |         expect(validation.appropriate).toBe(false)
          |                                        ^
      421 |         expect(validation.issues.length).toBeGreaterThan(2)
      422 |         expect(validation.issues.some(issue => 
      423 |           issue.includes('too soon')

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:420:40)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Customer Relationship Adaptation › should validate government-appropriate sequence content

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      463 |         )
      464 |
    > 465 |         expect(validation.appropriate).toBe(true)
          |                                        ^
      466 |       })
      467 |
      468 |       it('should validate VIP customer sequence with enhanced courtesy', () => {

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:465:40)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Customer Relationship Adaptation › should validate VIP customer sequence with enhanced courtesy

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      491 |         )
      492 |
    > 493 |         expect(validation.appropriate).toBe(true)
          |                                        ^
      494 |       })
      495 |
      496 |       it('should validate corporate customer sequence with business focus', () => {

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:493:40)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Customer Relationship Adaptation › should validate corporate customer sequence with business focus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      519 |         )
      520 |
    > 521 |         expect(validation.appropriate).toBe(true)
          |                                        ^
      522 |       })
      523 |     })
      524 |

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:521:40)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Cultural Cooldown Periods › should enforce appropriate delays between communications

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      551 |         )
      552 |
    > 553 |         expect(appropriateValidation.appropriate).toBe(true)
          |                                                   ^
      554 |         expect(inappropriateValidation.appropriate).toBe(false)
      555 |         expect(inappropriateValidation.issues.length).toBeGreaterThan(2)
      556 |       })

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:553:51)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Prayer Time and Holiday Integration › should integrate with UAE calendar for sequence scheduling

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      603 |         )
      604 |
    > 605 |         expect(validation.appropriate).toBe(true)
          |                                        ^
      606 |       })
      607 |
      608 |       it('should handle Ramadan sequence adjustments', () => {

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:605:40)

  ● UAE Template and Sequence Comprehensive Tests › Integration Testing › End-to-End Template and Sequence Integration › should validate complete business process from template to sequence

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      937 |           sequence, 'REGULAR'
      938 |         )
    > 939 |         expect(sequenceValidation.appropriate).toBe(true)
          |                                                ^
      940 |
      941 |         // Score the cultural compliance
      942 |         const culturalScore = CulturalComplianceService.calculateCulturalScore(

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:939:48)

FAIL src/__tests__/utils/uae-test-data.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      62 | }
      63 |
    > 64 | // UAE business email generator
         |                ^
      65 | export const generateBusinessEmail = (companyName?: string): string => {
      66 |   const domain = companyName 
      67 |     ? `${companyName.toLowerCase().replace(/\s+/g, '')}.ae`

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.ts:64:16)

FAIL src/__tests__/mocks/email-service-mocks.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1056:18)
      at node_modules/@jest/core/build/index.js:1126:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/__tests__/utils/uae-test-data.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      62 | }
      63 |
    > 64 | // UAE business email generator
         |                ^
      65 | export const generateBusinessEmail = (companyName?: string): string => {
      66 |   const domain = companyName 
      67 |     ? `${companyName.toLowerCase().replace(/\s+/g, '')}.ae`

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.ts:64:16)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.test.ts:8:22)

FAIL src/__tests__/mocks/prisma.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1056:18)
      at node_modules/@jest/core/build/index.js:1126:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/__tests__/integration/import-functionality.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      62 | }
      63 |
    > 64 | // UAE business email generator
         |                ^
      65 | export const generateBusinessEmail = (companyName?: string): string => {
      66 |   const domain = companyName 
      67 |     ? `${companyName.toLowerCase().replace(/\s+/g, '')}.ae`

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.ts:64:16)
      at Object.<anonymous> (src/__tests__/integration/import-functionality.test.ts:11:22)

FAIL src/__tests__/e2e/test-environment-setup.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1056:18)
      at node_modules/@jest/core/build/index.js:1126:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/__tests__/e2e/uae-payment-automation-e2e.test.ts
  ● Test suite failed to run

    TypeError: (0 , _emailservice.getDefaultEmailService) is not a function

      77 |
      78 |   private rateLimits: RateLimitConfig
    > 79 |   private emailService = getDefaultEmailService()
         |                                                ^
      80 |
      81 |   constructor(customRateLimits?: Partial<RateLimitConfig>) {
      82 |     this.rateLimits = { ...this.DEFAULT_RATE_LIMITS, ...customRateLimits }

      at new EmailSchedulingService (src/lib/services/email-scheduling-service.ts:79:48)
      at Object.<anonymous> (src/lib/services/email-scheduling-service.ts:685:39)
      at Object.<anonymous> (src/lib/services/sequence-execution-service.ts:20:33)
      at Object.<anonymous> (src/__tests__/e2e/uae-payment-automation-e2e.test.ts:20:35)

FAIL src/__tests__/e2e/performance-scale-e2e.test.ts
  ● Console

    console.log
      
      📊 Performance Test Results:

      at Object.log (src/__tests__/e2e/performance-scale-e2e.test.ts:123:13)

    console.log
      {}

      at Object.log (src/__tests__/e2e/performance-scale-e2e.test.ts:124:13)

  ● Performance and Scale End-to-End Tests › Single Sequence Performance › should execute single sequence within performance threshold

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Single Sequence Performance › should maintain cultural compliance check performance

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Single Sequence Performance › should schedule emails efficiently

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Bulk Processing Performance › should handle 100 concurrent sequence executions efficiently

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Bulk Processing Performance › should maintain performance with large email queues

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Bulk Processing Performance › should handle cultural compliance validation at scale

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Database Performance Under Load › should handle complex analytics queries efficiently

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Database Performance Under Load › should maintain performance with large result sets

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Concurrent User Simulation › should handle multiple concurrent operations from different companies

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Concurrent User Simulation › should maintain cultural compliance under concurrent load

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Memory and Resource Management › should not have memory leaks during extended operations

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Memory and Resource Management › should handle database connection pooling efficiently

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)


  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      248 | // Setup for each test
      249 | export function setupTestDatabase() {
    > 250 |   beforeEach(() => {
          |   ^
      251 |     const db = initTestDatabase()
      252 |     db.setupDefaultMocks()
      253 |   })

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at beforeEach (src/lib/test-db-setup.ts:250:3)
      at Object.<anonymous> (src/__tests__/e2e/performance-scale-e2e.test.ts:89:28)

  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      253 |   })
      254 |
    > 255 |   afterEach(() => {
          |   ^
      256 |     cleanupTestDatabase()
      257 |   })
      258 |

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at afterEach (src/lib/test-db-setup.ts:255:3)
      at Object.<anonymous> (src/__tests__/e2e/performance-scale-e2e.test.ts:89:28)

FAIL src/__tests__/e2e/invoice-lifecycle-workflow.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      62 | }
      63 |
    > 64 | // UAE business email generator
         |                ^
      65 | export const generateBusinessEmail = (companyName?: string): string => {
      66 |   const domain = companyName 
      67 |     ? `${companyName.toLowerCase().replace(/\s+/g, '')}.ae`

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.ts:64:16)
      at Object.<anonymous> (src/__tests__/e2e/invoice-lifecycle-workflow.test.ts:12:22)

FAIL src/__tests__/e2e/cron-orchestration-e2e.test.ts
  ● Test suite failed to run

      [31mx[0m Expected ';', '}' or <eof>
        ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/src/__tests__/e2e/cron-orchestration-e2e.test.ts[0m:18:1]
     [2m15[0m | import { uaeBusinessHours } from '@/lib/services/uae-business-hours-service'
     [2m16[0m | 
     [2m17[0m | // Mock external dependencies for testing
     [2m18[0m | jest.mock '@/lib/email-service'
        : [35;1m^^^^|^^^^[0m[33;1m ^^^^^^^^^^^^^^^^^^^^^[0m
        :     [35;1m`-- [35;1mThis is the expression part of an expression statement[0m[0m
     [2m19[0m | 
     [2m20[0m | describe('Cron Job Orchestration E2E Tests', () => {
     [2m21[0m |   let testCompanyId: string
        `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL src/__tests__/e2e/cultural-compliance-e2e.test.ts
  ● UAE Cultural Compliance End-to-End Tests › Islamic Greetings and Etiquette Validation › should validate proper Islamic greetings in different contexts

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Islamic Greetings and Etiquette Validation › should validate closing phrases with Islamic context

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Islamic Greetings and Etiquette Validation › should recognize and reward use of Islamic phrases

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Customer Relationship Context Compliance › should enforce very formal tone for government customers

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Customer Relationship Context Compliance › should handle VIP customers with special consideration

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Customer Relationship Context Compliance › should validate tone escalation appropriateness

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Customer Relationship Context Compliance › should flag inappropriate tone escalation

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Ramadan and Islamic Calendar Awareness › should apply Ramadan-specific schedule adjustments

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Ramadan and Islamic Calendar Awareness › should detect and handle Ramadan period appropriately

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Ramadan and Islamic Calendar Awareness › should provide appropriate cultural timing preferences

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Arabic Language and RTL Support › should accurately detect Arabic content and RTL requirements

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Arabic Language and RTL Support › should validate bilingual template content

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Arabic Language and RTL Support › should extract and validate Arabic words correctly

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Business Hours and Prayer Time Integration › should validate scheduling respects prayer times throughout day

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Business Hours and Prayer Time Integration › should validate scheduled times against UAE business culture

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Business Hours and Prayer Time Integration › should provide culturally appropriate subject line suggestions

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Integration with Sequence Execution › should validate cultural compliance during sequence execution

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Integration with Sequence Execution › should handle mixed language sequence execution

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)


  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      248 | // Setup for each test
      249 | export function setupTestDatabase() {
    > 250 |   beforeEach(() => {
          |   ^
      251 |     const db = initTestDatabase()
      252 |     db.setupDefaultMocks()
      253 |   })

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at beforeEach (src/lib/test-db-setup.ts:250:3)
      at Object.<anonymous> (src/__tests__/e2e/cultural-compliance-e2e.test.ts:21:28)

  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      253 |   })
      254 |
    > 255 |   afterEach(() => {
          |   ^
      256 |     cleanupTestDatabase()
      257 |   })
      258 |

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at afterEach (src/lib/test-db-setup.ts:255:3)
      at Object.<anonymous> (src/__tests__/e2e/cultural-compliance-e2e.test.ts:21:28)

FAIL tests/performance/follow-up-automation-load.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      10 | import { faker } from '@faker-js/faker'
      11 |
    > 12 | // Performance test database
         |                ^
      13 | const prisma = new PrismaClient({
      14 |   datasources: {
      15 |     db: {

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (tests/performance/follow-up-automation-load.test.ts:12:16)

FAIL src/__tests__/e2e/analytics-monitoring-e2e.test.ts
  ● Analytics and Monitoring End-to-End Tests › Sequence Analytics Collection and Reporting › should track sequence performance metrics accurately

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Sequence Analytics Collection and Reporting › should provide real-time sequence execution monitoring

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Sequence Analytics Collection and Reporting › should track conversion rates and payment correlations

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Sequence Analytics Collection and Reporting › should provide UAE business hours compliance analytics

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Email Engagement Analytics › should track email delivery and engagement metrics

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Email Engagement Analytics › should analyze engagement patterns by customer type

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Email Engagement Analytics › should track cultural compliance impact on engagement

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Business Intelligence and Reporting › should generate comprehensive UAE business performance reports

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Business Intelligence and Reporting › should provide real-time monitoring dashboard data

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Business Intelligence and Reporting › should track and alert on system health metrics

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Custom Analytics and KPIs › should calculate UAE-specific KPIs and success metrics

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Custom Analytics and KPIs › should provide predictive analytics for sequence optimization

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)


  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      248 | // Setup for each test
      249 | export function setupTestDatabase() {
    > 250 |   beforeEach(() => {
          |   ^
      251 |     const db = initTestDatabase()
      252 |     db.setupDefaultMocks()
      253 |   })

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at beforeEach (src/lib/test-db-setup.ts:250:3)
      at Object.<anonymous> (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:31:28)

  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      253 |   })
      254 |
    > 255 |   afterEach(() => {
          |   ^
      256 |     cleanupTestDatabase()
      257 |   })
      258 |

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at afterEach (src/lib/test-db-setup.ts:255:3)
      at Object.<anonymous> (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:31:28)

FAIL tests/integration/sprint-2-consolidation-integration.test.ts
  ● Test suite failed to run

    Cannot find module '@jest/testing-library/jest-dom' from 'tests/integration/sprint-2-consolidation-integration.test.ts'

       7 | import { describe, it, expect, beforeAll, afterAll, beforeEach, afterEach } from '@jest/testing-library/jest-dom'
       8 | import { consolidatedEmailService } from '@/lib/services/consolidated-email-service'
    >  9 | import { pdfAttachmentService } from '@/lib/services/pdf-attachment-service'
         |                  ^
      10 | import { enhancedEmailSchedulingService } from '@/lib/services/enhanced-email-scheduling-service'
      11 | import { culturalComplianceEnhancedService } from '@/lib/services/cultural-compliance-enhanced-service'
      12 | import { awsSESConsolidationService } from '@/lib/services/aws-ses-consolidation-service'

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/integration/sprint-2-consolidation-integration.test.ts:9:18)

FAIL tests/integration/sprint-1.5-acceptance-criteria.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/route.ts:21:20)
      at Object.<anonymous> (tests/integration/sprint-1.5-acceptance-criteria.test.ts:23:16)

FAIL src/components/follow-ups/__tests__/complex-scenarios.test.tsx (9.393 s)
  ● Console

    console.error
      Invalid value for prop `data-ondragend` on <div> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://react.dev/link/attribute-behavior

      412 |       }
      413 |
    > 414 |       render(<SequenceBuilder {...propsWithSequence} />)
          |             ^
      415 |
      416 |       // Should show all 7 steps
      417 |       expect(screen.getByText('7')).toBeInTheDocument() // Total steps

      at warnUnknownProperties (node_modules/react-dom/cjs/react-dom-client.development.js:3162:19)
      at validatePropertiesInDevelopment (node_modules/react-dom/cjs/react-dom-client.development.js:17117:9)
      at setInitialProperties (node_modules/react-dom/cjs/react-dom-client.development.js:17741:7)
      at completeWork (node_modules/react-dom/cjs/react-dom-client.development.js:11391:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at completeUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15268:19)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15149:11)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16231:7)
      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)
      at flushSpawnedWork (node_modules/react-dom/cjs/react-dom-client.development.js:15677:9)
      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15403:9)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:414:13)

  ● Complex Scenarios › Multi-Step Sequences Spanning Weeks › handles complex multi-week sequence correctly

    TestingLibraryElementError: Found multiple elements with the text: 7

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m7[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m7[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Complex multi_week Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m📋[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[3...

      415 |
      416 |       // Should show all 7 steps
    > 417 |       expect(screen.getByText('7')).toBeInTheDocument() // Total steps
          |                     ^
      418 |
      419 |       // Should calculate total duration: 1 + 2 + 1 = 4 weeks = 28 days
      420 |       expect(screen.getByText(/28\.0 days/)).toBeInTheDocument()

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:417:21)

  ● Complex Scenarios › Multi-Step Sequences Spanning Weeks › supports reordering of complex sequences

    TestingLibraryElementError: Found multiple elements with the text: 7

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m7[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m7[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Complex multi_week Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r1g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m📋[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[...

      488 |       // Should maintain order display
      489 |       expect(screen.getByText('1')).toBeInTheDocument()
    > 490 |       expect(screen.getByText('7')).toBeInTheDocument()
          |                     ^
      491 |     })
      492 |   })
      493 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:490:21)

  ● Complex Scenarios › Sequences That Cross UAE Holidays › provides appropriate timing for pre/post holiday communications

    TestingLibraryElementError: Found multiple elements with the text: /5\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m5.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m5.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Holiday-Aware Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r2g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m📋[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      535 |
      536 |       // Should calculate appropriate buffer time
    > 537 |       expect(screen.getByText(/5\.0 days/)).toBeInTheDocument()
          |                     ^
      538 |     })
      539 |
      540 |     it('maintains cultural sensitivity during holiday periods', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:537:21)

  ● Complex Scenarios › Mixed Language Sequences (Arabic/English) › validates template compatibility with language settings

    expect(received).toBeDefined()

    Received: undefined

      654 |
      655 |       // Templates should exist for all language options
    > 656 |       expect(englishTemplate).toBeDefined()
          |                               ^
      657 |       expect(arabicTemplate).toBeDefined()
      658 |       expect(bilingualTemplate).toBeDefined()
      659 |     })

      at Object.toBeDefined (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:656:31)

  ● Complex Scenarios › Mixed Language Sequences (Arabic/English) › calculates appropriate timing between language switches

    TestingLibraryElementError: Found multiple elements with the text: /8\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m8.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m8.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Mixed Language Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r40»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m📋[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
    ...

      671 |
      672 |       // Should calculate total duration: 3 + 5 = 8 days
    > 673 |       expect(screen.getByText(/8\.0 days/)).toBeInTheDocument()
          |                     ^
      674 |     })
      675 |   })
      676 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:673:21)

  ● Complex Scenarios › Business Hours Compliance Validation › validates business hours compliance in step editor

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Complex multi_week Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4g»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4h»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Contact":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Week 1 Wait":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Professional Follow-up":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Week 2 Wait":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Firm Notice":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Final Wait":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Final Notice":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Complex multi_week Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r4g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m📋[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[...

      733 |
      734 |       // Edit a wait step
    > 735 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      736 |       await user.click(editButtons[1]) // Second step (wait step)
      737 |
      738 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:735:34)

  ● Complex Scenarios › Full Escalation Sequence Integration › handles complete escalation sequence correctly

    TestingLibraryElementError: Found multiple elements with the text: 8

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m8[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m8[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Full Escalation Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r50»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m📋[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m...

      769 |
      770 |       // Should show total of 8 steps
    > 771 |       expect(screen.getByText('8')).toBeInTheDocument()
          |                     ^
      772 |     })
      773 |
      774 |     it('validates escalation tone progression', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:771:21)

  ● Complex Scenarios › Full Escalation Sequence Integration › calculates correct total duration for escalation

    TestingLibraryElementError: Found multiple elements with the text: /24\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m24.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m24.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Full Escalation Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r5g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m📋[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m...

      816 |
      817 |       // Should calculate total duration: 3 + 7 + 14 = 24 days
    > 818 |       expect(screen.getByText(/24\.0 days/)).toBeInTheDocument()
          |                     ^
      819 |     })
      820 |   })
      821 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:818:21)

  ● Complex Scenarios › Performance with Complex Scenarios › handles large complex sequences efficiently

    TestingLibraryElementError: Found multiple elements with the text: 17

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m17[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m17[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Complex multi_week Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r60»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m📋[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[...

      849 |
      850 |       // Should show correct step count
    > 851 |       expect(screen.getByText('17')).toBeInTheDocument() // 7 original + 10 additional
          |                     ^
      852 |     })
      853 |
      854 |     it('maintains responsiveness during complex drag operations', async () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:851:21)

  ● Complex Scenarios › Performance with Complex Scenarios › maintains responsiveness during complex drag operations

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/save sequence/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Full Escalation Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r6g»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r6h»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Gentle Reminder":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Grace Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Professional Follow-up":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Standard Wait":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Firm Notice":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Pre-Legal Wait":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Final Legal Notice":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Legal Escalation":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Full Escalation Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r6g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m📋[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m...

      869 |
      870 |       // UI should remain responsive
    > 871 |       expect(screen.getByRole('button', { name: /save sequence/i })).toBeInTheDocument()
          |                     ^
      872 |     })
      873 |
      874 |     it('handles rapid sequence modifications efficiently', async () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:871:21)

  ● Complex Scenarios › Error Handling in Complex Scenarios › validates complex sequences before saving

    Found multiple elements with the text: /Email template or custom content is required/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<li[39m
      [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-circle-alert h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12"[39m
          [33my1[39m=[32m"8"[39m
          [33my2[39m=[32m"12"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12.01"[39m
          [33my1[39m=[32m"16"[39m
          [33my2[39m=[32m"16"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mStep 1: Email template or custom content is required[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<li[39m
      [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-circle-alert h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12"[39m
          [33my1[39m=[32m"8"[39m
          [33my2[39m=[32m"12"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12.01"[39m
          [33my1[39m=[32m"16"[39m
          [33my2[39m=[32m"16"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mStep 3: Email template or custom content is required[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<li[39m
      [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-circle-alert h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12"[39m
          [33my1[39m=[32m"8"[39m
          [33my2[39m=[32m"12"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12.01"[39m
          [33my1[39m=[32m"16"[39m
          [33my2[39m=[32m"16"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mStep 5: Email template or custom content is required[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<li[39m
      [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-circle-alert h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12"[39m
          [33my1[39m=[32m"8"[39m
          [33my2[39m=[32m"12"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12.01"[39m
          [33my1[39m=[32m"16"[39m
          [33my2[39m=[32m"16"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mStep 7: Email template or custom content is required[0m
    [36m</li>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Full Escalation Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r80»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m📋[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m...

      939 |       await user.click(saveButton)
      940 |
    > 941 |       await waitFor(() => {
          |                    ^
      942 |         expect(screen.getByText('Validation Errors')).toBeInTheDocument()
      943 |         expect(screen.getByText(/Email template or custom content is required/)).toBeInTheDocument()
      944 |       })

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:941:20)

FAIL tests/integration/uae-compliance-validation.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/route.ts:21:20)
      at Object.<anonymous> (tests/integration/uae-compliance-validation.test.ts:18:16)

FAIL src/__tests__/components/dashboard-comprehensive.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      62 | }
      63 |
    > 64 | // UAE business email generator
         |                ^
      65 | export const generateBusinessEmail = (companyName?: string): string => {
      66 |   const domain = companyName 
      67 |     ? `${companyName.toLowerCase().replace(/\s+/g, '')}.ae`

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.ts:64:16)
      at Object.<anonymous> (src/__tests__/components/dashboard-comprehensive.test.tsx:19:22)

FAIL tests/integration/performance-validation.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      16 | import { faker } from '@faker-js/faker'
      17 |
    > 18 | // Import API handlers
         |                ^
      19 | import { GET as InvoicesGet, POST as InvoicesPost } from '../../src/app/api/invoices/route'
      20 | import { POST as PaymentsPost } from '../../src/app/api/payments/route'
      21 | import { POST as BulkPost } from '../../src/app/api/invoices/bulk/route'

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (tests/integration/performance-validation.test.ts:18:16)

FAIL src/components/invoices/__tests__/email-campaign-modal.test.tsx (6.957 s)
  ● Console

    console.log
      Campaign created: { success: true, campaignId: 'campaign-123' }

      at log (src/components/invoices/email-campaign-modal.tsx:177:15)

    console.error
      Error creating campaign: Error: Failed to create campaign
          at handleSubmit (/Users/ibbs/Development/reminder-mvp/src/components/invoices/email-campaign-modal.tsx:173:15)

      180 |       onClose()
      181 |     } catch (error) {
    > 182 |       console.error('Error creating campaign:', error)
          |               ^
      183 |       // Handle error - show toast or error message
      184 |     } finally {
      185 |       setIsSubmitting(false)

      at error (src/components/invoices/email-campaign-modal.tsx:182:15)

  ● EmailCampaignModal › should select email templates

    expect(received).toBeChecked()

    received value must be an HTMLElement or an SVGElement.
    Received has value: null

      164 |     // Template should be selected (checkbox checked)
      165 |     const checkbox = gentleReminderTemplate.closest('div')?.querySelector('input[type="checkbox"]')
    > 166 |     expect(checkbox).toBeChecked()
          |                      ^
      167 |   })
      168 |
      169 |   it('should insert merge tags', async () => {

      at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:2240:22)
      at Object.throwingMatcher [as toBeChecked] (node_modules/expect/build/index.js:2241:6)
      at Object.toBeChecked (src/components/invoices/__tests__/email-campaign-modal.test.tsx:166:22)

  ● EmailCampaignModal › should handle language selection

    TestingLibraryElementError: Found a label with the text of: Language, however no form control was found associated to that label. Make sure you're using the "for" attribute or "aria-labelledby" attribute correctly.

    Ignored nodes: comments, script, style
    [36m<body[39m
      [33mdata-scroll-locked[39m=[32m"1"[39m
      [33mstyle[39m=[32m"pointer-events: none;"[39m
    [36m>[39m
      [36m<span[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-radix-focus-guard[39m=[32m""[39m
        [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
        [33mtabindex[39m=[32m"0"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-slot[39m=[32m"dialog-overlay"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-describedby[39m=[32m"radix-«r2j»"[39m
        [33maria-labelledby[39m=[32m"radix-«r2i»"[39m
        [33mclass[39m=[32m"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg max-w-4xl max-h-[90vh] overflow-y-auto"[39m
        [33mdata-slot[39m=[32m"dialog-content"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mid[39m=[32m"radix-«r2h»"[39m
        [33mrole[39m=[32m"dialog"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
        [33mtabindex[39m=[32m"-1"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-2 text-center sm:text-left"[39m
          [33mdata-slot[39m=[32m"dialog-header"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg leading-none font-semibold flex items-center gap-2"[39m
            [33mdata-slot[39m=[32m"dialog-title"[39m
            [33mid[39m=[32m"radix-«r2i»"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-mail h-5 w-5"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
              [36m/>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"16"[39m
                [33mrx[39m=[32m"2"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mCreate Email Campaign[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
            [33mdata-slot[39m=[32m"dialog-description"[39m
            [33mid[39m=[32m"radix-«r2j»"[39m
          [36m>[39m
            [0mSend payment reminders to [0m
            [0m2[0m
            [0m customers for outstanding invoices[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600"[39m
            [36m>[39m
              [0m2[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mInvoices[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-green-600"[39m
            [36m>[39m
              [0mAED 15,000.00[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mTotal Amount[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-orange-600"[39m
            [36m>[39m
              [0m4[0m
              [0md[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mAvg Days Overdue[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mdata-orientation[39m=[32m"horizontal"[39m
          [33mdir[39m=[32m"ltr"[39m
        [36m>[39m
          [36m<div[39m
            [33maria-orientation[39m=[32m"horizontal"[39m
            [33mclass[39m=[32m"h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground grid w-full grid-cols-4"[39m
            [33mdata-orientation[39m=[32m"horizontal"[39m
            [33mrole[39m=[32m"tablist"[39m
            [33mstyle[39m=[32m"outline: none;"[39m
            [33mtabindex[39m=[32m"0"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-controls[39m=[32m"radix-«r2k»-content-1"[39m
              [33maria-selected[39m=[32m"true"[39m
              [33mclass[39m=[32m"justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2"[39m
              [33mdata-orientation[39m=[32m"horizontal"[39m
              [33mdata-radix-collection-item[39m=[32m""[39m
              [33mdata-state[39m=[32m"active"[39m
              [33mid[39m=[32m"radix-«r2k»-trigger-1"[39m
              [33mrole[39m=[32m"tab"[39m
              [33mtabindex[39m=[32m"0"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-file-text h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin...

      204 |
      205 |     // Open language select
    > 206 |     const languageSelect = screen.getByLabelText('Language')
          |                                   ^
      207 |     await user.click(languageSelect)
      208 |
      209 |     // Select Arabic

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:108:40)
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByLabelText (src/components/invoices/__tests__/email-campaign-modal.test.tsx:206:35)

  ● EmailCampaignModal › should configure sending settings

    TestingLibraryElementError: Found a label with the text of: Batch Size, however no form control was found associated to that label. Make sure you're using the "for" attribute or "aria-labelledby" attribute correctly.

    Ignored nodes: comments, script, style
    [36m<body[39m
      [33mdata-scroll-locked[39m=[32m"1"[39m
      [33mstyle[39m=[32m"pointer-events: none;"[39m
    [36m>[39m
      [36m<span[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-radix-focus-guard[39m=[32m""[39m
        [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
        [33mtabindex[39m=[32m"0"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-slot[39m=[32m"dialog-overlay"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-describedby[39m=[32m"radix-«r2u»"[39m
        [33maria-labelledby[39m=[32m"radix-«r2t»"[39m
        [33mclass[39m=[32m"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg max-w-4xl max-h-[90vh] overflow-y-auto"[39m
        [33mdata-slot[39m=[32m"dialog-content"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mid[39m=[32m"radix-«r2s»"[39m
        [33mrole[39m=[32m"dialog"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
        [33mtabindex[39m=[32m"-1"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-2 text-center sm:text-left"[39m
          [33mdata-slot[39m=[32m"dialog-header"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg leading-none font-semibold flex items-center gap-2"[39m
            [33mdata-slot[39m=[32m"dialog-title"[39m
            [33mid[39m=[32m"radix-«r2t»"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-mail h-5 w-5"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
              [36m/>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"16"[39m
                [33mrx[39m=[32m"2"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mCreate Email Campaign[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
            [33mdata-slot[39m=[32m"dialog-description"[39m
            [33mid[39m=[32m"radix-«r2u»"[39m
          [36m>[39m
            [0mSend payment reminders to [0m
            [0m2[0m
            [0m customers for outstanding invoices[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600"[39m
            [36m>[39m
              [0m2[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mInvoices[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-green-600"[39m
            [36m>[39m
              [0mAED 15,000.00[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mTotal Amount[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-orange-600"[39m
            [36m>[39m
              [0m4[0m
              [0md[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mAvg Days Overdue[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mdata-orientation[39m=[32m"horizontal"[39m
          [33mdir[39m=[32m"ltr"[39m
        [36m>[39m
          [36m<div[39m
            [33maria-orientation[39m=[32m"horizontal"[39m
            [33mclass[39m=[32m"h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground grid w-full grid-cols-4"[39m
            [33mdata-orientation[39m=[32m"horizontal"[39m
            [33mrole[39m=[32m"tablist"[39m
            [33mstyle[39m=[32m"outline: none;"[39m
            [33mtabindex[39m=[32m"0"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-controls[39m=[32m"radix-«r2v»-content-1"[39m
              [33maria-selected[39m=[32m"false"[39m
              [33mclass[39m=[32m"justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2"[39m
              [33mdata-orientation[39m=[32m"horizontal"[39m
              [33mdata-radix-collection-item[39m=[32m""[39m
              [33mdata-state[39m=[32m"inactive"[39m
              [33mid[39m=[32m"radix-«r2v»-trigger-1"[39m
              [33mrole[39m=[32m"tab"[39m
              [33mtabindex[39m=[32m"-1"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-file-text h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linej...

      236 |
      237 |     // Change batch size
    > 238 |     const batchSizeSelect = screen.getByLabelText('Batch Size')
          |                                    ^
      239 |     await user.click(batchSizeSelect)
      240 |     const batchOption = screen.getByText('10 emails per batch')
      241 |     await user.click(batchOption)

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:108:40)
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByLabelText (src/components/invoices/__tests__/email-campaign-modal.test.tsx:238:36)

  ● EmailCampaignModal › should show email preview with real data

    TestingLibraryElementError: Unable to find an element with the text: ABC Trading LLC. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body[39m
      [33mdata-scroll-locked[39m=[32m"1"[39m
      [33mstyle[39m=[32m"pointer-events: none;"[39m
    [36m>[39m
      [36m<span[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-radix-focus-guard[39m=[32m""[39m
        [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
        [33mtabindex[39m=[32m"0"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-slot[39m=[32m"dialog-overlay"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-describedby[39m=[32m"radix-«r3l»"[39m
        [33maria-labelledby[39m=[32m"radix-«r3k»"[39m
        [33mclass[39m=[32m"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg max-w-4xl max-h-[90vh] overflow-y-auto"[39m
        [33mdata-slot[39m=[32m"dialog-content"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mid[39m=[32m"radix-«r3j»"[39m
        [33mrole[39m=[32m"dialog"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
        [33mtabindex[39m=[32m"-1"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-2 text-center sm:text-left"[39m
          [33mdata-slot[39m=[32m"dialog-header"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg leading-none font-semibold flex items-center gap-2"[39m
            [33mdata-slot[39m=[32m"dialog-title"[39m
            [33mid[39m=[32m"radix-«r3k»"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-mail h-5 w-5"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
              [36m/>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"16"[39m
                [33mrx[39m=[32m"2"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mCreate Email Campaign[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
            [33mdata-slot[39m=[32m"dialog-description"[39m
            [33mid[39m=[32m"radix-«r3l»"[39m
          [36m>[39m
            [0mSend payment reminders to [0m
            [0m2[0m
            [0m customers for outstanding invoices[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600"[39m
            [36m>[39m
              [0m2[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mInvoices[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-green-600"[39m
            [36m>[39m
              [0mAED 15,000.00[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mTotal Amount[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-orange-600"[39m
            [36m>[39m
              [0m4[0m
              [0md[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mAvg Days Overdue[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mdata-orientation[39m=[32m"horizontal"[39m
          [33mdir[39m=[32m"ltr"[39m
        [36m>[39m
          [36m<div[39m
            [33maria-orientation[39m=[32m"horizontal"[39m
            [33mclass[39m=[32m"h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground grid w-full grid-cols-4"[39m
            [33mdata-orientation[39m=[32m"horizontal"[39m
            [33mrole[39m=[32m"tablist"[39m
            [33mstyle[39m=[32m"outline: none;"[39m
            [33mtabindex[39m=[32m"0"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-controls[39m=[32m"radix-«r3m»-content-1"[39m
              [33maria-selected[39m=[32m"false"[39m
              [33mclass[39m=[32m"justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2"[39m
              [33mdata-orientation[39m=[32m"horizontal"[39m
              [33mdata-radix-collection-item[39m=[32m""[39m
              [33mdata-state[39m=[32m"inactive"[39m
              [33mid[39m=[32m"radix-«r3m»-trigger-1"[39m
              [33mrole[39m=[32m"tab"[39m
              [33mtabindex[39m=[32m"-1"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-file-text h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linej...

      265 |     expect(screen.getByText('Email Preview')).toBeInTheDocument()
      266 |     expect(screen.getByText('Sample Personalized Email')).toBeInTheDocument()
    > 267 |     expect(screen.getByText('ABC Trading LLC')).toBeInTheDocument() // Customer name
          |                   ^
      268 |     expect(screen.getByText('accounts@abctrading.ae')).toBeInTheDocument() // Customer email
      269 |   })
      270 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/email-campaign-modal.test.tsx:267:19)

  ● EmailCampaignModal › should submit campaign successfully

    expect(element).toHaveTextContent()

    Expected element to have text content:
      Creating Campaign...
    Received:
      Send Campaign

      293 |     await user.click(sendButton)
      294 |
    > 295 |     expect(sendButton).toHaveTextContent('Creating Campaign...')
          |                        ^
      296 |
      297 |     await waitFor(() => {
      298 |       expect(mockFetch).toHaveBeenCalledWith('/api/campaigns/from-invoices', {

      at Object.toHaveTextContent (src/components/invoices/__tests__/email-campaign-modal.test.tsx:295:24)

  ● EmailCampaignModal › should show personalization preview correctly

    TestingLibraryElementError: Found multiple elements with the text: /ABC Trading LLC/i

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mExample with real data from [0m
      [0mABC Trading LLC[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"whitespace-pre-wrap text-sm"[39m
    [36m>[39m
      [0mDear ABC Trading LLC,

    We hope this message finds you well. This is a friendly reminder regarding the following outstanding invoice:

    Invoice Number: INV-001
    Amount: AED 5,000.00
    Due Date: {due_date}
    Days Overdue: 5

    We kindly request that you arrange payment at your earliest convenience. If you have any questions or require assistance, please don't hesitate to contact us.

    Thank you for your business and cooperation.

    Best regards,
    Your Company Team[0m
    [36m</div>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body[39m
      [33mdata-scroll-locked[39m=[32m"1"[39m
      [33mstyle[39m=[32m"pointer-events: none;"[39m
    [36m>[39m
      [36m<span[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-radix-focus-guard[39m=[32m""[39m
        [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
        [33mtabindex[39m=[32m"0"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-slot[39m=[32m"dialog-overlay"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-describedby[39m=[32m"radix-«r7k»"[39m
        [33maria-labelledby[39m=[32m"radix-«r7j»"[39m
        [33mclass[39m=[32m"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg max-w-4xl max-h-[90vh] overflow-y-auto"[39m
        [33mdata-slot[39m=[32m"dialog-content"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mid[39m=[32m"radix-«r7i»"[39m
        [33mrole[39m=[32m"dialog"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
        [33mtabindex[39m=[32m"-1"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-2 text-center sm:text-left"[39m
          [33mdata-slot[39m=[32m"dialog-header"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg leading-none font-semibold flex items-center gap-2"[39m
            [33mdata-slot[39m=[32m"dialog-title"[39m
            [33mid[39m=[32m"radix-«r7j»"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-mail h-5 w-5"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
              [36m/>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"16"[39m
                [33mrx[39m=[32m"2"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mCreate Email Campaign[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
            [33mdata-slot[39m=[32m"dialog-description"[39m
            [33mid[39m=[32m"radix-«r7k»"[39m
          [36m>[39m
            [0mSend payment reminders to [0m
            [0m2[0m
            [0m customers for outstanding invoices[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600"[39m
            [36m>[39m
              [0m2[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mInvoices[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-green-600"[39m
            [36m>[39m
              [0mAED 15,000.00[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mTotal Amount[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-orange-600"[39m
            [36m>[39m
              [0m4[0m
              [0md[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mAvg Days Overdue[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mdata-orientation[39m=[32m"horizontal"[39m
          [33mdir[39m=[32m"ltr"[39m
        [36m>[39m
          [36m<div[39m
            [33maria-orientation[39m=[32m"horizontal"[39m
            [33mclass[39m=[32m"h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground grid w-full grid-cols-4"[39m
            [33mdata-orientation[39m=[32m"horizontal"[39m
            [33mrole[39m=[32m"tablist"[39m
            [33mstyle[39m=[32m"outline: none;"[39m
            [33mtabindex[39m=[32m"0"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-controls[39m=[32m"radix-«r7l»-content-1"[39m
              [33maria-selected[39m=[32m"false"[39m
              [33mclass[39m=[32m"justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2"[39m
              [33mdata-orientation[39m=[32m"horizontal"[39m
              [33mdata-radix-collection-item[39m=[32m""[39m
              [33mdata-state[39m=[32m"inactive"[39m
              [33mid[39m=[32m"radix-«r7l»-trigger-1"[39m
              [33mrole[39m=[32m"tab"[39m
              [33mtabindex[39m=[32m"-1"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-file-text h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linej...

      474 |
      475 |     // Check that merge tags are replaced with actual data
    > 476 |     const emailPreview = screen.getByText(/ABC Trading LLC/i)
          |                                 ^
      477 |     expect(emailPreview).toBeInTheDocument()
      478 |
      479 |     // Check currency formatting

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/email-campaign-modal.test.tsx:476:33)

FAIL tests/integration/error-handling-edge-cases.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/route.ts:21:20)
      at Object.<anonymous> (tests/integration/error-handling-edge-cases.test.ts:20:16)

FAIL tests/integration/invoice-workflow-integration.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/route.ts:21:20)
      at Object.<anonymous> (tests/integration/invoice-workflow-integration.test.ts:19:16)

FAIL tests/e2e/follow-up-automation-e2e.test.ts
  ● Test suite failed to run

      [31mx[0m Expected unicode escape
       ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/tests/e2e/follow-up-automation-e2e.test.ts[0m:1:1]
     [2m1[0m | /**\n * End-to-End Follow-up Automation User Journey Tests\n * Complete user workflows for UAE business automation\n */\n\nimport { test, expect, Page, BrowserContext } from '@playwright/test'\nimport { faker } from '@faker-js/faker'\n\n// Test data interfaces\ninterface TestCompany {\n  name: string\n  email: string\n  trn: string\n  address: string\n  phone: string\n}\n\ninterface TestCustomer {\n  name: string\n  email: string\n  phone: string\n  address: string\n  trn?: string\n}\n\ninterface TestInvoice {\n  number: string\n  amount: string\n  currency: string\n  dueDate: string\n  description: string\n}\n\n// UAE-specific test data generators\nclass UAETestDataGenerator {\n  static generateCompany(): TestCompany {\n    return {\n      name: `${faker.company.name()} LLC`,\n      email: faker.internet.email(),\n      trn: `100${faker.string.numeric(9)}001`,\n      address: `${faker.location.streetAddress()}, Dubai, UAE`,\n      phone: '+971-4-' + faker.string.numeric(7)\n    }\n  }\n\n  static generateCustomer(): TestCustomer {\n    return {\n      name: faker.person.fullName(),\n      email: faker.internet.email(),\n      phone: '+971-50-' + faker.string.numeric(7),\n      address: `${faker.location.streetAddress()}, Abu Dhabi, UAE`,\n      trn: `100${faker.string.numeric(9)}001`\n    }\n  }\n\n  static generateInvoice(): TestInvoice {\n    const amount = faker.number.int({ min: 1000, max: 50000 })\n    return {\n      number: `INV-${faker.string.numeric(4)}-${faker.string.numeric(3)}`,\n      amount: amount.toString(),\n      currency: 'AED',\n      dueDate: faker.date.future().toISOString().split('T')[0],\n      description: `${faker.commerce.productName()} - Professional Services`\n    }\n  }\n}\n\n// Page Object Model for Follow-up Automation\nclass FollowUpAutomationPage {\n  constructor(private page: Page) {}\n\n  // Navigation\n  async navigateToFollowUps() {\n    await this.page.goto('/dashboard/follow-ups')\n    await this.page.waitForSelector('[data-testid=\"follow-ups-dashboard\"]', { timeout: 10000 })\n  }\n\n  async navigateToSequenceBuilder() {\n    await this.page.click('[data-testid=\"create-sequence-btn\"]')\n    await this.page.waitForSelector('[data-testid=\"sequence-builder\"]', { timeout: 5000 })\n  }\n\n  // Sequence Creation\n  async createSequence(name: string, description: string) {\n    await this.page.fill('[data-testid=\"sequence-name\"]', name)\n    await this.page.fill('[data-testid=\"sequence-description\"]', description)\n  }\n\n  async addSequenceStep(stepData: {\n    delay: string\n    subject: string\n    content: string\n    tone: string\n    language: string\n  }) {\n    await this.page.click('[data-testid=\"add-step-btn\"]')\n    \n    const stepIndex = await this.page.locator('[data-testid^=\"step-\"]').count() - 1\n    const stepSelector = `[data-testid=\"step-${stepIndex}\"]`\n    \n    await this.page.fill(`${stepSelector} [data-testid=\"step-delay\"]`, stepData.delay)\n    await this.page.fill(`${stepSelector} [data-testid=\"step-subject\"]`, stepData.subject)\n    await this.page.fill(`${stepSelector} [data-testid=\"step-content\"]`, stepData.content)\n    await this.page.selectOption(`${stepSelector} [data-testid=\"step-tone\"]`, stepData.tone)\n    await this.page.selectOption(`${stepSelector} [data-testid=\"step-language\"]`, stepData.language)\n  }\n\n  async saveSequence() {\n    await this.page.click('[data-testid=\"save-sequence-btn\"]')\n    await this.page.waitForSelector('[data-testid=\"sequence-saved-success\"]', { timeout: 5000 })\n  }\n\n  // Invoice Management\n  async navigateToInvoices() {\n    await this.page.goto('/dashboard/invoices')\n    await this.page.waitForSelector('[data-testid=\"invoices-list\"]', { timeout: 10000 })\n  }\n\n  async createInvoice(customer: TestCustomer, invoice: TestInvoice) {\n    await this.page.click('[data-testid=\"create-invoice-btn\"]')\n    await this.page.waitForSelector('[data-testid=\"invoice-form\"]')\n\n    // Fill customer information\n    await this.page.fill('[data-testid=\"customer-name\"]', customer.name)\n    await this.page.fill('[data-testid=\"customer-email\"]', customer.email)\n    await this.page.fill('[data-testid=\"customer-phone\"]', customer.phone)\n    await this.page.fill('[data-testid=\"customer-address\"]', customer.address)\n\n    // Fill invoice details\n    await this.page.fill('[data-testid=\"invoice-number\"]', invoice.number)\n    await this.page.fill('[data-testid=\"invoice-amount\"]', invoice.amount)\n    await this.page.selectOption('[data-testid=\"invoice-currency\"]', invoice.currency)\n    await this.page.fill('[data-testid=\"invoice-due-date\"]', invoice.dueDate)\n    await this.page.fill('[data-testid=\"invoice-description\"]', invoice.description)\n\n    await this.page.click('[data-testid=\"save-invoice-btn\"]')\n    await this.page.waitForSelector('[data-testid=\"invoice-created-success\"]', { timeout: 5000 })\n  }\n\n  async assignSequenceToInvoice(invoiceNumber: string, sequenceName: string) {\n    // Find invoice in list\n    await this.page.click(`[data-testid=\"invoice-${invoiceNumber}\"] [data-testid=\"assign-sequence-btn\"]`)\n    await this.page.waitForSelector('[data-testid=\"sequence-assignment-dialog\"]')\n    \n    // Select sequence\n    await this.page.selectOption('[data-testid=\"sequence-select\"]', sequenceName)\n    await this.page.click('[data-testid=\"assign-sequence-confirm\"]')\n    await this.page.waitForSelector('[data-testid=\"sequence-assigned-success\"]', { timeout: 5000 })\n  }\n\n  // Monitoring and Analytics\n  async viewSequenceAnalytics(sequenceName: string) {\n    await this.navigateToFollowUps()\n    await this.page.click(`[data-testid=\"sequence-${sequenceName}\"] [data-testid=\"view-analytics-btn\"]`)\n    await this.page.waitForSelector('[data-testid=\"sequence-analytics\"]', { timeout: 5000 })\n  }\n\n  async getAnalyticsData() {\n    const totalExecutions = await this.page.textContent('[data-testid=\"total-executions\"]')\n    const successRate = await this.page.textContent('[data-testid=\"success-rate\"]')\n    const openRate = await this.page.textContent('[data-testid=\"open-rate\"]')\n    const conversionRate = await this.page.textContent('[data-testid=\"conversion-rate\"]')\n\n    return {\n      totalExecutions: parseInt(totalExecutions || '0'),\n      successRate: parseFloat(successRate || '0'),\n      openRate: parseFloat(openRate || '0'),\n      conversionRate: parseFloat(conversionRate || '0')\n    }\n  }\n\n  // Cultural Compliance Validation\n  async validateCulturalCompliance() {\n    await this.page.click('[data-testid=\"cultural-compliance-check\"]')\n    await this.page.waitForSelector('[data-testid=\"compliance-results\"]', { timeout: 5000 })\n    \n    const complianceScore = await this.page.textContent('[data-testid=\"compliance-score\"]')\n    const issues = await this.page.locator('[data-testid=\"compliance-issues\"] li').allTextContents()\n    const suggestions = await this.page.locator('[data-testid=\"compliance-suggestions\"] li').allTextContents()\n\n    return {\n      score: parseInt(complianceScore || '0'),\n      issues,\n      suggestions\n    }\n  }\n\n  // Business Hours Testing\n  async testBusinessHoursScheduling() {\n    await this.page.click('[data-testid=\"test-scheduling-btn\"]')\n    await this.page.waitForSelector('[data-testid=\"scheduling-test-results\"]', { timeout: 10000 })\n    \n    const scheduledTime = await this.page.textContent('[data-testid=\"scheduled-time\"]')\n    const businessHoursCompliant = await this.page.isVisible('[data-testid=\"business-hours-compliant\"]')\n    const prayerTimeAvoidance = await this.page.isVisible('[data-testid=\"prayer-time-avoided\"]')\n    const holidayRespected = await this.page.isVisible('[data-testid=\"holiday-respected\"]')\n\n    return {\n      scheduledTime,\n      businessHoursCompliant,\n      prayerTimeAvoidance,\n      holidayRespected\n    }\n  }\n}\n\n// Authentication helper\nclass AuthHelper {\n  static async loginAsUAEBusiness(page: Page) {\n    await page.goto('/auth/signin')\n    await page.fill('[data-testid=\"email\"]', 'test@uaebusiness.ae')\n    await page.fill('[data-testid=\"password\"]', 'testpassword123')\n    await page.click('[data-testid=\"signin-btn\"]')\n    await page.waitForSelector('[data-testid=\"dashboard\"]', { timeout: 10000 })\n  }\n\n  static async logout(page: Page) {\n    await page.click('[data-testid=\"user-menu\"]')\n    await page.click('[data-testid=\"logout-btn\"]')\n    await page.waitForSelector('[data-testid=\"signin-form\"]', { timeout: 5000 })\n  }\n}\n\ntest.describe('Follow-up Automation E2E User Journeys', () => {\n  let followUpPage: FollowUpAutomationPage\n  let testCompany: TestCompany\n  let testCustomer: TestCustomer\n  let testInvoice: TestInvoice\n\n  test.beforeEach(async ({ page }) => {\n    followUpPage = new FollowUpAutomationPage(page)\n    testCompany = UAETestDataGenerator.generateCompany()\n    testCustomer = UAETestDataGenerator.generateCustomer()\n    testInvoice = UAETestDataGenerator.generateInvoice()\n\n    // Login as UAE business user\n    await AuthHelper.loginAsUAEBusiness(page)\n  })\n\n  test.afterEach(async ({ page }) => {\n    await AuthHelper.logout(page)\n  })\n\n  test.describe('Complete Automation Setup Journey', () => {\n    test('should create culturally compliant follow-up sequence', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      await followUpPage.navigateToSequenceBuilder()\n\n      // Create UAE-culturally appropriate sequence\n      await followUpPage.createSequence(\n        'UAE Professional Follow-up Sequence',\n        'Culturally sensitive follow-up sequence for UAE business clients'\n      )\n\n      // Step 1: Gentle reminder\n      await followUpPage.addSequenceStep({\n        delay: '7',\n        subject: 'Gentle Reminder: Invoice {{invoiceNumber}} - {{customerName}}',\n        content: 'As-salamu alaykum {{customerName}},\\n\\nWe hope this email finds you in good health. This is a respectful reminder regarding Invoice {{invoiceNumber}} for {{invoiceAmount}} {{currency}}.\\n\\nWe would appreciate your kind attention to this matter at your earliest convenience.\\n\\nBarakallahu feeki for your continued partnership.\\n\\nBest regards,\\n{{companyName}} Team',\n        tone: 'BUSINESS',\n        language: 'ENGLISH'\n      })\n\n      // Step 2: Follow-up notice\n      await followUpPage.addSequenceStep({\n        delay: '7',\n        subject: 'Follow-up: Invoice {{invoiceNumber}} - Your Cooperation Appreciated',\n        content: 'Dear Valued Customer {{customerName}},\\n\\nWe respectfully follow up on our previous communication regarding Invoice {{invoiceNumber}}.\\n\\nWe kindly request your cooperation in settling this matter or discussing any concerns you may have.\\n\\nPlease contact us at your earliest convenience.\\n\\nJazakAllahu khair for your attention.\\n\\nWith sincere regards,\\n{{companyName}} Finance Team',\n        tone: 'FORMAL',\n        language: 'ENGLISH'\n      })\n\n      // Step 3: Final respectful notice\n      await followUpPage.addSequenceStep({\n        delay: '5',\n        subject: 'Important: Invoice {{invoiceNumber}} - Discussion Required',\n        content: 'Dear Esteemed Customer {{customerName}},\\n\\nWe respectfully write regarding Invoice {{invoiceNumber}} which remains outstanding.\\n\\nWe would very much appreciate the opportunity to discuss this matter with you.\\n\\nPlease contact us within the next few business days so we can work together amicably.\\n\\nWe value our business relationship greatly.\\n\\nRespectfully yours,\\n{{companyName}} Management',\n        tone: 'VERY_FORMAL',\n        language: 'ENGLISH'\n      })\n\n      await followUpPage.saveSequence()\n\n      // Validate cultural compliance\n      const compliance = await followUpPage.validateCulturalCompliance()\n      expect(compliance.score).toBeGreaterThan(80) // High cultural compliance\n      expect(compliance.issues.length).toBeLessThan(3) // Minimal issues\n    })\n\n    test('should create and automate invoice with follow-up sequence', async ({ page }) => {\n      // First create the sequence\n      await followUpPage.navigateToFollowUps()\n      await followUpPage.navigateToSequenceBuilder()\n      await followUpPage.createSequence('Test Automation Sequence', 'E2E test sequence')\n      \n      await followUpPage.addSequenceStep({\n        delay: '1', // Short delay for testing\n        subject: 'Test Reminder: {{invoiceNumber}}',\n        content: 'Dear {{customerName}}, test reminder for {{invoiceAmount}} {{currency}}.',\n        tone: 'BUSINESS',\n        language: 'ENGLISH'\n      })\n      \n      await followUpPage.saveSequence()\n\n      // Create invoice\n      await followUpPage.navigateToInvoices()\n      await followUpPage.createInvoice(testCustomer, testInvoice)\n\n      // Assign sequence to invoice\n      await followUpPage.assignSequenceToInvoice(testInvoice.number, 'Test Automation Sequence')\n\n      // Verify assignment\n      const assignmentSuccess = await page.isVisible('[data-testid=\"sequence-assigned-success\"]')\n      expect(assignmentSuccess).toBe(true)\n\n      // Check automation status\n      await page.click(`[data-testid=\"invoice-${testInvoice.number}\"] [data-testid=\"view-automation-status\"]`)\n      await page.waitForSelector('[data-testid=\"automation-status\"]')\n      \n      const automationStatus = await page.textContent('[data-testid=\"automation-status\"]')\n      expect(automationStatus).toContain('ACTIVE')\n    })\n  })\n\n  test.describe('UAE Business Compliance Validation', () => {\n    test('should respect UAE business hours in scheduling', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      \n      // Test business hours compliance\n      const schedulingTest = await followUpPage.testBusinessHoursScheduling()\n      \n      expect(schedulingTest.businessHoursCompliant).toBe(true)\n      expect(schedulingTest.prayerTimeAvoidance).toBe(true)\n      \n      // Verify scheduled time is within UAE business hours (Sunday-Thursday, 8 AM-6 PM)\n      const scheduledDate = new Date(schedulingTest.scheduledTime || '')\n      const dayOfWeek = scheduledDate.getDay()\n      const hour = scheduledDate.getHours()\n      \n      expect([0, 1, 2, 3, 4]).toContain(dayOfWeek) // Sunday-Thursday\n      expect(hour).toBeGreaterThanOrEqual(8)\n      expect(hour).toBeLessThan(18)\n    })\n\n    test('should avoid Islamic holidays and Ramadan periods', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      \n      // Navigate to scheduling settings\n      await page.click('[data-testid=\"scheduling-settings-btn\"]')\n      await page.waitForSelector('[data-testid=\"scheduling-settings\"]')\n      \n      // Enable Islamic calendar compliance\n      await page.check('[data-testid=\"respect-islamic-calendar\"]')\n      await page.check('[data-testid=\"avoid-ramadan-iftar\"]')\n      await page.check('[data-testid=\"respect-islamic-holidays\"]')\n      \n      await page.click('[data-testid=\"save-settings-btn\"]')\n      await page.waitForSelector('[data-testid=\"settings-saved-success\"]')\n      \n      // Test scheduling during Islamic observances\n      const schedulingTest = await followUpPage.testBusinessHoursScheduling()\n      expect(schedulingTest.holidayRespected).toBe(true)\n    })\n\n    test('should validate Arabic RTL template support', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      await followUpPage.navigateToSequenceBuilder()\n      \n      await followUpPage.createSequence('Arabic Bilingual Sequence', 'Supports Arabic RTL')\n      \n      // Add Arabic language step\n      await followUpPage.addSequenceStep({\n        delay: '7',\n        subject: 'تذكير: فاتورة {{invoiceNumber}}',\n        content: 'عزيزي العميل {{customerName}},\\n\\nنتمنى أن تكون بخير. هذا تذكير لطيف بخصوص الفاتورة {{invoiceNumber}}.\\n\\nنقدر تعاونكم في هذا الأمر.\\n\\nمع خالص التقدير',\n        tone: 'BUSINESS',\n        language: 'ARABIC'\n      })\n      \n      await followUpPage.saveSequence()\n      \n      // Verify RTL support\n      const arabicContent = await page.locator('[data-testid=\"step-content\"][dir=\"rtl\"]')\n      expect(await arabicContent.count()).toBeGreaterThan(0)\n      \n      // Validate Arabic text detection\n      const hasArabicText = await page.isVisible('[data-testid=\"arabic-detected\"]')\n      expect(hasArabicText).toBe(true)\n    })\n  })\n\n  test.describe('Monitoring and Analytics Journey', () => {\n    test('should provide comprehensive sequence analytics', async ({ page }) => {\n      // Setup test sequence with some execution data\n      await followUpPage.navigateToFollowUps()\n      \n      // Assume we have some existing sequence data\n      await followUpPage.viewSequenceAnalytics('Test Analytics Sequence')\n      \n      const analytics = await followUpPage.getAnalyticsData()\n      \n      // Verify analytics are displayed\n      expect(analytics.totalExecutions).toBeGreaterThanOrEqual(0)\n      expect(analytics.successRate).toBeGreaterThanOrEqual(0)\n      expect(analytics.successRate).toBeLessThanOrEqual(100)\n      expect(analytics.openRate).toBeGreaterThanOrEqual(0)\n      expect(analytics.openRate).toBeLessThanOrEqual(100)\n      expect(analytics.conversionRate).toBeGreaterThanOrEqual(0)\n      expect(analytics.conversionRate).toBeLessThanOrEqual(100)\n      \n      // Check for detailed step analytics\n      const stepAnalytics = await page.locator('[data-testid=\"step-analytics\"]')\n      expect(await stepAnalytics.count()).toBeGreaterThan(0)\n    })\n\n    test('should show real-time execution monitoring', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      \n      // Navigate to execution monitor\n      await page.click('[data-testid=\"execution-monitor-btn\"]')\n      await page.waitForSelector('[data-testid=\"execution-monitor\"]')\n      \n      // Check for active executions\n      const activeExecutions = await page.locator('[data-testid=\"active-execution\"]')\n      const executionCount = await activeExecutions.count()\n      \n      // Should display execution status\n      if (executionCount > 0) {\n        const firstExecution = activeExecutions.first()\n        const status = await firstExecution.locator('[data-testid=\"execution-status\"]').textContent()\n        expect(['ACTIVE', 'PENDING', 'SCHEDULED', 'PAUSED']).toContain(status)\n        \n        const progress = await firstExecution.locator('[data-testid=\"execution-progress\"]').textContent()\n        expect(progress).toMatch(/\\d+\\/\\d+/) // Format like \"2/3\"\n      }\n    })\n\n    test('should handle sequence pause and resume operations', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      \n      // Find an active sequence\n      const activeSequence = page.locator('[data-testid^=\"sequence-\"][data-status=\"active\"]').first()\n      \n      if (await activeSequence.count() > 0) {\n        // Pause sequence\n        await activeSequence.locator('[data-testid=\"pause-sequence-btn\"]').click()\n        await page.waitForSelector('[data-testid=\"sequence-paused-success\"]')\n        \n        // Verify paused status\n        const pausedStatus = await activeSequence.locator('[data-testid=\"sequence-status\"]').textContent()\n        expect(pausedStatus).toBe('PAUSED')\n        \n        // Resume sequence\n        await activeSequence.locator('[data-testid=\"resume-sequence-btn\"]').click()\n        await page.waitForSelector('[data-testid=\"sequence-resumed-success\"]')\n        \n        // Verify active status\n        const resumedStatus = await activeSequence.locator('[data-testid=\"sequence-status\"]').textContent()\n        expect(resumedStatus).toBe('ACTIVE')\n      }\n    })\n  })\n\n  test.describe('Error Handling and Edge Cases', () => {\n    test('should handle network failures gracefully', async ({ page }) => {\n      // Simulate network failure\n      await page.route('**/api/sequences/**', route => route.abort())\n      \n      await followUpPage.navigateToFollowUps()\n      \n      // Attempt to create sequence\n      await followUpPage.navigateToSequenceBuilder()\n      await followUpPage.createSequence('Network Test Sequence', 'Testing network failure')\n      \n      try {\n        await followUpPage.saveSequence()\n      } catch (error) {\n        // Should show appropriate error message\n        const errorMessage = await page.isVisible('[data-testid=\"network-error-message\"]')\n        expect(errorMessage).toBe(true)\n      }\n      \n      // Restore network\n      await page.unroute('**/api/sequences/**')\n    })\n\n    test('should validate form inputs correctly', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      await followUpPage.navigateToSequenceBuilder()\n      \n      // Try to save without required fields\n      await page.click('[data-testid=\"save-sequence-btn\"]')\n      \n      // Should show validation errors\n      const nameError = await page.isVisible('[data-testid=\"sequence-name-error\"]')\n      const stepsError = await page.isVisible('[data-testid=\"sequence-steps-error\"]')\n      \n      expect(nameError).toBe(true)\n      expect(stepsError).toBe(true)\n      \n      // Should not navigate away\n      const stillOnBuilder = await page.isVisible('[data-testid=\"sequence-builder\"]')\n      expect(stillOnBuilder).toBe(true)\n    })\n\n    test('should handle large sequence configurations', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      await followUpPage.navigateToSequenceBuilder()\n      \n      await followUpPage.createSequence('Large Sequence Test', 'Testing large sequence handling')\n      \n      // Add maximum allowed steps (e.g., 10 steps)\n      for (let i = 1; i <= 10; i++) {\n        await followUpPage.addSequenceStep({\n          delay: '7',\n          subject: `Step ${i}: Invoice {{invoiceNumber}}`,\n          content: `This is step ${i} of our follow-up sequence. Please review your invoice.`,\n          tone: 'BUSINESS',\n          language: 'ENGLISH'\n        })\n      }\n      \n      // Should handle all steps without performance issues\n      const stepCount = await page.locator('[data-testid^=\"step-\"]').count()\n      expect(stepCount).toBe(10)\n      \n      // Should save successfully\n      await followUpPage.saveSequence()\n      const saved = await page.isVisible('[data-testid=\"sequence-saved-success\"]')\n      expect(saved).toBe(true)\n    })\n  })\n\n  test.describe('Mobile Responsiveness', () => {\n    test('should work correctly on mobile devices', async ({ page, isMobile }) => {\n      if (!isMobile) {\n        // Set mobile viewport\n        await page.setViewportSize({ width: 375, height: 667 })\n      }\n      \n      await followUpPage.navigateToFollowUps()\n      \n      // Check mobile navigation\n      const mobileMenu = await page.isVisible('[data-testid=\"mobile-menu-toggle\"]')\n      if (mobileMenu) {\n        await page.click('[data-testid=\"mobile-menu-toggle\"]')\n        await page.waitForSelector('[data-testid=\"mobile-nav-menu\"]')\n      }\n      \n      // Verify key elements are accessible on mobile\n      const sequenceList = await page.isVisible('[data-testid=\"sequences-list\"]')\n      expect(sequenceList).toBe(true)\n      \n      const createButton = await page.isVisible('[data-testid=\"create-sequence-btn\"]')\n      expect(createButton).toBe(true)\n    })\n  })\n\n  test.describe('Accessibility Compliance', () => {\n    test('should meet accessibility standards', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      \n      // Check for proper heading structure\n      const h1Count = await page.locator('h1').count()\n      expect(h1Count).toBe(1) // Should have exactly one H1\n      \n      // Check for alt text on images\n      const images = await page.locator('img').all()\n      for (const img of images) {\n        const alt = await img.getAttribute('alt')\n        expect(alt).toBeTruthy() // All images should have alt text\n      }\n      \n      // Check for proper form labels\n      const inputs = await page.locator('input, textarea, select').all()\n      for (const input of inputs) {\n        const id = await input.getAttribute('id')\n        if (id) {\n          const label = await page.locator(`label[for=\"${id}\"]`).count()\n          const ariaLabel = await input.getAttribute('aria-label')\n          const ariaLabelledBy = await input.getAttribute('aria-labelledby')\n          \n          // Should have either a label, aria-label, or aria-labelledby\n          expect(label > 0 || ariaLabel || ariaLabelledBy).toBeTruthy()\n        }\n      }\n      \n      // Check for keyboard navigation\n      await page.keyboard.press('Tab')\n      const focusedElement = await page.locator(':focus')\n      expect(await focusedElement.count()).toBe(1) // Should have a focused element\n    })\n  })\n})"
       : [35;1m                                                                                                                       ^[0m
       `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL tests/analytics/uae-features-validation.test.ts
  ● Test suite failed to run

      [31mx[0m Expected '>', got 'companyId'
        ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/tests/analytics/uae-features-validation.test.ts[0m:66:1]
     [2m63[0m | 
     [2m64[0m |       render(
     [2m65[0m |         <UAEBusinessIntelligence
     [2m66[0m |           companyId="company-123"
        : [35;1m          ^^^^^^^^^[0m
     [2m67[0m |           dateRange="90"
     [2m68[0m |           locale="en"
     [2m69[0m |         />
        `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL tests/analytics/sprint-3.1-analytics-dashboard.test.ts
  ● Test suite failed to run

      [31mx[0m Expected '>', got 'session'
        ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/tests/analytics/sprint-3.1-analytics-dashboard.test.ts[0m:61:1]
     [2m58[0m | 
     [2m59[0m | const renderWithSession = (component: React.ReactElement) => {
     [2m60[0m |   return render(
     [2m61[0m |     <SessionProvider session={mockSession}>
        : [35;1m                     ^^^^^^^[0m
     [2m62[0m |       {component}
     [2m63[0m |     </SessionProvider>
     [2m64[0m |   )
        `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL tests/analytics/security-data-isolation.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/analytics/security-data-isolation.test.ts'

       6 | import { describe, it, expect, beforeEach, afterEach, vi } from 'vitest'
       7 | import { NextRequest } from 'next/server'
    >  8 | import { getServerSession } from 'next-auth'
         |                 ^
       9 |
      10 | // Import API routes
      11 | import { GET as dashboardGET } from '@/app/api/analytics/dashboard/route'

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/analytics/security-data-isolation.test.ts:8:17)

FAIL tests/analytics/payment-analytics.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/analytics/payment-analytics.test.ts'

       6 | import { describe, it, expect, beforeEach, afterEach, vi } from 'vitest'
       7 | import { Decimal } from 'decimal.js'
    >  8 | import { paymentAnalyticsService } from '@/lib/services/payment-analytics-service'
         |                 ^
       9 | import { prismaMock } from '../setup/prisma-mock'
      10 | import { createMockCompany, createMockInvoice, createMockPayment, createMockCustomer } from '../setup/analytics-fixtures'
      11 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/analytics/payment-analytics.test.ts:8:17)

FAIL tests/analytics/mobile-cross-browser.test.ts
  ● Test suite failed to run

      [31mx[0m Expected '>', got 'session'
         ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/tests/analytics/mobile-cross-browser.test.ts[0m:100:1]
     [2m 97[0m | 
     [2m 98[0m | const renderWithSession = (component: React.ReactElement) => {
     [2m 99[0m |   return render(
     [2m100[0m |     <SessionProvider session={mockSession}>
         : [35;1m                     ^^^^^^^[0m
     [2m101[0m |       {component}
     [2m102[0m |     </SessionProvider>
     [2m103[0m |   )
         `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL tests/analytics/kpi-calculation-engine.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/analytics/kpi-calculation-engine.test.ts'

       6 | import { describe, it, expect, beforeEach, afterEach, vi } from 'vitest'
       7 | import { Decimal } from 'decimal.js'
    >  8 | import { kpiCalculationEngine } from '@/lib/services/kpi-calculation-engine'
         |                 ^
       9 | import { prismaMock } from '../setup/prisma-mock'
      10 | import { createMockCompany, createMockAnalyticsFilters } from '../setup/analytics-fixtures'
      11 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/analytics/kpi-calculation-engine.test.ts:8:17)

FAIL tests/analytics/api-performance.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/analytics/api-performance.test.ts'

       6 | import { describe, it, expect, beforeEach, afterEach, vi } from 'vitest'
       7 | import { NextRequest } from 'next/server'
    >  8 | import { getServerSession } from 'next-auth'
         |                 ^
       9 |
      10 | // Import API routes
      11 | import { GET as dashboardGET } from '@/app/api/analytics/dashboard/route'

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/analytics/api-performance.test.ts:8:17)

FAIL tests/analytics/analytics-api.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/analytics/analytics-api.test.ts'

       6 | import { describe, it, expect, beforeEach, afterEach, vi } from 'vitest'
       7 | import { NextRequest } from 'next/server'
    >  8 | import { getServerSession } from 'next-auth'
         |                 ^
       9 | import { Decimal } from 'decimal.js'
      10 |
      11 | // Mock NextAuth

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/analytics/analytics-api.test.ts:8:17)

FAIL tests/critical-flows/pdf-upload-integration.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/import/upload/route.ts:20:20)
      at Object.<anonymous> (tests/critical-flows/pdf-upload-integration.test.ts:32:16)

FAIL src/__tests__/test-runner.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1056:18)
      at node_modules/@jest/core/build/index.js:1126:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/e2e/user-journey.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('UAEPay User Journey', () => {
        |      ^
      4 |   test('Complete user registration and dashboard navigation', async ({ page }) => {
      5 |     // Navigate to homepage
      6 |     await page.goto('/');

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.describe (tests/e2e/user-journey.spec.ts:3:6)

FAIL tests/e2e/invoice-workflow-e2e.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      37 | }
      38 |
    > 39 | test.describe('Complete Invoice Workflow E2E Tests - Sprint 1.5', () => {
         |      ^
      40 |   let companyData: any
      41 |   let invoiceData: any
      42 |

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.describe (tests/e2e/invoice-workflow-e2e.spec.ts:39:6)

FAIL tests/critical-flows/invoice-upload-e2e.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      12 | const TEST_PASSWORD = 'testpassword123'
      13 |
    > 14 | test.describe('Invoice Upload E2E Flow', () => {
         |      ^
      15 |   let page: Page
      16 |
      17 |   test.beforeEach(async ({ browser }) => {

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.describe (tests/critical-flows/invoice-upload-e2e.spec.ts:14:6)

FAIL src/components/follow-ups/__tests__/component-interactions.test.tsx (13.042 s)
  ● Console

    console.error
      Invalid value for prop `data-ondragend` on <div> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://react.dev/link/attribute-behavior

      191 |       }
      192 |
    > 193 |       render(<SequenceBuilder {...propsWithSequence} />)
          |             ^
      194 |
      195 |       const initialStepCount = screen.getAllByText(/Step \d/).length
      196 |

      at warnUnknownProperties (node_modules/react-dom/cjs/react-dom-client.development.js:3162:19)
      at validatePropertiesInDevelopment (node_modules/react-dom/cjs/react-dom-client.development.js:17117:9)
      at setInitialProperties (node_modules/react-dom/cjs/react-dom-client.development.js:17741:7)
      at completeWork (node_modules/react-dom/cjs/react-dom-client.development.js:11391:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at completeUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15268:19)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15149:11)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16231:7)
      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)
      at flushSpawnedWork (node_modules/react-dom/cjs/react-dom-client.development.js:15677:9)
      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15403:9)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/components/follow-ups/__tests__/component-interactions.test.tsx:193:13)

  ● Component Interactions › Step Addition and Removal › adds new email step and opens step editor

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r0»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r1»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r2»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</svg...

      157 |
      158 |       // Add a new EMAIL step
    > 159 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      160 |       await user.click(addStepSelect)
      161 |
      162 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:159:36)

  ● Component Interactions › Step Addition and Removal › adds new wait step with default configuration

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rk»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rl»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rm»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rk»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</svg...

      173 |       render(<SequenceBuilder {...defaultProps} />)
      174 |
    > 175 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      176 |       await user.click(addStepSelect)
      177 |
      178 |       const waitOption = screen.getByText('Wait')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:175:36)

  ● Component Interactions › Step Addition and Removal › removes step and updates sequence order

    TestingLibraryElementError: Unable to find an element with the text: /Step \d/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r18»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      193 |       render(<SequenceBuilder {...propsWithSequence} />)
      194 |
    > 195 |       const initialStepCount = screen.getAllByText(/Step \d/).length
          |                                       ^
      196 |
      197 |       // Find and click delete button for first step
      198 |       const deleteButtons = screen.getAllByRole('button', { name: /delete|remove/i })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:195:39)

  ● Component Interactions › Step Addition and Removal › duplicates step with correct configuration

    TestingLibraryElementError: Unable to find an element with the text: /Step \d/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r1o»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      217 |       render(<SequenceBuilder {...propsWithSequence} />)
      218 |
    > 219 |       const initialStepCount = screen.getAllByText(/Step \d/).length
          |                                       ^
      220 |
      221 |       // Find and click duplicate button
      222 |       const duplicateButtons = screen.getAllByRole('button', { name: /copy|duplicate/i })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:219:39)

  ● Component Interactions › Step Addition and Removal › maintains step order after addition and removal

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add.*step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r28»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r29»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r2a»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r28»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      238 |       // Add multiple steps
      239 |       for (let i = 0; i < 3; i++) {
    > 240 |         const addStepSelect = screen.getByRole('combobox', { name: /add.*step/i })
          |                                      ^
      241 |         await user.click(addStepSelect)
      242 |
      243 |         const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:240:38)

  ● Component Interactions › Timeline Updates When Steps Change › updates duration when adding wait steps

    TestingLibraryElementError: Found multiple elements with the text: /3\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m3.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m3.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r2s»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      269 |
      270 |       // Initial duration should be 3 days (one wait step)
    > 271 |       expect(screen.getByText(/3\.0 days/)).toBeInTheDocument()
          |                     ^
      272 |
      273 |       // Add another wait step
      274 |       const addStepSelect = screen.getByRole('combobox', { name: /add step/i })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:271:21)

  ● Component Interactions › Timeline Updates When Steps Change › updates step count display

    TestingLibraryElementError: Found multiple elements with the text: 2

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m2[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m2[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r3c»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      302 |       // Should show initial step count
      303 |       expect(screen.getByText('Total Steps:')).toBeInTheDocument()
    > 304 |       expect(screen.getByText('2')).toBeInTheDocument() // 2 steps initially
          |                     ^
      305 |
      306 |       // Add a new step
      307 |       const addStepSelect = screen.getByRole('combobox', { name: /add step/i })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:304:21)

  ● Component Interactions › Timeline Updates When Steps Change › recalculates when step configuration changes

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4c»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4d»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r4c»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      346 |
      347 |       // Edit the wait step to change duration
    > 348 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      349 |       if (editButtons.length > 1) {
      350 |         await user.click(editButtons[1]) // Second step (wait step)
      351 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:348:34)

  ● Component Interactions › Form Validation and Error Handling › validates step configuration before saving

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r5g»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r5h»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r5i»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r5g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      399 |
      400 |       // Add an email step without template
    > 401 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      402 |       await user.click(addStepSelect)
      403 |
      404 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:401:36)

  ● Component Interactions › Form Validation and Error Handling › clears validation errors when form is corrected

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Valid Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r64»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r65»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r66»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------
      list:

      Name "":
      [36m<ul[39m
        [33mclass[39m=[32m"space-y-1"[39m
      [36m/>[39m

      --------------------------------------------------
      listitem:

      Name "":
      [36m<li[39m
        [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
      [36m/>[39m

      Name "":
      [36m<li[39m
        [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
      [36m/>[39m

      Name "":
      [36m<li[39m
        [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Valid Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r64»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                 ...

      438 |
      439 |       // Add a valid step
    > 440 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      441 |       await user.click(addStepSelect)
      442 |
      443 |       const waitOption = screen.getByText('Wait')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:440:36)

  ● Component Interactions › Form Validation and Error Handling › handles network errors gracefully

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r6o»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r6p»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r6q»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r6o»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      472 |
      473 |       // Add valid step
    > 474 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      475 |       await user.click(addStepSelect)
      476 |
      477 |       const waitOption = screen.getByText('Wait')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:474:36)

  ● Component Interactions › Save and Preview Functionality › saves sequence with valid configuration

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r7c»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r7d»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r7e»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r7c»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      511 |
      512 |       // Add valid step
    > 513 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      514 |       await user.click(addStepSelect)
      515 |
      516 |       const waitOption = screen.getByText('Wait')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:513:36)

  ● Component Interactions › Save and Preview Functionality › disables test functionality when no steps exist

    TestingLibraryElementError: Found multiple elements with the role "button" and name `/test sequence/i`

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
      [33mdata-slot[39m=[32m"button"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-test-tube h-4 w-4 mr-2"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M8.5 2h7"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M14.5 16h-5"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mTest Sequence[0m
    [36m</button>[39m

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
      [33mdata-slot[39m=[32m"button"[39m
      [33mdisabled[39m=[32m""[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-test-tube h-4 w-4 mr-2"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M8.5 2h7"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M14.5 16h-5"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mTest Sequence[0m
    [36m</button>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r9o»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      578 |
      579 |       // Test button should be disabled when no steps exist
    > 580 |       const testButton = screen.getByRole('button', { name: /test sequence/i })
          |                                 ^
      581 |       expect(testButton).toBeDisabled()
      582 |     })
      583 |   })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:580:33)

  ● Component Interactions › Template Selection Integration › loads templates on component mount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      587 |       render(<SequenceBuilder {...defaultProps} />)
      588 |
    > 589 |       expect(mockEmailTemplateStore().fetchTemplates).toHaveBeenCalled()
          |                                                       ^
      590 |     })
      591 |
      592 |     it('filters templates by FOLLOW_UP type', () => {

      at Object.toHaveBeenCalled (src/components/follow-ups/__tests__/component-interactions.test.tsx:589:55)

  ● Component Interactions › Template Selection Integration › filters templates by FOLLOW_UP type

    TypeError: Cannot read properties of undefined (reading '1')

      594 |
      595 |       const fetchCall = (mockEmailTemplateStore().fetchTemplates as jest.Mock).mock.calls[0]
    > 596 |       expect(fetchCall[1]).toEqual({ templateType: 'FOLLOW_UP' })
          |                       ^
      597 |     })
      598 |
      599 |     it('shows template selection in email step configuration', async () => {

      at Object.<anonymous> (src/components/follow-ups/__tests__/component-interactions.test.tsx:596:23)

  ● Component Interactions › Template Selection Integration › shows template selection in email step configuration

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rbk»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rbl»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rbm»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rbk»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      602 |
      603 |       // Add email step
    > 604 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      605 |       await user.click(addStepSelect)
      606 |
      607 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:604:36)

  ● Component Interactions › Template Selection Integration › allows switching between template and custom content

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rc8»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rc9»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rca»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rc8»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      619 |
      620 |       // Add email step
    > 621 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      622 |       await user.click(addStepSelect)
      623 |
      624 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:621:36)

  ● Component Interactions › Template Selection Integration › displays template preview when selected

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rcs»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rct»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rcu»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rcs»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      646 |
      647 |       // Add email step
    > 648 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      649 |       await user.click(addStepSelect)
      650 |
      651 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:648:36)

  ● Component Interactions › UAE Settings Integration › shows UAE business settings sidebar

    TestingLibraryElementError: Found multiple elements with the text: Respect UAE Holidays

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<label[39m
      [33mclass[39m=[32m"flex items-center gap-2 font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50 text-sm"[39m
      [33mdata-slot[39m=[32m"label"[39m
      [33mfor[39m=[32m"holidays"[39m
    [36m>[39m
      [0mRespect UAE Holidays[0m
    [36m</label>[39m

    Ignored nodes: comments, script, style
    [36m<label[39m
      [33mclass[39m=[32m"flex items-center gap-2 font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50 text-sm"[39m
      [33mdata-slot[39m=[32m"label"[39m
    [36m>[39m
      [0mRespect UAE Holidays[0m
    [36m</label>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rdg»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      670 |       expect(screen.getByText('UAE Business Settings')).toBeInTheDocument()
      671 |       expect(screen.getByText('Business Hours Only')).toBeInTheDocument()
    > 672 |       expect(screen.getByText('Respect UAE Holidays')).toBeInTheDocument()
          |                     ^
      673 |     })
      674 |
      675 |     it('synchronizes UAE settings between main form and sidebar', async () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:672:21)

  ● Component Interactions › UAE Settings Integration › synchronizes UAE settings between main form and sidebar

    expect(received).toHaveProperty(path, value)

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

      683 |       // Sidebar should reflect the change
      684 |       const sidebarToggle = screen.getAllByLabelText(/Business Hours Only/)[1]
    > 685 |       expect(sidebarToggle).toHaveProperty('checked', mainToggle.checked)
          |                             ^
      686 |     })
      687 |
      688 |     it('shows UAE compliance indicators on steps', () => {

      at Object.toHaveProperty (src/components/follow-ups/__tests__/component-interactions.test.tsx:685:29)

  ● Component Interactions › UAE Settings Integration › displays UAE business hours information

    TestingLibraryElementError: Unable to find an element with the text: Sunday-Thursday: 9 AM - 6 PM. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rf8»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      702 |       render(<SequenceBuilder {...defaultProps} />)
      703 |
    > 704 |       expect(screen.getByText('Sunday-Thursday: 9 AM - 6 PM')).toBeInTheDocument()
          |                     ^
      705 |       expect(screen.getByText('Avoids prayer times automatically')).toBeInTheDocument()
      706 |       expect(screen.getByText('Respects Islamic holidays')).toBeInTheDocument()
      707 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:704:21)

  ● Component Interactions › UAE Settings Integration › propagates UAE settings to new steps

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rfs»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rft»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rfu»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rfs»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      718 |
      719 |       // Add a new step
    > 720 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      721 |       await user.click(addStepSelect)
      722 |
      723 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:720:36)

  ● Component Interactions › Step Editor Dialog Integration › opens step editor when editing existing step

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rgg»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rgh»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rgg»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      749 |
      750 |       // Click edit button for first step
    > 751 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      752 |       await user.click(editButtons[0])
      753 |
      754 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:751:34)

  ● Component Interactions › Step Editor Dialog Integration › shows step configuration tabs

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rh0»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rh1»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rh0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      767 |       render(<SequenceBuilder {...propsWithSequence} />)
      768 |
    > 769 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      770 |       await user.click(editButtons[0])
      771 |
      772 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:769:34)

  ● Component Interactions › Step Editor Dialog Integration › updates step when saved from editor

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rhg»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rhh»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rhg»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      786 |       render(<SequenceBuilder {...propsWithSequence} />)
      787 |
    > 788 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      789 |       await user.click(editButtons[0])
      790 |
      791 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:788:34)

  ● Component Interactions › Step Editor Dialog Integration › cancels step editing without changes

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«ri0»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«ri1»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«ri0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      814 |       render(<SequenceBuilder {...propsWithSequence} />)
      815 |
    > 816 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      817 |       await user.click(editButtons[0])
      818 |
      819 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:816:34)

  ● Component Interactions › Step Editor Dialog Integration › shows step preview in editor

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rig»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rih»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rig»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      837 |       render(<SequenceBuilder {...propsWithSequence} />)
      838 |
    > 839 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      840 |       await user.click(editButtons[0])
      841 |
      842 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:839:34)

  ● Component Interactions › Real-time Updates and Synchronization › updates timeline when steps are modified

    TestingLibraryElementError: Found multiple elements with the text: /3\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m3.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m3.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rj0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      863 |
      864 |       // Initial duration
    > 865 |       const initialDuration = screen.getByText(/3\.0 days/)
          |                                      ^
      866 |       expect(initialDuration).toBeInTheDocument()
      867 |
      868 |       // Edit wait step to change duration

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:865:38)

  ● Component Interactions › Real-time Updates and Synchronization › maintains form state during step operations

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rjg»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rjh»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rji»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rjg»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      897 |
      898 |       // Add a step
    > 899 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      900 |       await user.click(addStepSelect)
      901 |
      902 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:899:36)

  ● Component Interactions › Real-time Updates and Synchronization › synchronizes UAE settings across components

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rk4»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rk5»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rk6»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rk4»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      921 |
      922 |       // Add a step and check UAE settings
    > 923 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      924 |       await user.click(addStepSelect)
      925 |
      926 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:923:36)

FAIL src/components/follow-ups/__tests__/sequence-builder.test.tsx (7.703 s)
  ● Console

    console.error
      Invalid value for prop `data-ondragend` on <div> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://react.dev/link/attribute-behavior

      298 |       ]
      299 |
    > 300 |       render(<SequenceBuilder {...propsWithSteps} />)
          |             ^
      301 |
      302 |       // Should calculate total duration: 3 days + 7 days = 10 days
      303 |       expect(screen.getByText(/10\.0 days/)).toBeInTheDocument()

      at warnUnknownProperties (node_modules/react-dom/cjs/react-dom-client.development.js:3162:19)
      at validatePropertiesInDevelopment (node_modules/react-dom/cjs/react-dom-client.development.js:17117:9)
      at setInitialProperties (node_modules/react-dom/cjs/react-dom-client.development.js:17741:7)
      at completeWork (node_modules/react-dom/cjs/react-dom-client.development.js:11391:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at completeUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15268:19)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15149:11)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14419:13)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16231:7)
      at flushSyncWorkAcrossRoots_impl (node_modules/react-dom/cjs/react-dom-client.development.js:16079:21)
      at flushSpawnedWork (node_modules/react-dom/cjs/react-dom-client.development.js:15677:9)
      at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15403:9)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14526:15)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (src/components/follow-ups/__tests__/sequence-builder.test.tsx:300:13)

  ● SequenceBuilder Component › Initial Render and Basic UI › displays sequence settings form correctly

    TestingLibraryElementError: Found a label with the text of: Sequence Type, however no form control was found associated to that label. Make sure you're using the "for" attribute or "aria-labelledby" attribute correctly.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rk»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</svg...

      166 |
      167 |       expect(screen.getByLabelText('Sequence Name *')).toBeInTheDocument()
    > 168 |       expect(screen.getByLabelText('Sequence Type')).toBeInTheDocument()
          |                     ^
      169 |       expect(screen.getByLabelText('Description *')).toBeInTheDocument()
      170 |       expect(screen.getByLabelText('UAE Business Hours Only')).toBeInTheDocument()
      171 |       expect(screen.getByLabelText('Respect UAE Holidays')).toBeInTheDocument()

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:108:40)
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByLabelText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:168:21)

  ● SequenceBuilder Component › Initial Render and Basic UI › shows UAE business settings sidebar

    TestingLibraryElementError: Unable to find an element with the text: Sunday-Thursday: 9 AM - 6 PM. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r18»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      176 |
      177 |       expect(screen.getByText('UAE Business Settings')).toBeInTheDocument()
    > 178 |       expect(screen.getByText('Sunday-Thursday: 9 AM - 6 PM')).toBeInTheDocument()
          |                     ^
      179 |       expect(screen.getByText('Avoids prayer times automatically')).toBeInTheDocument()
      180 |       expect(screen.getByText('Respects Islamic holidays')).toBeInTheDocument()
      181 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:178:21)

  ● SequenceBuilder Component › Sequence Configuration › selects sequence type correctly

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/sequence type/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r34»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r35»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r36»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r34»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      209 |       render(<SequenceBuilder {...defaultProps} />)
      210 |
    > 211 |       const typeSelect = screen.getByRole('combobox', { name: /sequence type/i })
          |                                 ^
      212 |       await user.click(typeSelect)
      213 |
      214 |       const gentleOption = screen.getByText(/gentle collection/i)

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:211:33)

  ● SequenceBuilder Component › Step Management › adds new EMAIL step correctly

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4c»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4d»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4e»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r4c»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      241 |       render(<SequenceBuilder {...defaultProps} />)
      242 |
    > 243 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      244 |       await user.click(addStepSelect)
      245 |
      246 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:243:36)

  ● SequenceBuilder Component › Step Management › adds new WAIT step correctly

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r50»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r51»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r52»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r50»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      256 |       render(<SequenceBuilder {...defaultProps} />)
      257 |
    > 258 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      259 |       await user.click(addStepSelect)
      260 |
      261 |       const waitOption = screen.getByText('Wait')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:258:36)

  ● SequenceBuilder Component › Step Management › calculates sequence duration correctly

    TestingLibraryElementError: Found multiple elements with the text: /10\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m10.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m10.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r5k»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      301 |
      302 |       // Should calculate total duration: 3 days + 7 days = 10 days
    > 303 |       expect(screen.getByText(/10\.0 days/)).toBeInTheDocument()
          |                     ^
      304 |     })
      305 |
      306 |     it('displays correct step statistics', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:303:21)

  ● SequenceBuilder Component › Step Management › displays correct step statistics

    TestingLibraryElementError: Found multiple elements with the text: 2

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m2[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m2[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r64»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      312 |       render(<SequenceBuilder {...propsWithSteps} />)
      313 |
    > 314 |       expect(screen.getByText('2')).toBeInTheDocument() // Total Steps
          |                     ^
      315 |       expect(screen.getByText('1')).toBeInTheDocument() // Email Steps
      316 |       expect(screen.getByText('1')).toBeInTheDocument() // Wait Steps
      317 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:314:21)

  ● SequenceBuilder Component › Drag and Drop Functionality › updates step order after drag and drop

    TestingLibraryElementError: Unable to find an element with the text: /Step \d/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r7k»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      361 |
      362 |       // Steps should be displayed in order
    > 363 |       const steps = screen.getAllByText(/Step \d/)
          |                            ^
      364 |       expect(steps).toHaveLength(2)
      365 |     })
      366 |   })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:363:28)

  ● SequenceBuilder Component › UAE Business Hours Integration › displays UAE business hours information

    TestingLibraryElementError: Unable to find an element with the text: Sunday-Thursday: 9 AM - 6 PM. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r84»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      370 |       render(<SequenceBuilder {...defaultProps} />)
      371 |
    > 372 |       expect(screen.getByText('Sunday-Thursday: 9 AM - 6 PM')).toBeInTheDocument()
          |                     ^
      373 |       expect(screen.getByText('Avoids prayer times automatically')).toBeInTheDocument()
      374 |       expect(screen.getByText('Respects Islamic holidays')).toBeInTheDocument()
      375 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:372:21)

  ● SequenceBuilder Component › Cultural Compliance Features › validates cultural appropriateness in sequence timing

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      459 |       )
      460 |
    > 461 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      462 |       expect(validation.score).toBeGreaterThan(70)
      463 |     })
      464 |   })

      at Object.toBe (src/components/follow-ups/__tests__/sequence-builder.test.tsx:461:38)

  ● SequenceBuilder Component › Template Integration › loads available templates correctly

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      468 |       render(<SequenceBuilder {...defaultProps} />)
      469 |
    > 470 |       expect(mockEmailTemplateStore().fetchTemplates).toHaveBeenCalled()
          |                                                       ^
      471 |     })
      472 |
      473 |     it('filters templates by type', () => {

      at Object.toHaveBeenCalled (src/components/follow-ups/__tests__/sequence-builder.test.tsx:470:55)

  ● SequenceBuilder Component › Template Integration › filters templates by type

    TypeError: Cannot read properties of undefined (reading '1')

      475 |
      476 |       const fetchTemplatesCall = (mockEmailTemplateStore().fetchTemplates as jest.Mock).mock.calls[0]
    > 477 |       expect(fetchTemplatesCall[1]).toEqual({ templateType: 'FOLLOW_UP' })
          |                                ^
      478 |     })
      479 |   })
      480 |

      at Object.<anonymous> (src/components/follow-ups/__tests__/sequence-builder.test.tsx:477:32)

  ● SequenceBuilder Component › Validation and Error Handling › validates step configuration

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rco»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rcp»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rcq»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rco»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      500 |
      501 |       // Add a step first
    > 502 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      503 |       await user.click(addStepSelect)
      504 |       const emailOption = screen.getByText('Email')
      505 |       await user.click(emailOption)

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:502:36)

  ● SequenceBuilder Component › Validation and Error Handling › handles save operation correctly

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rdc»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rdd»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rde»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rdc»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      536 |
      537 |       // Add a valid email step
    > 538 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      539 |       await user.click(addStepSelect)
      540 |       const emailOption = screen.getByText('Email')
      541 |       await user.click(emailOption)

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:538:36)

  ● SequenceBuilder Component › Complex Scenarios › handles multi-step sequences spanning weeks

    TestingLibraryElementError: Found multiple elements with the text: /17\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m17.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m17.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«re0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      630 |
      631 |       // Should calculate duration including weeks: 3 days + 14 days = 17 days
    > 632 |       expect(screen.getByText(/17\.0 days/)).toBeInTheDocument()
          |                     ^
      633 |       expect(screen.getByText('Final Notice')).toBeInTheDocument()
      634 |     })
      635 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:632:21)

  ● SequenceBuilder Component › Accessibility and Mobile Responsiveness › provides proper semantic structure

    TestingLibraryElementError: Unable to find an accessible element with the role "main"

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rg4»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rg5»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rg6»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rg4»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      726 |       render(<SequenceBuilder {...defaultProps} />)
      727 |
    > 728 |       expect(screen.getByRole('main') || screen.getByRole('region')).toBeInTheDocument()
          |                     ^
      729 |       expect(screen.getAllByRole('button').length).toBeGreaterThan(0)
      730 |       expect(screen.getAllByRole('textbox').length).toBeGreaterThan(0)
      731 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:728:21)

  ● SequenceBuilder Component › Step Configuration Dialog › opens step editor when editing a step

    TestingLibraryElementError: Unable to find a label with the text of: /edit/i

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rgo»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      743 |
      744 |       // Find and click edit button for first step
    > 745 |       const editButtons = screen.getAllByLabelText(/edit/i)
          |                                  ^
      746 |       if (editButtons.length > 0) {
      747 |         await user.click(editButtons[0])
      748 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:111:38)
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByLabelText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:745:34)

  ● SequenceBuilder Component › Step Configuration Dialog › allows step duplication

    TestingLibraryElementError: Unable to find a label with the text of: /copy/i

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rh8»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      763 |
      764 |       // Find and click duplicate button
    > 765 |       const duplicateButtons = screen.getAllByLabelText(/copy/i)
          |                                       ^
      766 |       if (duplicateButtons.length > 0) {
      767 |         await user.click(duplicateButtons[0])
      768 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:111:38)
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByLabelText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:765:39)

  ● SequenceBuilder Component › Step Configuration Dialog › allows step deletion

    TestingLibraryElementError: Unable to find a label with the text of: /delete/i

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rho»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      787 |
      788 |       // Find and click delete button
    > 789 |       const deleteButtons = screen.getAllByLabelText(/delete/i)
          |                                    ^
      790 |       if (deleteButtons.length > 0) {
      791 |         await user.click(deleteButtons[0])
      792 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:111:38)
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByLabelText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:789:36)

  ● SequenceBuilder Component › UAE Holiday Integration › respects prayer time avoidance

    TestingLibraryElementError: Unable to find an element with the text: Avoids prayer times automatically. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«ri8»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      821 |
      822 |       // Should show prayer time compliance in step settings
    > 823 |       expect(screen.getByText('Avoids prayer times automatically')).toBeInTheDocument()
          |                     ^
      824 |     })
      825 |   })
      826 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:823:21)

  ● SequenceBuilder Component › Performance and Edge Cases › handles large number of steps efficiently

    TestingLibraryElementError: Found multiple elements with the text: 20

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m20[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m20[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rjc»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m💌[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      863 |       render(<SequenceBuilder {...propsWithManySteps} />)
      864 |
    > 865 |       expect(screen.getByText('20')).toBeInTheDocument() // Total Steps count
          |                     ^
      866 |     })
      867 |
      868 |     it('handles network errors gracefully', async () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:865:21)

  ● SequenceBuilder Component › Performance and Edge Cases › handles network errors gracefully

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex h-full gap-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex-1 space-y-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
                [33mdata-slot[39m=[32m"card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                  [33mdata-slot[39m=[32m"card-header"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                    [33mdata-slot[39m=[32m"card-title"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                      [36m/>[39m
                      [36m<circle[39m
                        [33mcx[39m=[32m"12"[39m
                        [33mcy[39m=[32m"12"[39m
                        [33mr[39m=[32m"3"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                    [0mSequence Configuration[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                    [33mdata-slot[39m=[32m"card-description"[39m
                  [36m>[39m
                    [0mConfigure the basic settings for your follow-up sequence[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"px-6 space-y-4"[39m
                  [33mdata-slot[39m=[32m"card-content"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                        [33mdata-slot[39m=[32m"label"[39m
                        [33mfor[39m=[32m"name"[39m
                      [36m>[39m
                        [0mSequence Name *[0m
                      [36m</label>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                        [33mdata-slot[39m=[32m"input"[39m
                        [33mid[39m=[32m"name"[39m
                        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                        [33mvalue[39m=[32m"Test Sequence"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                        [33mdata-slot[39m=[32m"label"[39m
                        [33mfor[39m=[32m"type"[39m
                      [36m>[39m
                        [0mSequence Type[0m
                      [36m</label>[39m
                      [36m<button[39m
                        [33maria-autocomplete[39m=[32m"none"[39m
                        [33maria-controls[39m=[32m"radix-«rjs»"[39m
                        [33maria-expanded[39m=[32m"false"[39m
                        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                        [33mdata-state[39m=[32m"closed"[39m
                        [33mdir[39m=[32m"ltr"[39m
                        [33mrole[39m=[32m"combobox"[39m
                        [33mtype[39m=[32m"button"[39m
                      [36m>[39m
                        [36m<span[39m
                          [33mstyle[39m=[32m"pointer-events: none;"[39m
                        [36m>[39m
                          [0m💌[0m
                          [0m [0m
                          [0mGentle Collection[0m
                        [36m</span>[39m
                        [36m<svg[39m
                          [33maria-hidden[39m=[32m"true"[39m
                          [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                          [33mfill[39m=[32m"none"[39m
                          [33mheight[39m=[32m"24"[39m
                          [33mstroke[39m=[32m"currentColor"[39m
                          [33mstroke-linecap[39m=[32m"round"[39m
                          [33mstroke-linejoin[39m=[32m"round"[39m
                          [33mstroke-width[39m=[32m"2"[39m
                          [33mviewBox[39m=[32m"0 0 24 24"[39m
                          [33mwidth[39m=[32...

      886 |       await waitFor(() => {
      887 |         // Error should be handled by the component
    > 888 |         expect(mockAddSequenceError).toHaveBeenCalled()
          |                                      ^
      889 |       })
      890 |     })
      891 |   })

      at toHaveBeenCalled (src/components/follow-ups/__tests__/sequence-builder.test.tsx:888:38)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

Summary of all failing tests
FAIL src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts
  ● UAE Cultural Compliance Comprehensive Tests › Cultural Score Calculation (0-100 System) › Perfect Cultural Score Scenarios › should score Arabic content with Islamic phrases highly

    expect(received).toBeGreaterThan(expected)

    Expected: > 85
    Received:   84

      77 |         })
      78 |
    > 79 |         expect(result.score).toBeGreaterThan(85)
         |                              ^
      80 |         expect(result.breakdown.islamicEtiquette).toBeGreaterThan(90)
      81 |         expect(result.breakdown.greetingsAndClosings).toBeGreaterThan(85)
      82 |       })

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:79:30)

  ● UAE Cultural Compliance Comprehensive Tests › Cultural Score Calculation (0-100 System) › Cultural Score Penalties › should heavily penalize aggressive and demanding language

    expect(received).toBeLessThan(expected)

    Expected: < 40
    Received:   44

       98 |         })
       99 |
    > 100 |         expect(result.score).toBeLessThan(40)
          |                              ^
      101 |         expect(result.breakdown.languageAppropriate).toBeLessThan(50)
      102 |         expect(result.breakdown.greetingsAndClosings).toBeLessThan(30)
      103 |         expect(result.breakdown.toneRespectfulness).toBeLessThan(20)

      at Object.toBeLessThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:100:30)

  ● UAE Cultural Compliance Comprehensive Tests › Cultural Score Calculation (0-100 System) › Score Breakdown Analysis › should weight categories correctly in final score

    expect(received).toBeGreaterThan(expected)

    Expected: > 15
    Received:   14

      225 |
      226 |         // Good greetings should significantly impact final score (20% weight)
    > 227 |         expect(goodResult.score - badResult.score).toBeGreaterThan(15)
          |                                                    ^
      228 |       })
      229 |     })
      230 |   })

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:227:52)

  ● UAE Cultural Compliance Comprehensive Tests › Islamic Greetings and Business Etiquette › Appropriate Greeting Validation › should classify informal greetings as poor

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      284 |         informalGreetings.forEach(greeting => {
      285 |           const result = CulturalComplianceService.isAppropriateGreeting(greeting, 'en')
    > 286 |           expect(result.appropriate).toBe(false)
          |                                      ^
      287 |           expect(result.culturalLevel).toBe('poor')
      288 |           expect(result.suggestion).toContain('formal greetings')
      289 |         })

      at toBe (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:286:38)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:284:27)

  ● UAE Cultural Compliance Comprehensive Tests › Islamic Greetings and Business Etiquette › Islamic Business Phrases Integration › should recognize and reward common Islamic business phrases

    expect(received).toBeGreaterThan(expected)

    Expected: > 100
    Received:   100

      318 |             `Dear Customer, ${phrase}. Best regards, Company`
      319 |           )
    > 320 |           expect(result.breakdown.islamicEtiquette).toBeGreaterThan(100) // Bonus points
          |                                                     ^
      321 |           expect(result.score).toBeGreaterThan(70)
      322 |         })
      323 |       })

      at toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:320:53)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:316:24)

  ● UAE Cultural Compliance Comprehensive Tests › Ramadan Cultural Sensitivity › Ramadan Communication Adjustments › should adjust cultural scoring during Ramadan

    expect(received).toBeGreaterThan(expected)

    Expected: > 98
    Received:   98

      682 |         })
      683 |
    > 684 |         expect(ramadanScore.score).toBeGreaterThan(standardScore.score)
          |                                    ^
      685 |         expect(ramadanScore.breakdown.islamicEtiquette).toBeGreaterThan(90)
      686 |       })
      687 |

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:684:36)

  ● UAE Cultural Compliance Comprehensive Tests › Customer Relationship-Based Tone Adjustment › Government Customer Handling › should apply strictest cultural standards for government customers

    expect(received).toBeLessThan(expected)

    Expected: < 50
    Received:   76

      767 |         })
      768 |
    > 769 |         expect(governmentResult.score).toBeLessThan(50)
          |                                        ^
      770 |         expect(governmentResult.recommendations.some(r => 
      771 |           r.includes('formal language for government')
      772 |         )).toBe(true)

      at Object.toBeLessThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:769:40)

  ● UAE Cultural Compliance Comprehensive Tests › Customer Relationship-Based Tone Adjustment › VIP Customer Treatment › should maintain respectful but warm tone for VIP customers

    expect(received).toBeGreaterThan(expected)

    Expected: > 90
    Received:   70

      807 |
      808 |         expect(result.score).toBeGreaterThan(85)
    > 809 |         expect(result.breakdown.greetingsAndClosings).toBeGreaterThan(90)
          |                                                       ^
      810 |       })
      811 |     })
      812 |

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:809:55)

  ● UAE Cultural Compliance Comprehensive Tests › Integration and Real-World Scenarios › Complete Email Template Analysis › should analyze a complete UAE business email template

    expect(received).toBeGreaterThan(expected)

    Expected: > 90
    Received:   76

      1117 |         })
      1118 |
    > 1119 |         expect(result.score).toBeGreaterThan(90)
           |                              ^
      1120 |         expect(result.breakdown.islamicEtiquette).toBeGreaterThan(100) // Bonus points
      1121 |         expect(result.breakdown.greetingsAndClosings).toBeGreaterThan(95)
      1122 |         expect(result.breakdown.businessFormality).toBeGreaterThan(90)

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance-comprehensive.test.ts:1119:30)

FAIL tests/integration/follow-up-automation-integration.test.ts
  ● Follow-up Automation Integration Tests › Complete Follow-up Workflow › should execute complete 3-step follow-up sequence

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Complete Follow-up Workflow › should stop sequence when payment is received

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Complete Follow-up Workflow › should respect UAE business hours for scheduling

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Complete Follow-up Workflow › should validate cultural compliance before sending

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Complete Follow-up Workflow › should handle email delivery failures gracefully

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › High-Volume Processing › should process multiple sequences concurrently

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › High-Volume Processing › should handle sequence analytics for multiple executions

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Error Handling and Recovery › should handle database connection issues

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Error Handling and Recovery › should handle invalid sequence data gracefully

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Error Handling and Recovery › should prevent duplicate sequence executions

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › UAE Compliance Integration › should respect Islamic holidays when scheduling

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › UAE Compliance Integration › should avoid prayer times when scheduling

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › UAE Compliance Integration › should validate template variables are properly replaced

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Monitoring and Logging › should create comprehensive follow-up logs

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Monitoring and Logging › should track sequence execution status changes

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

  ● Follow-up Automation Integration Tests › Performance Benchmarks › should process sequences within performance targets

    PrismaClientInitializationError: 
    Invalid `prisma.companies.create()` invocation:


    Can't reach database server at `localhost:5432`

    Please make sure your database server is running at `localhost:5432`.

      75 |   async function setupTestData() {
      76 |     // Create test company
    > 77 |     testCompany = await prisma.companies.create({
         |                   ^
      78 |       data: {
      79 |         id: 'test-company-' + Date.now(),
      80 |         name: 'UAE Test Company LLC',

      at ei.handleRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:242:13)
      at ei.handleAndLogRequestError (node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12)
      at ei.request (node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12)
      at a (node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24)
      at setupTestData (tests/integration/follow-up-automation-integration.test.ts:77:19)
      at Object.<anonymous> (tests/integration/follow-up-automation-integration.test.ts:68:5)

FAIL src/lib/services/__tests__/uae-business-hours-service.test.ts
  ● UAEBusinessHoursService › Business Hours Detection › should delegate to vat-calculator for business hours check

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 2024-01-01T10:00:00.000Z, {"endHour": 18, "startHour": 8, "timezone": "Asia/Dubai", "workingDays": [0, 1, 2, 3, 4]}

    Number of calls: 0

      110 |
      111 |       expect(result).toBe(true)
    > 112 |       expect(mockIsUAEBusinessHours).toHaveBeenCalledWith(testDate, {
          |                                      ^
      113 |         workingDays: [0, 1, 2, 3, 4],
      114 |         startHour: 8,
      115 |         endHour: 18,

      at Object.toHaveBeenCalledWith (src/lib/services/__tests__/uae-business-hours-service.test.ts:112:38)

  ● UAEBusinessHoursService › Business Hours Detection › should handle different timezones correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 2024-01-01T10:00:00.000Z, ObjectContaining {"timezone": "UTC"}

    Number of calls: 0

      137 |       customService.isBusinessHours(testDate)
      138 |
    > 139 |       expect(mockIsUAEBusinessHours).toHaveBeenCalledWith(testDate, 
          |                                      ^
      140 |         expect.objectContaining({
      141 |           timezone: 'UTC'
      142 |         })

      at Object.toHaveBeenCalledWith (src/lib/services/__tests__/uae-business-hours-service.test.ts:139:38)

  ● UAEBusinessHoursService › Next Business Hour Calculation › should delegate to vat-calculator for next business hour

    expect(received).toBe(expected) // Object.is equality

    Expected: 2024-01-01T08:00:00.000Z
    Received: 2024-01-01T07:00:00.000Z

      153 |       const result = service.getNextBusinessHour(testDate)
      154 |
    > 155 |       expect(result).toBe(expectedDate)
          |                      ^
      156 |       expect(mockGetNextUAEBusinessHour).toHaveBeenCalledWith(testDate, {
      157 |         workingDays: [0, 1, 2, 3, 4],
      158 |         startHour: 8,

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:155:22)

  ● UAEBusinessHoursService › Next Business Hour Calculation › should handle weekend transitions

    expect(received).toBe(expected) // Object.is equality

    Expected: 2024-01-07T08:00:00.000Z
    Received: 2024-01-07T04:00:00.000Z

      169 |       const result = service.getNextBusinessHour(fridayEvening)
      170 |
    > 171 |       expect(result).toBe(nextSunday)
          |                      ^
      172 |     })
      173 |   })
      174 |

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:171:22)

  ● UAEBusinessHoursService › Prayer Time Detection › should not detect prayer time outside buffer

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      268 |       const isPrayer = service.isPrayerTime(testDate)
      269 |
    > 270 |       expect(isPrayer).toBe(false)
          |                        ^
      271 |     })
      272 |
      273 |     it('should handle timezone conversion errors gracefully', () => {

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:270:24)

  ● UAEBusinessHoursService › Optimal Send Time Calculation › should avoid holidays

    expect(received).toBeGreaterThan(expected)

    Expected: > 1704103200000
    Received:   1704103200000

      329 |       const optimalTime = service.getOptimalSendTime(holidayDate)
      330 |
    > 331 |       expect(optimalTime.getTime()).toBeGreaterThan(holidayDate.getTime())
          |                                     ^
      332 |     })
      333 |
      334 |     it('should avoid prayer times', () => {

      at Object.toBeGreaterThan (src/lib/services/__tests__/uae-business-hours-service.test.ts:331:37)

  ● UAEBusinessHoursService › Optimal Send Time Calculation › should avoid prayer times

    expect(received).not.toBe(expected) // Object.is equality

    Expected: not 1704197700000

      339 |
      340 |       // Should move to a different time
    > 341 |       expect(optimalTime.getTime()).not.toBe(duringPrayer.getTime())
          |                                         ^
      342 |     })
      343 |
      344 |     it('should prevent infinite loops with fallback', () => {

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:341:41)

  ● UAEBusinessHoursService › Optimal Send Time Calculation › should prevent infinite loops with fallback

    expect(received).toBe(expected) // Object.is equality

    Expected: 2025-10-02T06:19:00.242Z
    Received: 2025-10-01T06:19:00.242Z

      353 |       const optimalTime = service.getOptimalSendTime(baseDate)
      354 |
    > 355 |       expect(optimalTime).toBe(fallbackTime) // Should use fallback
          |                           ^
      356 |     })
      357 |   })
      358 |

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:355:27)

  ● UAEBusinessHoursService › Next Available Send Time with Schedule Config › should avoid prayer times when configured

    expect(received).toBeGreaterThan(expected)

    Expected: > 1704110400000
    Received:   1704110400000

      405 |
      406 |       // Should move away from prayer time
    > 407 |       expect(nextTime.getTime()).toBeGreaterThan(noonTime.getTime())
          |                                  ^
      408 |     })
      409 |
      410 |     it('should respect business hours', () => {

      at Object.toBeGreaterThan (src/lib/services/__tests__/uae-business-hours-service.test.ts:407:34)

  ● UAEBusinessHoursService › Next Available Send Time with Schedule Config › should respect business hours

    expect(received).toBe(expected) // Object.is equality

    Expected: 2024-01-08T08:00:00.000Z
    Received: 2024-01-02T06:00:00.000Z

      417 |       const nextTime = service.getNextAvailableSendTime(eveningTime)
      418 |
    > 419 |       expect(nextTime).toBe(nextBusinessTime)
          |                        ^
      420 |     })
      421 |
      422 |     it('should avoid holidays', () => {

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:419:24)

  ● UAEBusinessHoursService › Next Available Send Time with Schedule Config › should avoid holidays

    expect(received).toBeGreaterThan(expected)

    Expected: > 1704103200000
    Received:   1704103200000

      426 |       const nextTime = service.getNextAvailableSendTime(holidayDate)
      427 |
    > 428 |       expect(nextTime.getTime()).toBeGreaterThan(holidayDate.getTime())
          |                                  ^
      429 |     })
      430 |
      431 |     it('should use fallback when no optimal time found within iterations', () => {

      at Object.toBeGreaterThan (src/lib/services/__tests__/uae-business-hours-service.test.ts:428:34)

  ● UAEBusinessHoursService › Next Available Send Time with Schedule Config › should use fallback when no optimal time found within iterations

    expect(received).toBe(expected) // Object.is equality

    Expected: 2024-01-08T08:00:00.000Z
    Received: 2025-10-01T06:19:00.271Z

      439 |       const nextTime = service.getNextAvailableSendTime(baseDate)
      440 |
    > 441 |       expect(nextTime).toBe(fallbackTime)
          |                        ^
      442 |     })
      443 |   })
      444 |

      at Object.toBe (src/lib/services/__tests__/uae-business-hours-service.test.ts:441:24)

FAIL src/app/api/cron/process-sequences/__tests__/route.test.ts
  ● /api/cron/process-sequences › POST - Main Cron Processing › Authentication and Authorization › should accept Vercel cron headers

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      179 |         const data = await response.json()
      180 |
    > 181 |         expect(response.status).toBe(200)
          |                                 ^
      182 |         expect(data.success).toBe(true)
      183 |       })
      184 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:181:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Authentication and Authorization › should accept GitHub Actions user agent

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      195 |         const data = await response.json()
      196 |
    > 197 |         expect(response.status).toBe(200)
          |                                 ^
      198 |         expect(data.success).toBe(true)
      199 |       })
      200 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:197:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Authentication and Authorization › should allow localhost during development

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

      210 |         const data = await response.json()
      211 |
    > 212 |         expect(response.status).toBe(200)
          |                                 ^
      213 |         expect(data.success).toBe(true)
      214 |       })
      215 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:212:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Authentication and Authorization › should reject unrecognized sources

    expect(received).toBe(expected) // Object.is equality

    Expected: "Unrecognized cron source"
    Received: "Invalid cron secret"

      227 |
      228 |         expect(response.status).toBe(401)
    > 229 |         expect(data.details).toBe('Unrecognized cron source')
          |                              ^
      230 |       })
      231 |     })
      232 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:229:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › UAE Business Hours Compliance › should skip processing outside UAE business hours

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      244 |         expect(response.status).toBe(200)
      245 |         expect(data.success).toBe(true)
    > 246 |         expect(data.skipped).toBe(true)
          |                              ^
      247 |         expect(data.reason).toContain('Outside UAE business hours')
      248 |         expect(data.nextRun).toBeDefined()
      249 |       })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:246:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › UAE Business Hours Compliance › should skip processing on UAE holidays

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      257 |
      258 |         expect(response.status).toBe(200)
    > 259 |         expect(data.skipped).toBe(true)
          |                              ^
      260 |         expect(data.reason).toContain('UAE holiday')
      261 |       })
      262 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:259:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › UAE Business Hours Compliance › should skip processing during prayer times

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      269 |
      270 |         expect(response.status).toBe(200)
    > 271 |         expect(data.skipped).toBe(true)
          |                              ^
      272 |         expect(data.reason).toContain('Prayer time')
      273 |       })
      274 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:271:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Sequence Processing Flow › should execute all processing steps in correct order

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      298 |         const { emailSchedulingService } = require('@/lib/services/email-scheduling-service')
      299 |
    > 300 |         expect(sequenceTriggersService.monitorInvoiceEvents).toHaveBeenCalled()
          |                                                              ^
      301 |         expect(sequenceExecutionService.processPendingExecutions).toHaveBeenCalled()
      302 |         expect(emailSchedulingService.processScheduledEmails).toHaveBeenCalled()
      303 |       })

      at Object.toHaveBeenCalled (src/app/api/cron/process-sequences/__tests__/route.test.ts:300:62)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Sequence Processing Flow › should return comprehensive processing summary

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 4

      Object {
    -   "successRate": 76.67,
    -   "totalFailed": 3,
    -   "totalProcessed": 30,
    -   "totalSuccessful": 23,
    +   "successRate": 100,
    +   "totalFailed": 0,
    +   "totalProcessed": 0,
    +   "totalSuccessful": 0,
      }

      307 |         const data = await response.json()
      308 |
    > 309 |         expect(data.summary).toEqual({
          |                              ^
      310 |           totalProcessed: 30, // 5 + 10 + 15
      311 |           totalSuccessful: 23, // 3 + 8 + 12
      312 |           totalFailed: 3, // 0 + 2 + 1

      at Object.toEqual (src/app/api/cron/process-sequences/__tests__/route.test.ts:309:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Sequence Processing Flow › should include performance metrics

    expect(received).toBeInstanceOf(expected)

    Expected constructor: String

    Received value has no prototype
    Received value: "2025-10-01T07:19:00.447Z"

      341 |         expect(typeof data.duration).toBe('number')
      342 |         expect(data.duration).toBeGreaterThan(0)
    > 343 |         expect(data.nextRun).toBeInstanceOf(String)
          |                              ^
      344 |       })
      345 |
      346 |       it('should handle warnings from processing steps', async () => {

      at Object.toBeInstanceOf (src/app/api/cron/process-sequences/__tests__/route.test.ts:343:30)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Sequence Processing Flow › should handle warnings from processing steps

    expect(received).toContain(expected) // indexOf

    Expected value: "5 emails rescheduled due to timing constraints"
    Received array: []

      356 |         const data = await response.json()
      357 |
    > 358 |         expect(data.warnings).toContain('5 emails rescheduled due to timing constraints')
          |                               ^
      359 |       })
      360 |
      361 |       it('should collect and report errors from all steps', async () => {

      at Object.toContain (src/app/api/cron/process-sequences/__tests__/route.test.ts:358:31)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Sequence Processing Flow › should collect and report errors from all steps

    expect(received).toContain(expected) // indexOf

    Expected value: "Database timeout"
    Received array: ["Monitoring failed: Cannot read properties of undefined (reading 'findMany')", "Health check failed: Cannot read properties of undefined (reading 'count')"]

      379 |         const data = await response.json()
      380 |
    > 381 |         expect(data.errors).toContain('Database timeout')
          |                             ^
      382 |         expect(data.errors).toContain('Invalid sequence configuration')
      383 |         expect(data.errors).toContain('Email service unavailable')
      384 |       })

      at Object.toContain (src/app/api/cron/process-sequences/__tests__/route.test.ts:381:29)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Health Checks and Monitoring › should perform database health check

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "SELECT 1"
    Received: ["SELECT 1"]

    Number of calls: 1

      391 |
      392 |         const { prisma } = require('@/lib/prisma')
    > 393 |         expect(prisma.$queryRaw).toHaveBeenCalledWith(expect.stringContaining('SELECT 1'))
          |                                  ^
      394 |         expect(data.success).toBe(true)
      395 |       })
      396 |

      at Object.toHaveBeenCalledWith (src/app/api/cron/process-sequences/__tests__/route.test.ts:393:34)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Health Checks and Monitoring › should detect stuck sequences

    Property `followUpLog` does not exist in the provided object

      398 |         const { prisma } = require('@/lib/prisma')
      399 |         // Mock count query for health checks
    > 400 |         jest.spyOn(prisma, 'followUpLog').mockReturnValue({
          |              ^
      401 |           count: jest.fn().mockResolvedValue(15) // More than 10 stuck sequences
      402 |         } as any)
      403 |

      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:593:13)
      at Object.spyOn (src/app/api/cron/process-sequences/__tests__/route.test.ts:400:14)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Health Checks and Monitoring › should detect critical email queue health

    expect(received).toContain(expected) // indexOf

    Expected value: "Email queue in critical state"
    Received array: ["Monitoring failed: Cannot read properties of undefined (reading 'findMany')", "Health check failed: Cannot read properties of undefined (reading 'count')"]

      422 |         const data = await response.json()
      423 |
    > 424 |         expect(data.errors).toContain('Email queue in critical state')
          |                             ^
      425 |         expect(data.errors).toContain('High email failure rate: 60 failed in last hour')
      426 |       })
      427 |

      at Object.toContain (src/app/api/cron/process-sequences/__tests__/route.test.ts:424:29)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Health Checks and Monitoring › should detect large email queue

    expect(received).toContain(expected) // indexOf

    Expected value: "Large email queue: 1200 emails pending"
    Received array: []

      440 |         const data = await response.json()
      441 |
    > 442 |         expect(data.warnings).toContain('Large email queue: 1200 emails pending')
          |                               ^
      443 |         expect(data.warnings).toContain('Email queue showing warning signs')
      444 |       })
      445 |

      at Object.toContain (src/app/api/cron/process-sequences/__tests__/route.test.ts:442:31)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Activity Logging › should log successful processing activity

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "data": ObjectContaining {
    +   "data": Object {
          "companyId": "system",
    -     "description": StringContaining "Processed 5 triggers, 10 executions, 15 emails",
    -     "metadata": ObjectContaining {
    +     "description": "Processed 0 triggers, 0 executions, 0 emails in 0ms",
    +     "id": "mock-uuid-3runverz6",
    +     "metadata": Object {
    +       "duration": 0,
    +       "endTime": 2025-10-01T06:19:00.482Z,
    +       "errors": Array [
    +         "Monitoring failed: Cannot read properties of undefined (reading 'findMany')",
    +         "Health check failed: Cannot read properties of undefined (reading 'count')",
    +       ],
            "failed": Object {
    -         "emails": 1,
    -         "executions": 2,
    -         "triggers": 2,
    +         "emails": 0,
    +         "executions": 0,
    +         "triggers": 0,
            },
            "isError": false,
            "processed": Object {
    -         "emails": 15,
    -         "executions": 10,
    -         "triggers": 5,
    +         "emails": 0,
    +         "executions": 0,
    +         "triggers": 0,
            },
    +       "startTime": 2025-10-01T06:19:00.482Z,
            "successful": Object {
    -         "emails": 12,
    -         "executions": 8,
    -         "triggers": 3,
    +         "emails": 0,
    +         "executions": 0,
    +         "triggers": 0,
            },
    +       "warnings": Array [],
          },
          "type": "SEQUENCE_PROCESSING",
          "userId": "cron-job",
        },
      },

    Number of calls: 1

      462 |
      463 |         const { prisma } = require('@/lib/prisma')
    > 464 |         expect(prisma.activities.create).toHaveBeenCalledWith({
          |                                          ^
      465 |           data: expect.objectContaining({
      466 |             companyId: 'system',
      467 |             userId: 'cron-job',

      at Object.toHaveBeenCalledWith (src/app/api/cron/process-sequences/__tests__/route.test.ts:464:42)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Activity Logging › should log failure activity on errors

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

      487 |         const data = await response.json()
      488 |
    > 489 |         expect(response.status).toBe(500)
          |                                 ^
      490 |         expect(data.success).toBe(false)
      491 |
      492 |         const { prisma } = require('@/lib/prisma')

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:489:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Next Run Time Calculation › should schedule next run for next business day when needed

    expect(received).toEqual(expected) // deep equality

    Expected: 2025-10-01T21:19:00.488Z
    Received: 2025-10-01T07:19:00.489Z

      526 |         const data = await response.json()
      527 |
    > 528 |         expect(new Date(data.nextRun)).toEqual(nextBusinessDay)
          |                                        ^
      529 |       })
      530 |     })
      531 |

      at Object.toEqual (src/app/api/cron/process-sequences/__tests__/route.test.ts:528:40)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Error Handling and Recovery › should handle trigger service failures gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

      540 |         const data = await response.json()
      541 |
    > 542 |         expect(response.status).toBe(500)
          |                                 ^
      543 |         expect(data.success).toBe(false)
      544 |         expect(data.error).toBe('Sequence processing failed')
      545 |         expect(data.details).toBe('Trigger service unavailable')

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:542:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Error Handling and Recovery › should handle execution service failures gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

      555 |         const data = await response.json()
      556 |
    > 557 |         expect(response.status).toBe(500)
          |                                 ^
      558 |         expect(data.success).toBe(false)
      559 |         expect(data.details).toBe('Execution service crashed')
      560 |       })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:557:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Error Handling and Recovery › should handle email service failures gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 200

      569 |         const data = await response.json()
      570 |
    > 571 |         expect(response.status).toBe(500)
          |                                 ^
      572 |         expect(data.success).toBe(false)
      573 |         expect(data.details).toBe('SMTP server down')
      574 |       })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:571:33)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Error Handling and Recovery › should include error details and duration even on failure

    expect(received).toContain(expected) // indexOf

    Expected value: "Service failure"
    Received array: ["Monitoring failed: Cannot read properties of undefined (reading 'findMany')", "Health check failed: Cannot read properties of undefined (reading 'count')"]

      585 |         expect(data.duration).toBeDefined()
      586 |         expect(typeof data.duration).toBe('number')
    > 587 |         expect(data.errors).toContain('Service failure')
          |                             ^
      588 |       })
      589 |     })
      590 |

      at Object.toContain (src/app/api/cron/process-sequences/__tests__/route.test.ts:587:29)

  ● /api/cron/process-sequences › POST - Main Cron Processing › Performance and Load Handling › should handle high-volume processing results

    expect(received).toBe(expected) // Object.is equality

    Expected: 3500
    Received: 0

      632 |
      633 |         expect(response.status).toBe(200)
    > 634 |         expect(data.summary.totalProcessed).toBe(3500)
          |                                             ^
      635 |         expect(data.summary.totalSuccessful).toBe(3200)
      636 |         expect(data.summary.successRate).toBeCloseTo(91.43, 1)
      637 |       })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:634:45)

  ● /api/cron/process-sequences › GET - Cron Job Status › should include queue health information

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 4

      Object {
    -   "failedLastHour": 2,
    -   "queued": 50,
    -   "scheduledToday": 25,
    -   "status": "HEALTHY",
    +   "failedLastHour": 0,
    +   "queued": 0,
    +   "scheduledToday": 0,
    +   "status": "CRITICAL",
      }

      679 |       const data = await response.json()
      680 |
    > 681 |       expect(data.queueHealth).toEqual({
          |                                ^
      682 |         status: 'HEALTHY',
      683 |         queued: 50,
      684 |         scheduledToday: 25,

      at Object.toEqual (src/app/api/cron/process-sequences/__tests__/route.test.ts:681:32)

  ● /api/cron/process-sequences › GET - Cron Job Status › should show processing window status

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      722 |       const data = await response.json()
      723 |
    > 724 |       expect(data.shouldProcessNow).toBe(false)
          |                                     ^
      725 |       expect(data.processingWindow.reason).toContain('Outside UAE business hours')
      726 |       expect(data.processingWindow.nextAvailable).toBeDefined()
      727 |     })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:724:37)

  ● /api/cron/process-sequences › GET - Cron Job Status › should limit recent activity to 10 entries

    expect(received).toHaveLength(expected)

    Expected length: 10
    Received length: 15
    Received array:  [{"description": "Activity 0", "id": "activity-0", "metadata": {}, "timestamp": "2025-10-01T06:19:00.526Z"}, {"description": "Activity 1", "id": "activity-1", "metadata": {}, "timestamp": "2025-10-01T06:18:00.526Z"}, {"description": "Activity 2", "id": "activity-2", "metadata": {}, "timestamp": "2025-10-01T06:17:00.526Z"}, {"description": "Activity 3", "id": "activity-3", "metadata": {}, "timestamp": "2025-10-01T06:16:00.526Z"}, {"description": "Activity 4", "id": "activity-4", "metadata": {}, "timestamp": "2025-10-01T06:15:00.526Z"}, {"description": "Activity 5", "id": "activity-5", "metadata": {}, "timestamp": "2025-10-01T06:14:00.526Z"}, {"description": "Activity 6", "id": "activity-6", "metadata": {}, "timestamp": "2025-10-01T06:13:00.526Z"}, {"description": "Activity 7", "id": "activity-7", "metadata": {}, "timestamp": "2025-10-01T06:12:00.526Z"}, {"description": "Activity 8", "id": "activity-8", "metadata": {}, "timestamp": "2025-10-01T06:11:00.526Z"}, {"description": "Activity 9", "id": "activity-9", "metadata": {}, "timestamp": "2025-10-01T06:10:00.526Z"}, …]

      769 |       const data = await response.json()
      770 |
    > 771 |       expect(data.recentActivity).toHaveLength(10) // Should be limited
          |                                   ^
      772 |       expect(prisma.activities.findMany).toHaveBeenCalledWith(
      773 |         expect.objectContaining({
      774 |           take: 10

      at Object.toHaveLength (src/app/api/cron/process-sequences/__tests__/route.test.ts:771:35)

  ● /api/cron/process-sequences › Edge Cases and Security › should handle very long processing times

    expect(received).toBeGreaterThan(expected)

    Expected: > 2000
    Received:   0

      836 |
      837 |       expect(response.status).toBe(200)
    > 838 |       expect(data.duration).toBeGreaterThan(2000)
          |                             ^
      839 |     })
      840 |
      841 |     it('should prevent memory leaks with large error arrays', async () => {

      at Object.toBeGreaterThan (src/app/api/cron/process-sequences/__tests__/route.test.ts:838:29)

  ● /api/cron/process-sequences › Edge Cases and Security › should prevent memory leaks with large error arrays

    expect(received).toBe(expected) // Object.is equality

    Expected: 1000
    Received: 2

      853 |
      854 |       expect(response.status).toBe(200)
    > 855 |       expect(data.errors.length).toBe(1000)
          |                                  ^
      856 |       expect(Array.isArray(data.errors)).toBe(true)
      857 |     })
      858 |   })

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:855:34)

  ● /api/cron/process-sequences › Integration with UAE Business Context › should respect UAE weekend (Friday-Saturday)

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      868 |       const data = await response.json()
      869 |
    > 870 |       expect(data.skipped).toBe(true)
          |                            ^
      871 |       expect(data.reason).toContain('Outside UAE business hours')
      872 |     })
      873 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:870:28)

  ● /api/cron/process-sequences › Integration with UAE Business Context › should respect Islamic holidays

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      880 |       const data = await response.json()
      881 |
    > 882 |       expect(data.skipped).toBe(true)
          |                            ^
      883 |       expect(data.reason).toContain('UAE holiday')
      884 |     })
      885 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:882:28)

  ● /api/cron/process-sequences › Integration with UAE Business Context › should respect prayer times

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      892 |       const data = await response.json()
      893 |
    > 894 |       expect(data.skipped).toBe(true)
          |                            ^
      895 |       expect(data.reason).toContain('Prayer time - avoiding email sends')
      896 |     })
      897 |

      at Object.toBe (src/app/api/cron/process-sequences/__tests__/route.test.ts:894:28)

  ● /api/cron/process-sequences › Integration with UAE Business Context › should calculate next run considering UAE context

    expect(received).toEqual(expected) // deep equality

    Expected: 2025-10-01T21:19:00.538Z
    Received: 2025-10-01T07:19:00.538Z

      912 |       const data = await response.json()
      913 |
    > 914 |       expect(new Date(data.nextRun)).toEqual(nextUAEBusinessHour)
          |                                      ^
      915 |     })
      916 |   })
      917 | })

      at Object.toEqual (src/app/api/cron/process-sequences/__tests__/route.test.ts:914:38)

FAIL src/lib/services/__tests__/uae-islamic-calendar-compliance.test.ts
  ● UAE Islamic Calendar Compliance › Islamic Holiday Detection and Validation › should validate holiday schedule across year boundaries

    expect(received).toBeGreaterThan(expected)

    Expected: > 10
    Received:   10

      127 |
      128 |       expect(yearEnd2024.length).toBeGreaterThan(10)
    > 129 |       expect(yearStart2025.length).toBeGreaterThan(10)
          |                                    ^
      130 |
      131 |       // Should have different holiday sets
      132 |       const holiday2024Dates = yearEnd2024.map(h => h.date.getTime())

      at Object.toBeGreaterThan (src/lib/services/__tests__/uae-islamic-calendar-compliance.test.ts:129:36)

  ● UAE Islamic Calendar Compliance › Cultural Timing Optimization › should provide comprehensive cultural timing for Islamic calendar year

    expect(received).toBeGreaterThan(expected)

    Expected: > 8
    Received:   2

      295 |       )
      296 |
    > 297 |       expect(preferences.avoidancePeriods.length).toBeGreaterThan(8) // Multiple Islamic holidays
          |                                                   ^
      298 |       expect(preferences.culturalConsiderations.length).toBeGreaterThan(3)
      299 |
      300 |       // Should include major Islamic celebrations

      at Object.toBeGreaterThan (src/lib/services/__tests__/uae-islamic-calendar-compliance.test.ts:297:51)

FAIL src/lib/__tests__/uae-business-calendar-comprehensive.test.ts
  ● UAE Business Calendar Comprehensive Tests › UAE Business Week (Sunday-Thursday) › Business Days Calculation › should exclude holidays from business day count

    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 1

      166 |
      167 |         // Should exclude December 2 and 3 (holidays), count only Dec 1, 4, 5
    > 168 |         expect(businessDays).toBe(3)
          |                              ^
      169 |       })
      170 |
      171 |       it('should handle same day calculation', () => {

      at Object.toBe (src/lib/__tests__/uae-business-calendar-comprehensive.test.ts:168:30)

  ● UAE Business Calendar Comprehensive Tests › Prayer Time Awareness (5 Daily Prayers) › Prayer Time Integration with Scheduling › should respect prayer times in business hour calculations

    expect(received).not.toBe(expected) // Object.is equality

    Expected: not 1737003600000

      295 |
      296 |         // With avoidance should be different from without
    > 297 |         expect(timeWithAvoidance.getTime()).not.toBe(timeWithoutAvoidance.getTime())
          |                                                 ^
      298 |       })
      299 |     })
      300 |   })

      at Object.toBe (src/lib/__tests__/uae-business-calendar-comprehensive.test.ts:297:49)

  ● UAE Business Calendar Comprehensive Tests › Cultural Tone Recommendations › Contextual Tone Recommendations › should recommend urgent tone for very overdue payments

    expect(received).toBe(expected) // Object.is equality

    Expected: "URGENT"
    Received: "FIRM"

      593 |
      594 |         const tone = getRecommendedTone(context)
    > 595 |         expect(tone).toBe('URGENT')
          |                      ^
      596 |       })
      597 |
      598 |       it('should maintain professional tone for most standard scenarios', () => {

      at Object.toBe (src/lib/__tests__/uae-business-calendar-comprehensive.test.ts:595:22)

  ● UAE Business Calendar Comprehensive Tests › Cultural Tone Recommendations › Contextual Tone Recommendations › should protect long-term excellent customers

    expect(received).toBe(expected) // Object.is equality

    Expected: "GENTLE"
    Received: "PROFESSIONAL"

      629 |         const poorTone = getRecommendedTone(newPoorCustomer)
      630 |
    > 631 |         expect(excellentTone).toBe('GENTLE')
          |                               ^
      632 |         expect(poorTone).toBe('FIRM')
      633 |       })
      634 |     })

      at Object.toBe (src/lib/__tests__/uae-business-calendar-comprehensive.test.ts:631:31)

  ● UAE Business Calendar Comprehensive Tests › Configuration and Customization › Custom Business Hour Configurations › should handle prayer time configuration

    expect(received).not.toBe(expected) // Object.is equality

    Expected: not 1737003600000

      790 |
      791 |         // Should be different when prayer avoidance is enabled
    > 792 |         expect(timeWithAvoidance.getTime()).not.toBe(timeWithoutAvoidance.getTime())
          |                                                 ^
      793 |       })
      794 |     })
      795 |

      at Object.toBe (src/lib/__tests__/uae-business-calendar-comprehensive.test.ts:792:49)

FAIL src/app/api/consolidation/__tests__/consolidation-api.test.ts
  ● Consolidation API Endpoints › GET /api/consolidation/candidates › should return consolidation candidates

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:113:23)

  ● Consolidation API Endpoints › GET /api/consolidation/candidates › should apply filters correctly

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:164:23)

  ● Consolidation API Endpoints › GET /api/consolidation/candidates › should return 401 for unauthenticated requests

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:176:23)

  ● Consolidation API Endpoints › GET /api/consolidation/candidates › should handle service errors gracefully

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:189:23)

  ● Consolidation API Endpoints › POST /api/consolidation/send › should send consolidations successfully

    TypeError: Cannot read properties of undefined (reading 'findFirst')

      229 |       ;(customerConsolidationService.createConsolidatedReminder as jest.Mock)
      230 |         .mockResolvedValue(mockConsolidation)
    > 231 |       ;(prisma.follow_up_sequencess.findFirst as jest.Mock)
          |                                     ^
      232 |         .mockResolvedValue(mockSequence)
      233 |       ;(sequenceExecutionService.startConsolidatedSequenceExecution as jest.Mock)
      234 |         .mockResolvedValue(mockExecutionResult)

      at Object.findFirst (src/app/api/consolidation/__tests__/consolidation-api.test.ts:231:37)

  ● Consolidation API Endpoints › POST /api/consolidation/send › should validate request body

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:270:23)

  ● Consolidation API Endpoints › POST /api/consolidation/send › should limit batch size

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:289:23)

  ● Consolidation API Endpoints › POST /api/consolidation/send › should handle customer not found

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:311:23)

  ● Consolidation API Endpoints › GET /api/consolidation/metrics › should return consolidation metrics

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:368:23)

  ● Consolidation API Endpoints › GET /api/consolidation/metrics › should handle custom date ranges

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:400:23)

  ● Consolidation API Endpoints › GET /api/consolidation/[id] › should return specific consolidation details

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:439:9)

  ● Consolidation API Endpoints › GET /api/consolidation/[id] › should return 404 for non-existent consolidation

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:456:9)

  ● Consolidation API Endpoints › PUT /api/consolidation/[id] › should update consolidation successfully

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:497:23)

  ● Consolidation API Endpoints › PUT /api/consolidation/[id] › should prevent updates to already sent consolidations

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:528:23)

  ● Consolidation API Endpoints › DELETE /api/consolidation/[id] › should delete consolidation successfully

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:573:9)

  ● Consolidation API Endpoints › DELETE /api/consolidation/[id] › should prevent deletion of already sent consolidations

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:596:9)

  ● Consolidation API Endpoints › Company Data Isolation › should enforce company data isolation across all endpoints

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/consolidation/__tests__/consolidation-api.test.ts:624:9)

FAIL src/lib/services/__tests__/sequence-triggers-service.test.ts
  ● SequenceTriggersService › monitorInvoiceEvents › should successfully monitor and trigger sequences

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › monitorInvoiceEvents › should handle no active sequences

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › monitorInvoiceEvents › should skip inactive sequences

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › monitorInvoiceEvents › should handle errors gracefully

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › monitorInvoiceEvents › should prevent duplicate executions

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › monitorInvoiceEvents › should log successful trigger events

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Due Date Triggers › should trigger for overdue invoices

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Due Date Triggers › should not trigger for future due dates

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Due Date Triggers › should handle due date approaching triggers

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Invoice Status Triggers › should trigger only for specific statuses

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Invoice Status Triggers › should not trigger for paid invoices

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Payment-Related Triggers › should consider partial payments

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Condition Evaluation › Payment-Related Triggers › should not trigger for fully paid invoices

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Cooldown Period Management › should respect cooldown periods

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Cooldown Period Management › should allow triggers after cooldown expires

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Cooldown Period Management › should handle different cooldown periods per trigger type

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › UAE Business Hours Integration › should respect UAE business hours

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › UAE Business Hours Integration › should allow triggers during business hours

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › UAE Business Hours Integration › should defer triggers close to weekend

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Manual Triggers › should execute manual triggers successfully

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Manual Triggers › should log manual trigger activity

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Manual Triggers › should handle manual trigger failures

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Payment Event Handling › should stop sequences when payment is received

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Payment Event Handling › should log payment events

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Status Change Handling › should stop sequences when invoice is paid

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Status Change Handling › should trigger overdue sequences when status changes to overdue

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Status Change Handling › should not trigger sequences for invalid status transitions

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Rule Parsing › should parse default triggers from sequence name

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Rule Parsing › should parse overdue triggers from sequence name

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Rule Parsing › should parse custom triggers from metadata

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Trigger Rule Parsing › should handle malformed trigger configuration

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Candidate Invoice Selection › should find overdue invoices for overdue triggers

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Candidate Invoice Selection › should find approaching due date invoices

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Candidate Invoice Selection › should batch process large invoice sets

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Validation Rules › should reject invoices with very small amounts

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Validation Rules › should reject invoices with recent payment activity

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Invoice Validation Rules › should allow valid invoices

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Monitoring Metrics › should calculate comprehensive monitoring metrics

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Monitoring Metrics › should identify most common trigger types

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Monitoring Metrics › should handle empty metrics gracefully

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Monitoring Metrics › should filter metrics by company when specified

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Error Handling and Edge Cases › should handle sequence execution failures gracefully

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Error Handling and Edge Cases › should handle database connection failures

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Error Handling and Edge Cases › should handle missing invoice data

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Error Handling and Edge Cases › should handle malformed sequence data

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Performance and Scalability › should handle large number of sequences efficiently

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Performance and Scalability › should batch process invoices efficiently

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

  ● SequenceTriggersService › Performance and Scalability › should handle concurrent trigger processing

    TypeError: Cannot read properties of undefined (reading 'findMany')

      154 |     const { uaeBusinessHours } = require('../uae-business-hours-service')
      155 |
    > 156 |     prisma.follow_up_sequences.findMany.mockResolvedValue([mockSequence])
          |                                ^
      157 |     prisma.invoices.findMany.mockResolvedValue([mockInvoice])
      158 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      159 |     prisma.payments.findMany.mockResolvedValue([])

      at Object.findMany (src/lib/services/__tests__/sequence-triggers-service.test.ts:156:32)

FAIL src/lib/services/__tests__/cultural-compliance-enhanced.test.ts
  ● Enhanced Cultural Compliance Service › Template Content Analysis › should flag inappropriate demanding language

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      159 |
      160 |       expect(analysis.isValid).toBe(false)
    > 161 |       expect(analysis.languageAppropriate).toBe(false)
          |                                            ^
      162 |       expect(analysis.issues.length).toBeGreaterThan(0)
      163 |       expect(analysis.improvements.length).toBeGreaterThan(0)
      164 |     })

      at Object.toBe (src/lib/services/__tests__/cultural-compliance-enhanced.test.ts:161:44)

  ● Enhanced Cultural Compliance Service › Cultural Score Calculation › should calculate high score for culturally appropriate content

    expect(received).toBeGreaterThan(expected)

    Expected: > 100
    Received:   100

      295 |
      296 |       expect(result.score).toBeGreaterThan(85)
    > 297 |       expect(result.breakdown.islamicEtiquette).toBeGreaterThan(100) // Bonus for Islamic phrases
          |                                                 ^
      298 |       expect(result.breakdown.greetingsAndClosings).toBeGreaterThan(80)
      299 |       expect(result.breakdown.toneRespectfulness).toBeGreaterThan(80)
      300 |     })

      at Object.toBeGreaterThan (src/lib/services/__tests__/cultural-compliance-enhanced.test.ts:297:49)

FAIL src/lib/services/__tests__/payment-workflow-service.test.ts
  ● PaymentWorkflowService › processPaymentWorkflow › should trigger status transition to PAID when payment completes invoice

    expect(received).toMatchObject(expected)

    Matcher error: received value must be a non-null object

    Received has value: undefined

      180 |       )
      181 |
    > 182 |       expect(result.statusTransition).toMatchObject({
          |                                       ^
      183 |         from: InvoiceStatus.SENT,
      184 |         to: InvoiceStatus.PAID,
      185 |         automatic: true

      at Object.toMatchObject (src/lib/services/__tests__/payment-workflow-service.test.ts:182:39)

  ● PaymentWorkflowService › processPaymentWorkflow › should handle payment_overdue_cleared event

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      184 |     return await prisma.$transaction(async (tx) => {
      185 |       // Fetch invoice with related data
    > 186 |       const invoice = await tx.invoices.findUnique({
          |                                         ^
      187 |         where: { id: invoiceId },
      188 |         include: {
      189 |           payments: { select: { amount: true, paymentDate: true } },

      at findUnique (src/lib/services/invoice-status-service.ts:186:41)
      at Object.callback (src/lib/services/__tests__/payment-workflow-service.test.ts:222:22)
      at InvoiceStatusService.$transaction [as updateInvoiceStatus] (src/lib/services/invoice-status-service.ts:184:25)
      at updateInvoiceStatus (src/lib/services/payment-workflow-service.ts:164:57)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:222:16)
      at PaymentWorkflowService.processPaymentWorkflow (src/lib/services/payment-workflow-service.ts:120:12)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:239:22)

  ● PaymentWorkflowService › processPaymentWorkflow › should handle payment_reversed event

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      184 |     return await prisma.$transaction(async (tx) => {
      185 |       // Fetch invoice with related data
    > 186 |       const invoice = await tx.invoices.findUnique({
          |                                         ^
      187 |         where: { id: invoiceId },
      188 |         include: {
      189 |           payments: { select: { amount: true, paymentDate: true } },

      at findUnique (src/lib/services/invoice-status-service.ts:186:41)
      at Object.callback (src/lib/services/__tests__/payment-workflow-service.test.ts:273:22)
      at InvoiceStatusService.$transaction [as updateInvoiceStatus] (src/lib/services/invoice-status-service.ts:184:25)
      at updateInvoiceStatus (src/lib/services/payment-workflow-service.ts:164:57)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:273:16)
      at PaymentWorkflowService.processPaymentWorkflow (src/lib/services/payment-workflow-service.ts:120:12)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:290:22)

  ● PaymentWorkflowService › processBatchPaymentWorkflow › should process multiple payment events successfully

    expect(received).toMatchObject(expected)

    - Expected  - 1
    + Received  + 1

    @@ -1,8 +1,8 @@
      Object {
        "aggregatedSummary": Object {
    -     "formattedTotalAmount": "AED 3000.00",
    +     "formattedTotalAmount": "AED 3,000.00",
          "invoicesFullyPaid": 1,
          "invoicesPartiallyPaid": 1,
          "statusTransitionsTriggered": 0,
          "totalAmountProcessed": 3000,
        },

      416 |       )
      417 |
    > 418 |       expect(result).toMatchObject({
          |                      ^
      419 |         totalRequested: 2,
      420 |         successCount: 2,
      421 |         failedCount: 0,

      at Object.toMatchObject (src/lib/services/__tests__/payment-workflow-service.test.ts:418:22)

  ● PaymentWorkflowService › processPaymentNotification › should handle failed payment notification

    expect(received).rejects.toThrow(expected)

    Expected substring: "Payment failed - no workflow processing required"
    Received message:   "Cannot read properties of undefined (reading 'findFirst')"

          392 |
          393 |       // Check if payment already exists
        > 394 |       const existingPayment = await tx.payments.findFirst({
              |                                                 ^
          395 |         where: { 
          396 |           invoiceId: invoice.id,
          397 |           reference: notification.externalPaymentId

      at findFirst (src/lib/services/payment-workflow-service.ts:394:49)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:688:16)
      at PaymentWorkflowService.processPaymentNotification (src/lib/services/payment-workflow-service.ts:375:12)
      at Object.<anonymous> (src/lib/services/__tests__/payment-workflow-service.test.ts:698:7)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (src/lib/services/__tests__/payment-workflow-service.test.ts:703:17)

  ● PaymentWorkflowService › UAE Business Rules Compliance › should generate correct compliance flags

    expect(received).toContain(expected) // indexOf

    Expected value: "TRN_COMPLIANT"
    Received array: []

      795 |       )
      796 |
    > 797 |       expect(result.businessRules.complianceFlags).toContain('TRN_COMPLIANT')
          |                                                    ^
      798 |       expect(result.businessRules.complianceFlags).toContain('BANK_TRANSFER_TRACEABLE')
      799 |       expect(result.businessRules.complianceFlags).toContain('REFERENCE_PROVIDED')
      800 |       expect(result.businessRules.complianceFlags).toContain('PROCESSED_BUSINESS_HOURS')

      at Object.toContain (src/lib/services/__tests__/payment-workflow-service.test.ts:797:52)

FAIL src/app/api/invoices/__tests__/route.test.ts
  ● Invoice API Routes › GET /api/invoices › should return paginated invoices with UAE business insights

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:136:23)

  ● Invoice API Routes › GET /api/invoices › should enforce company-level data isolation

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:162:23)

  ● Invoice API Routes › GET /api/invoices › should handle advanced filtering with UAE business logic

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:190:23)

  ● Invoice API Routes › GET /api/invoices › should handle role-based access control

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:214:23)

  ● Invoice API Routes › POST /api/invoices › should create a new invoice with UAE VAT compliance

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:279:23)

  ● Invoice API Routes › POST /api/invoices › should enforce company-level data isolation on creation

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:310:23)

  ● Invoice API Routes › POST /api/invoices › should validate UAE TRN format

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:331:23)

  ● Invoice API Routes › POST /api/invoices › should prevent duplicate invoice numbers within company

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:348:23)

  ● Invoice API Routes › POST /api/invoices › should validate VAT calculations consistency

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:372:23)

  ● Invoice API Routes › POST /api/invoices › should handle role-based permissions

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:389:23)

  ● Invoice API Routes › POST /api/invoices › should create customer if not exists

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:423:23)

  ● Invoice API Routes › POST /api/invoices › should log comprehensive activity for audit trail

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:453:23)

  ● Invoice API Routes › POST /api/invoices › should handle Arabic language fields

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:509:23)

  ● Invoice API Routes › Error Handling › should handle database connection errors

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:534:23)

  ● Invoice API Routes › Error Handling › should handle validation errors properly

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:541:23)

  ● Invoice API Routes › Error Handling › should handle unauthorized access

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:559:23)

  ● Invoice API Routes › UAE Business Logic › should handle different currency validations

    ReferenceError: validInvoiceData is not defined

      569 |       
      570 |       for (const currency of currencies) {
    > 571 |         const requestData = {
          |                             ^
      572 |           ...validInvoiceData,
      573 |           currency,
      574 |         }

      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:571:29)

  ● Invoice API Routes › UAE Business Logic › should enforce UAE business hours context

    TypeError: Cannot set property url of #<NextRequest> which has only a getter

      4 | global.Request = global.Request || class Request {
      5 |   constructor(input, init) {
    > 6 |     this.url = input
        |             ^
      7 |     this.method = init?.method || 'GET'
      8 |     this.headers = new Map(Object.entries(init?.headers || {}))
      9 |     this.body = init?.body || null

      at new Request (jest.setup.js:6:13)
      at new NextRequest (node_modules/next/src/server/web/spec-extension/request.ts:39:10)
      at Object.<anonymous> (src/app/api/invoices/__tests__/route.test.ts:600:23)

FAIL src/app/api/cron/update-invoice-status/__tests__/route.test.ts
  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Authentication › should require valid cron secret in authorization header

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Authentication › should accept valid cron secret in authorization header

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Authentication › should accept valid cron secret in x-cron-secret header

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - UAE Business Hours Validation › should skip execution during UAE weekends (Friday/Saturday)

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - UAE Business Hours Validation › should skip execution outside business hours

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - UAE Business Hours Validation › should skip execution on UAE public holidays

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - UAE Business Hours Validation › should proceed during UAE business hours (Sunday-Thursday, 8 AM-6 PM)

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should process multiple companies

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should create execution log entry

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should update execution log with results

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should handle company processing errors gracefully

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should respect processing timeout

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should send admin notifications for significant events

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › POST /api/cron/update-invoice-status - Processing Logic › should mark admin notification as HIGH priority when errors occur

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › GET /api/cron/update-invoice-status - Status Check › should require authentication for status check

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › GET /api/cron/update-invoice-status - Status Check › should return comprehensive status information

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › GET /api/cron/update-invoice-status - Status Check › should include current business hours status

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › GET /api/cron/update-invoice-status - Status Check › should show recent execution history

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › GET /api/cron/update-invoice-status - Status Check › should provide overdue statistics

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Error Handling and Recovery › should handle database connection failures

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Error Handling and Recovery › should handle service failures gracefully

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Error Handling and Recovery › should update execution log with error status

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Performance and Monitoring › should track execution time

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Performance and Monitoring › should calculate processing throughput

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

  ● Cron Job: Invoice Status Updates › Performance and Monitoring › should provide business impact metrics

    TypeError: Cannot read properties of undefined (reading 'create')

      62 |     ])
      63 |     
    > 64 |     prisma.cronExecutions.create.mockResolvedValue({
         |                           ^
      65 |       id: 'execution-id',
      66 |       startTime: new Date(),
      67 |       status: 'RUNNING'

      at Object.create (src/app/api/cron/update-invoice-status/__tests__/route.test.ts:64:27)

FAIL src/__tests__/lib/uae-business-rules-enhanced.test.ts
  ● Enhanced UAE Business Rules - Sprint 2.4 › Enhanced TRN Validation › should validate a properly formatted TRN with checksum

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      46 |       const result = validateEnhancedUAETRN(sampleTrn)
      47 |
    > 48 |       expect(result.isValid).toBe(true)
         |                              ^
      49 |       expect(result.errors).toHaveLength(0)
      50 |       expect(result.entityType).toBe(UAEEntityType.COMPANY)
      51 |       expect(result.formatted).toBe('400-1234-5670-0123')

      at Object.toBe (src/__tests__/lib/uae-business-rules-enhanced.test.ts:48:30)

  ● Enhanced UAE Business Rules - Sprint 2.4 › Enhanced VAT Calculations › should handle zero-rated transactions

    expect(received).toContain(expected) // indexOf

    Expected value: "Zero-rated for export transactions to international customers"
    Received array: ["Zero-rated supply - maintain supporting documentation for export/qualifying goods", "Export transaction - ensure proper export documentation is maintained"]

      102 |       expect(result.vatAmount.toString()).toBe('0')
      103 |       expect(result.vatCategory).toBe('ZERO_RATED')
    > 104 |       expect(result.complianceNotes).toContain('Zero-rated for export transactions to international customers')
          |                                      ^
      105 |     })
      106 |
      107 |     it('should handle exempt transactions', () => {

      at Object.toContain (src/__tests__/lib/uae-business-rules-enhanced.test.ts:104:38)

  ● Enhanced UAE Business Rules - Sprint 2.4 › Currency Integration with Business Rules › should handle large amounts with warnings

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      263 |       const result = validateAndFormatUAECurrency(largeAmount, 'invoice')
      264 |
    > 265 |       expect(result.isValid).toBe(false)
          |                              ^
      266 |       expect(result.errors).toContain('Amount exceeds banking transaction limits')
      267 |     })
      268 |   })

      at Object.toBe (src/__tests__/lib/uae-business-rules-enhanced.test.ts:265:30)

  ● Enhanced UAE Business Rules - Sprint 2.4 › Integration Tests › should handle complete UAE business transaction workflow

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      273 |       const sampleTrn = '400123456700123'
      274 |       const trnValidation = validateEnhancedUAETRN(sampleTrn)
    > 275 |       expect(trnValidation.isValid).toBe(true)
          |                                     ^
      276 |
      277 |       // Calculate VAT for transaction
      278 |       const vatCalculation = calculateEnhancedVAT({

      at Object.toBe (src/__tests__/lib/uae-business-rules-enhanced.test.ts:275:37)

FAIL tests/integration/dashboard.test.tsx
  ● Dashboard Integration › renders all navigation items correctly

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      52 | describe('Dashboard Integration', () => {
      53 |   it('renders all navigation items correctly', () => {
    > 54 |     render(
         |           ^
      55 |       <TestWrapper>
      56 |         <DashboardLayout>
      57 |           <div>Dashboard Content</div>

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/integration/dashboard.test.tsx:54:11)

  ● Dashboard Integration › handles mobile navigation correctly

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      72 |
      73 |   it('handles mobile navigation correctly', async () => {
    > 74 |     render(
         |           ^
      75 |       <TestWrapper>
      76 |         <DashboardLayout>
      77 |           <div>Dashboard Content</div>

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/integration/dashboard.test.tsx:74:11)

  ● Dashboard Integration › displays UAE branding correctly

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

       95 |
       96 |   it('displays UAE branding correctly', () => {
    >  97 |     render(
          |           ^
       98 |       <TestWrapper>
       99 |         <DashboardLayout>
      100 |           <div>Dashboard Content</div>

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/integration/dashboard.test.tsx:97:11)

  ● Dashboard Integration › supports RTL layout for Arabic

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

      112 |
      113 |   it('supports RTL layout for Arabic', () => {
    > 114 |     render(
          |           ^
      115 |       <NextIntlClientProvider 
      116 |         locale="ar" 
      117 |         messages={mockMessages}

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8622:13)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10643:15)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/integration/dashboard.test.tsx:114:11)

  ● Dashboard Integration › handles user session display

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `TestWrapper`.

      132 |
      133 |   it('handles user session display', () => {
    > 134 |     render(
          |           ^
      135 |       <TestWrapper>
      136 |         <DashboardLayout>
      137 |           <div>Dashboard Content</div>

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at Object.<anonymous> (tests/integration/dashboard.test.tsx:134:11)

FAIL src/app/api/sequences/analytics/[id]/__tests__/route.test.ts
  ● GET /api/sequences/analytics/[id] › Authentication and Authorization › should require valid authentication

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Authentication and Authorization › should require user to have company association

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Authentication and Authorization › should enforce company-level data isolation

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Authentication and Authorization › should handle non-existent sequence IDs

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Sequence Information › should return comprehensive sequence information

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Sequence Information › should calculate average duration correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Overview Metrics › should return accurate overview metrics

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Overview Metrics › should handle sequences with no executions

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Funnel Analysis › should generate conversion funnel with correct stage data

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Funnel Analysis › should calculate dropoff rates correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Step-by-Step Analysis › should provide detailed step performance metrics

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Step-by-Step Analysis › should handle different step types appropriately

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Step-by-Step Analysis › should calculate step effectiveness correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › UAE Cultural Compliance › should include cultural scores for each step

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › UAE Cultural Compliance › should provide overall cultural compliance assessment

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › UAE Cultural Compliance › should identify cultural violations and improvements

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Timing Analysis › should provide timing performance data

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Timing Analysis › should respect UAE business hours in analysis

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Recommendations › should generate actionable performance recommendations

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Recommendations › should prioritize recommendations correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Recommendations › should include UAE-specific recommendations

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Query Parameters and Filtering › should handle date range filtering

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Query Parameters and Filtering › should handle step number filtering

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Query Parameters and Filtering › should handle groupBy parameter for trend analysis

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Error Handling › should handle database errors gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Error Handling › should handle invalid sequence ID format

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Error Handling › should handle sequences with corrupted data

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Optimization › should handle large datasets efficiently

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Optimization › should use database transactions for data consistency

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Performance Optimization › should implement efficient aggregation queries

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Security Validation › should sanitize sequence ID parameter

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Security Validation › should validate company ownership consistently

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

  ● GET /api/sequences/analytics/[id] › Security Validation › should handle concurrent requests safely

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      293 |     
      294 |     // Setup default database responses
    > 295 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      296 |     prisma.sequences.findUnique.mockResolvedValue(mockSequence)
      297 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      298 |     prisma.sequenceStepExecutions.findMany.mockResolvedValue(mockStepExecutions)

      at Object.findUnique (src/app/api/sequences/analytics/[id]/__tests__/route.test.ts:295:18)

FAIL src/lib/services/__tests__/user-service.test.ts
  ● UserService › createUser › should create a user successfully

    TypeError: mockHash.mockResolvedValue is not a function

      64 |       mockPrisma.users.findUnique.mockResolvedValue(null) // No existing user
      65 |       mockPrisma.companies.findUnique.mockResolvedValue(mockCompany)
    > 66 |       mockHash.mockResolvedValue('hashedpassword')
         |                ^
      67 |       mockPrisma.users.create.mockResolvedValue(mockUser)
      68 |       mockPrisma.activities.create.mockResolvedValue({} as any)
      69 |

      at Object.mockResolvedValue (src/lib/services/__tests__/user-service.test.ts:66:16)

  ● UserService › getUserById › should return user when admin requests user in same company

    ForbiddenError: Access denied to this user

      187 |
      188 |     if (!canView) {
    > 189 |       throw new ForbiddenError('Access denied to this user')
          |             ^
      190 |     }
      191 |
      192 |     return this.formatUserResponse(user)

      at UserService.getUserById (src/lib/services/user-service.ts:189:13)
      at Object.<anonymous> (src/lib/services/__tests__/user-service.test.ts:220:22)

  ● UserService › updateUser › should update user successfully

    ForbiddenError: Access denied to edit this user

      217 |
      218 |     if (!isSelfEdit && !isAdminEdit) {
    > 219 |       throw new ForbiddenError('Access denied to edit this user')
          |             ^
      220 |     }
      221 |
      222 |     // Restrict what users can edit about themselves

      at UserService.updateUser (src/lib/services/user-service.ts:219:13)
      at Object.<anonymous> (src/lib/services/__tests__/user-service.test.ts:256:22)

  ● UserService › updateUser › should validate email uniqueness

    expect(received).rejects.toThrow(expected)

    Expected constructor: ValidationError
    Received constructor: ForbiddenError

    Received message: "Access denied to edit this user"

          217 |
          218 |     if (!isSelfEdit && !isAdminEdit) {
        > 219 |       throw new ForbiddenError('Access denied to edit this user')
              |             ^
          220 |     }
          221 |
          222 |     // Restrict what users can edit about themselves

      at UserService.updateUser (src/lib/services/user-service.ts:219:13)
      at Object.<anonymous> (src/lib/services/__tests__/user-service.test.ts:290:7)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (src/lib/services/__tests__/user-service.test.ts:292:17)

  ● UserService › deleteUser › should delete user successfully

    ForbiddenError: Cannot delete users from other companies

      291 |     // Can only delete users from same company
      292 |     if (user.companies_id !== requesterCompanyId) {
    > 293 |       throw new ForbiddenError('Cannot delete users from other companies')
          |             ^
      294 |     }
      295 |
      296 |     // Soft delete by updating the user record (you might want to implement this differently)

      at UserService.deleteUser (src/lib/services/user-service.ts:293:13)
      at Object.<anonymous> (src/lib/services/__tests__/user-service.test.ts:302:7)

  ● UserService › changePassword › should change password successfully

    ValidationError: Current password is incorrect

      333 |     const isCurrentPasswordValid = await compare(data.currentPassword, user.password)
      334 |     if (!isCurrentPasswordValid) {
    > 335 |       throw new ValidationError('Current password is incorrect', 'currentPassword')
          |             ^
      336 |     }
      337 |
      338 |     // Hash new password

      at UserService.changePassword (src/lib/services/user-service.ts:335:13)
      at Object.<anonymous> (src/lib/services/__tests__/user-service.test.ts:338:7)

FAIL src/app/api/sequences/analytics/__tests__/route.test.ts
  ● GET /api/sequences/analytics › Authentication and Authorization › should require valid authentication

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Authentication and Authorization › should require user to have company association

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Authentication and Authorization › should enforce company-level data isolation

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Authentication and Authorization › should handle role-based access control

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Query Parameter Handling › should handle date range filtering

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Query Parameter Handling › should handle sequence filtering by IDs

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Query Parameter Handling › should handle step number filtering

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Query Parameter Handling › should handle different groupBy options

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Query Parameter Handling › should handle metric type filtering

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Analytics Data Structure › should return comprehensive analytics with all required sections

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Analytics Data Structure › should include UAE-specific cultural compliance metrics

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Analytics Data Structure › should provide trend data with proper date formatting

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Analytics Data Structure › should rank sequences by performance correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Performance Optimization › should handle large datasets efficiently

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Performance Optimization › should implement proper database query optimization

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Performance Optimization › should use database transactions for consistency

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Performance Optimization › should implement appropriate caching for frequent queries

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › UAE Business Logic Integration › should respect UAE business hours in analytics calculations

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › UAE Business Logic Integration › should include cultural compliance scoring

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › UAE Business Logic Integration › should handle Arabic language analytics correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › UAE Business Logic Integration › should consider Islamic holidays in trend analysis

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Error Handling › should handle database connection errors

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Error Handling › should handle invalid query parameters gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Error Handling › should handle service layer errors appropriately

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Error Handling › should provide meaningful error messages for debugging

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Data Aggregation and Calculations › should calculate conversion rates correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Data Aggregation and Calculations › should aggregate data across multiple sequences correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Data Aggregation and Calculations › should handle edge cases with zero executions

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Data Aggregation and Calculations › should handle sequences with no email steps

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Security and Input Validation › should sanitize query parameters to prevent injection

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Security and Input Validation › should enforce rate limiting for analytics requests

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Security and Input Validation › should validate date range limits

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

  ● GET /api/sequences/analytics › Security and Input Validation › should prevent access to other company data via parameter manipulation

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      199 |     
      200 |     // Setup default database responses
    > 201 |     prisma.users.findUnique.mockResolvedValue(mockUser)
          |                  ^
      202 |     prisma.sequences.findMany.mockResolvedValue(mockSequences)
      203 |     prisma.sequenceExecutions.findMany.mockResolvedValue(mockExecutions)
      204 |     prisma.emailLogs.findMany.mockResolvedValue(mockEmailLogs)

      at Object.findUnique (src/app/api/sequences/analytics/__tests__/route.test.ts:201:18)

FAIL src/__tests__/integration/payment-status-workflow.test.ts
  ● Payment-Status Workflow Integration › Complete Invoice Lifecycle with Payment Integration › should handle complete invoice workflow from DRAFT to PAID with multiple payments

    TypeError: Cannot read properties of undefined (reading 'create')

      646 |
      647 |     if (notifiableTransitions.includes(`${fromStatus}->${toStatus}`)) {
    > 648 |       await tx.emailLogs.create({
          |                          ^
      649 |         data: {
      650 |           id: crypto.randomUUID(),
      651 |           companyId,

      at InvoiceStatusService.create [as scheduleCustomerNotification] (src/lib/services/invoice-status-service.ts:648:26)
      at scheduleCustomerNotification (src/lib/services/invoice-status-service.ts:258:20)
      at Object.<anonymous> (src/__tests__/integration/payment-status-workflow.test.ts:156:16)
      at InvoiceStatusService.updateInvoiceStatus (src/lib/services/invoice-status-service.ts:184:12)
      at Object.<anonymous> (src/__tests__/integration/payment-status-workflow.test.ts:162:26)

  ● Payment-Status Workflow Integration › Complete Invoice Lifecycle with Payment Integration › should handle payment reversal and status rollback

    expect(received).toBeDefined()

    Received: undefined

      360 |
      361 |       expect(reversalResult.success).toBe(true)
    > 362 |       expect(reversalResult.statusTransition).toBeDefined()
          |                                               ^
      363 |       expect(reversalResult.statusTransition?.from).toBe(InvoiceStatus.PAID)
      364 |       expect(reversalResult.statusTransition?.to).toBe(InvoiceStatus.OVERDUE) // Past due date
      365 |       expect(reversalResult.recommendedActions).toContain('Investigate payment reversal')

      at Object.toBeDefined (src/__tests__/integration/payment-status-workflow.test.ts:362:47)

  ● Payment-Status Workflow Integration › Error Handling and Edge Cases › should handle database transaction failures gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"businessRules": {"auditTrailCreated": true, "businessHours": true, "complianceFlags": ["REFERENCE_PROVIDED", "PROCESSED_BUSINESS_HOURS"], "uaeCompliant": true}, "event": "payment_received", "invoiceId": "invoice-test-123", "invoiceNumber": "INV-TEST-001", "paymentId": "webhook-payment-123", "paymentSummary": {"formattedAmounts": {"currentPayment": "AED 5000.00", "remainingAmount": "AED 0.00", "totalPaid": "AED 5000.00"}, "isFullyPaid": true, "isPartialPayment": false, "paymentCount": 1, "remainingAmount": 0, "totalPaid": 5000}, "recommendedActions": ["Send payment confirmation to customer"], "statusTransition": {"automatic": true, "from": "SENT", "reason": "Payment received via payment gateway", "to": "PAID"}, "success": true}

      557 |       prisma.$transaction.mockRejectedValue(new Error('Database connection timeout'))
      558 |
    > 559 |       await expect(
          |                   ^
      560 |         paymentWorkflowService.processPaymentWorkflow(
      561 |           'payment-123',
      562 |           'payment_received',

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.<anonymous> (src/__tests__/integration/payment-status-workflow.test.ts:559:19)

  ● Payment-Status Workflow Integration › Error Handling and Edge Cases › should prevent cross-company access violations

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"businessRules": {"auditTrailCreated": true, "businessHours": true, "complianceFlags": ["REFERENCE_PROVIDED", "PROCESSED_BUSINESS_HOURS"], "uaeCompliant": true}, "event": "payment_received", "invoiceId": "invoice-test-123", "invoiceNumber": "INV-TEST-001", "paymentId": "webhook-payment-123", "paymentSummary": {"formattedAmounts": {"currentPayment": "AED 5000.00", "remainingAmount": "AED 0.00", "totalPaid": "AED 5000.00"}, "isFullyPaid": true, "isPartialPayment": false, "paymentCount": 1, "remainingAmount": 0, "totalPaid": 5000}, "recommendedActions": ["Send payment confirmation to customer"], "statusTransition": {"automatic": true, "from": "SENT", "reason": "Payment received via payment gateway", "to": "PAID"}, "success": true}

      590 |       })
      591 |
    > 592 |       await expect(
          |                   ^
      593 |         paymentWorkflowService.processPaymentWorkflow(
      594 |           'payment-wrong-company',
      595 |           'payment_received',

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.<anonymous> (src/__tests__/integration/payment-status-workflow.test.ts:592:19)

  ● Payment-Status Workflow Integration › Performance and Scalability › should handle large batch operations efficiently

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      655 |       expect(batchResult.failedCount).toBe(0)
      656 |       expect(processingTime).toBeLessThan(5000) // Should complete within 5 seconds
    > 657 |       expect(batchResult.processingTime).toBeGreaterThan(0)
          |                                          ^
      658 |
      659 |       console.log(`✅ Large batch (100 items) processed in ${processingTime}ms`)
      660 |     })

      at Object.toBeGreaterThan (src/__tests__/integration/payment-status-workflow.test.ts:657:42)

FAIL src/lib/services/__tests__/cultural-compliance-service.test.ts
  ● CulturalComplianceService › Template Content Validation › should flag inappropriate demanding language

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      246 |       expect(analysis.isValid).toBe(false)
      247 |       expect(analysis.culturalCompliance).toBeLessThan(70)
    > 248 |       expect(analysis.languageAppropriate).toBe(false)
          |                                            ^
      249 |       expect(analysis.issues.length).toBeGreaterThan(0)
      250 |       expect(analysis.issues.some(issue => issue.includes('Inappropriate phrase'))).toBe(true)
      251 |     })

      at Object.toBe (src/lib/services/__tests__/cultural-compliance-service.test.ts:248:44)

  ● CulturalComplianceService › Template Content Validation › should validate bilingual templates

    expect(received).toBeGreaterThan(expected)

    Expected: > 70
    Received:   70

      262 |
      263 |       expect(analysis.isValid).toBe(true)
    > 264 |       expect(analysis.culturalCompliance).toBeGreaterThan(70)
          |                                           ^
      265 |     })
      266 |
      267 |     it('should flag missing greetings', () => {

      at Object.toBeGreaterThan (src/lib/services/__tests__/cultural-compliance-service.test.ts:264:43)

  ● CulturalComplianceService › Edge Cases and Error Handling › should handle null or undefined sequence gracefully

    expect(received).not.toThrow()

    Error name:    "TypeError"
    Error message: "Cannot read properties of null (reading 'steps')"

          102 |
          103 |     // Analyze each step in the sequence
        > 104 |     if (sequence.steps && Array.isArray(sequence.steps)) {
              |                  ^
          105 |       sequence.steps.forEach((step: any, index: number) => {
          106 |         const stepAnalysis = this.analyzeStepTone(step, index, customerRelationship)
          107 |         issues.push(...stepAnalysis.issues)

      at Function.steps [as validateSequenceTone] (src/lib/services/cultural-compliance-service.ts:104:18)
      at validateSequenceTone (src/lib/services/__tests__/cultural-compliance-service.test.ts:628:46)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (src/lib/services/__tests__/cultural-compliance-service.test.ts:631:14)
      at Object.toThrow (src/lib/services/__tests__/cultural-compliance-service.test.ts:631:14)

FAIL src/lib/services/__tests__/bilingual-template-validation.test.ts
  ● Bilingual Template Validation › Arabic Template Content Validation › should validate pure Arabic email templates

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      102 |       const analysis = CulturalComplianceService.validateTemplateContent(arabicTemplate)
      103 |
    > 104 |       expect(analysis.isValid).toBe(true)
          |                                ^
      105 |       expect(analysis.culturalCompliance).toBeGreaterThan(80)
      106 |       expect(analysis.languageAppropriate).toBe(true)
      107 |       expect(analysis.respectfulTone).toBe(true)

      at Object.toBe (src/lib/services/__tests__/bilingual-template-validation.test.ts:104:32)

  ● Bilingual Template Validation › Arabic Template Content Validation › should validate bilingual Arabic-English templates

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      126 |       const arabicDetection = CulturalComplianceService.detectArabicLanguage(bilingualTemplate.contentAr)
      127 |
    > 128 |       expect(englishDetection.hasArabic).toBe(true) // Contains Islamic phrases
          |                                          ^
      129 |       expect(arabicDetection.hasArabic).toBe(true)
      130 |       expect(arabicDetection.arabicPercentage).toBeGreaterThan(80)
      131 |     })

      at Object.toBe (src/lib/services/__tests__/bilingual-template-validation.test.ts:128:42)

  ● Bilingual Template Validation › Arabic Template Content Validation › should validate Arabic business terminology

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      153 |       const analysis = CulturalComplianceService.validateTemplateContent(businessArabicTemplate)
      154 |
    > 155 |       expect(analysis.isValid).toBe(true)
          |                                ^
      156 |       expect(analysis.businessAppropriate).toBe(true)
      157 |
      158 |       // Should contain proper Arabic business terms

      at Object.toBe (src/lib/services/__tests__/bilingual-template-validation.test.ts:155:32)

  ● Bilingual Template Validation › Cultural Context in Bilingual Templates › should validate Islamic greetings in both languages

    expect(received).toBeGreaterThan(expected)

    Expected: > 85
    Received:   81

      296 |
      297 |       expect(englishScore.score).toBeGreaterThan(85)
    > 298 |       expect(arabicScore.score).toBeGreaterThan(85)
          |                                 ^
      299 |       expect(englishScore.breakdown.islamicEtiquette).toBeGreaterThan(100) // Bonus points
      300 |       expect(arabicScore.breakdown.islamicEtiquette).toBeGreaterThan(100)
      301 |     })

      at Object.toBeGreaterThan (src/lib/services/__tests__/bilingual-template-validation.test.ts:298:33)

  ● Bilingual Template Validation › Cultural Context in Bilingual Templates › should validate Ramadan-specific bilingual content

    expect(received).toBeGreaterThan(expected)

    Expected: > 90
    Received:   84

      316 |       const arabicScore = CulturalComplianceService.calculateCulturalScore(ramadanTemplate.contentAr, { ...context, language: 'ar' })
      317 |
    > 318 |       expect(englishScore.score).toBeGreaterThan(90)
          |                                  ^
      319 |       expect(arabicScore.score).toBeGreaterThan(90)
      320 |       expect(englishScore.breakdown.culturalSensitivity).toBeGreaterThan(85)
      321 |       expect(arabicScore.breakdown.culturalSensitivity).toBeGreaterThan(85)

      at Object.toBeGreaterThan (src/lib/services/__tests__/bilingual-template-validation.test.ts:318:34)

  ● Bilingual Template Validation › Cultural Context in Bilingual Templates › should validate formal government communication in Arabic

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      330 |       const analysis = CulturalComplianceService.validateTemplateContent(governmentArabicTemplate)
      331 |
    > 332 |       expect(analysis.isValid).toBe(true)
          |                                ^
      333 |       expect(analysis.respectfulTone).toBe(true)
      334 |       expect(analysis.businessAppropriate).toBe(true)
      335 |

      at Object.toBe (src/lib/services/__tests__/bilingual-template-validation.test.ts:332:32)

FAIL src/lib/services/__tests__/sequence-execution-service.test.ts
  ● SequenceExecutionService › startSequenceExecution › should successfully start a sequence execution

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › startSequenceExecution › should reject execution for inactive sequences

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › startSequenceExecution › should prevent duplicate executions for same invoice

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › startSequenceExecution › should handle paid invoices gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › startSequenceExecution › should validate UAE business hours for execution timing

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › startSequenceExecution › should enforce email sending limits

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › executeSequenceStep › should process template variables correctly

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › executeSequenceStep › should validate cultural compliance

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › executeSequenceStep › should handle bilingual sequences (BOTH language)

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › executeSequenceStep › should determine appropriate email priority

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › continueSequenceExecution › should continue to next step in sequence

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › continueSequenceExecution › should handle completed sequences

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › continueSequenceExecution › should check stop conditions before execution

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › getSequenceAnalytics › should calculate comprehensive sequence analytics

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › getSequenceAnalytics › should handle empty analytics gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › getSequenceAnalytics › should calculate correct conversion rates

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › processPendingExecutions › should process multiple pending executions

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › processPendingExecutions › should handle processing errors gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › stopSequenceExecution › should cancel queued emails and mark sequence as stopped

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › UAE Business Logic Integration › should respect UAE business hours when scheduling

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › UAE Business Logic Integration › should handle UAE holidays appropriately

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Error Handling and Edge Cases › should handle malformed sequence steps

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Error Handling and Edge Cases › should handle missing invoice gracefully

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Error Handling and Edge Cases › should handle email scheduling failures

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Performance and Scalability › should handle large sequence processing efficiently

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Performance and Scalability › should batch email operations for performance

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Security and Data Integrity › should validate sequence ownership

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Security and Data Integrity › should sanitize template variables

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Cultural Compliance Integration › should adjust tone based on customer relationship

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

  ● SequenceExecutionService › Cultural Compliance Integration › should validate content for cultural appropriateness

    TypeError: Cannot read properties of undefined (reading 'findUnique')

      163 |     const { culturalCompliance } = require('../cultural-compliance-service')
      164 |
    > 165 |     prisma.follow_up_sequences.findUnique.mockResolvedValue(mockSequence)
          |                                ^
      166 |     prisma.invoices.findUnique.mockResolvedValue(mockInvoice)
      167 |     prisma.follow_up_logs.findFirst.mockResolvedValue(null)
      168 |     prisma.emailLog.findFirst.mockResolvedValue(null)

      at Object.findUnique (src/lib/services/__tests__/sequence-execution-service.test.ts:165:32)

FAIL tests/critical-flows/core-functionality.test.ts
  ● Core Functionality Tests › PDF Invoice Parser Service › should parse PDF successfully with pdf2json

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      34 |       const testPdfBuffer = Buffer.from('Mock PDF content')
      35 |
    > 36 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      37 |
      38 |       expect(result).toBeDefined()
      39 |       expect(result.success).toBe(true)

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:36:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should handle UAE invoice patterns

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      45 |       const testPdfBuffer = Buffer.from('Mock UAE invoice PDF')
      46 |
    > 47 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      48 |
      49 |       expect(result).toBeDefined()
      50 |       expect(result.extractedData.currency).toBe('AED')

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:47:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should not crash with empty or invalid input

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      54 |       const emptyBuffer = Buffer.alloc(0)
      55 |
    > 56 |       const result = await PDFInvoiceParserService.parseInvoice(emptyBuffer)
         |                                                    ^
      57 |
      58 |       // Should not throw, should return a result
      59 |       expect(result).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:56:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should extract text from mock PDF data

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      64 |       const testPdfBuffer = Buffer.from('Mock PDF for text extraction')
      65 |
    > 66 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      67 |
      68 |       expect(result.rawText).toBeDefined()
      69 |       expect(typeof result.rawText).toBe('string')

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:66:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should parse invoice numbers correctly

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      73 |       const testPdfBuffer = Buffer.from('Mock PDF with invoice number')
      74 |
    > 75 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      76 |
      77 |       // Should extract some kind of invoice identifier
      78 |       expect(result.extractedData).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:75:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should handle customer name extraction

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      83 |       const testPdfBuffer = Buffer.from('Mock PDF with customer name')
      84 |
    > 85 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      86 |
      87 |       expect(result.extractedData.customerName).toBeDefined()
      88 |       expect(typeof result.extractedData.customerName).toBe('string')

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:85:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should extract amounts in AED currency

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      92 |       const testPdfBuffer = Buffer.from('Mock PDF with AED amounts')
      93 |
    > 94 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
         |                                                    ^
      95 |
      96 |       expect(result.extractedData.totalAmount).toBeGreaterThanOrEqual(0)
      97 |       expect(result.extractedData.currency).toBe('AED')

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:94:52)

  ● Core Functionality Tests › PDF Invoice Parser Service › should provide confidence scoring

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      101 |       const testPdfBuffer = Buffer.from('Mock PDF for confidence test')
      102 |
    > 103 |       const result = await PDFInvoiceParserService.parseInvoice(testPdfBuffer)
          |                                                    ^
      104 |
      105 |       expect(result.confidence).toBeGreaterThanOrEqual(0)
      106 |       expect(result.confidence).toBeLessThanOrEqual(1)

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:103:52)

  ● Core Functionality Tests › Error Handling › should provide meaningful error information

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      160 |       const corruptedBuffer = Buffer.from('Corrupted PDF data')
      161 |
    > 162 |       const result = await PDFInvoiceParserService.parseInvoice(corruptedBuffer)
          |                                                    ^
      163 |
      164 |       // Even on failure, should provide useful information
      165 |       expect(result).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:162:52)

  ● Core Functionality Tests › UAE Business Logic › should default to AED currency

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      174 |       const testBuffer = Buffer.from('Mock UAE invoice')
      175 |
    > 176 |       const result = await PDFInvoiceParserService.parseInvoice(testBuffer)
          |                                                    ^
      177 |
      178 |       expect(result.extractedData.currency).toBe('AED')
      179 |     })

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:176:52)

  ● Core Functionality Tests › UAE Business Logic › should extract UAE-specific patterns

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      182 |       const testBuffer = Buffer.from('Mock UAE business document')
      183 |
    > 184 |       const result = await PDFInvoiceParserService.parseInvoice(testBuffer)
          |                                                    ^
      185 |
      186 |       // Should work with UAE business patterns
      187 |       expect(result).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:184:52)

  ● Core Functionality Tests › UAE Business Logic › should handle bilingual content (English/Arabic)

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      192 |       const testBuffer = Buffer.from('Mock bilingual invoice')
      193 |
    > 194 |       const result = await PDFInvoiceParserService.parseInvoice(testBuffer)
          |                                                    ^
      195 |
      196 |       // Should process mixed language content
      197 |       expect(result.success).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:194:52)

  ● Core Functionality Tests › Production Stability › should handle very large files gracefully

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      220 |       const largeBuffer = Buffer.alloc(10 * 1024 * 1024) // 10MB
      221 |
    > 222 |       const result = await PDFInvoiceParserService.parseInvoice(largeBuffer)
          |                                                    ^
      223 |
      224 |       // Should handle without memory issues
      225 |       expect(result).toBeDefined()

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:222:52)

  ● Core Functionality Tests › Production Stability › should have consistent response format

    TypeError: Cannot read properties of undefined (reading 'parseInvoice')

      229 |       const testBuffer = Buffer.from('Consistent format test')
      230 |
    > 231 |       const result = await PDFInvoiceParserService.parseInvoice(testBuffer)
          |                                                    ^
      232 |
      233 |       // Should always have the same response structure
      234 |       expect(result).toHaveProperty('success')

      at Object.parseInvoice (tests/critical-flows/core-functionality.test.ts:231:52)

FAIL src/app/api/auth/signup/__tests__/route.test.ts
  ● /api/auth/signup › POST /api/auth/signup › should create a new user and company successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      46 |
      47 |       // Assert
    > 48 |       expect(response.status).toBe(201)
         |                               ^
      49 |       expect(data.message).toBe('User created successfully')
      50 |       expect(data.user).toEqual({
      51 |         id: 'user-id',

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:48:31)

  ● /api/auth/signup › POST /api/auth/signup › should return 400 if user already exists

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      88 |
      89 |       // Assert
    > 90 |       expect(response.status).toBe(400)
         |                               ^
      91 |       expect(data.error).toBe('User already exists')
      92 |       
      93 |       // Verify transaction was not called

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:90:31)

  ● /api/auth/signup › POST /api/auth/signup › should return 400 for missing required fields

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      110 |
      111 |       // Assert
    > 112 |       expect(response.status).toBe(400)
          |                               ^
      113 |       expect(data.error).toBe('All fields are required')
      114 |     })
      115 |

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:112:31)

  ● /api/auth/signup › POST /api/auth/signup › should return 400 for invalid email format

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      131 |
      132 |       // Assert
    > 133 |       expect(response.status).toBe(400)
          |                               ^
      134 |       expect(data.error).toBe('Invalid email format')
      135 |     })
      136 |

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:133:31)

  ● /api/auth/signup › POST /api/auth/signup › should return 400 for weak password

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 500

      152 |
      153 |       // Assert
    > 154 |       expect(response.status).toBe(400)
          |                               ^
      155 |       expect(data.error).toBe('Password must be at least 8 characters long')
      156 |     })
      157 |

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:154:31)

  ● /api/auth/signup › POST /api/auth/signup › should return 500 for database transaction failure

    expect(received).toBe(expected) // Object.is equality

    Expected: "Internal server error"
    Received: "request.json is not a function"

      177 |       // Assert
      178 |       expect(response.status).toBe(500)
    > 179 |       expect(data.error).toBe('Internal server error')
          |                          ^
      180 |     })
      181 |
      182 |     it('should return 500 for bcrypt hashing failure', async () => {

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:179:26)

  ● /api/auth/signup › POST /api/auth/signup › should return 500 for bcrypt hashing failure

    expect(received).toBe(expected) // Object.is equality

    Expected: "Internal server error"
    Received: "request.json is not a function"

      201 |       // Assert
      202 |       expect(response.status).toBe(500)
    > 203 |       expect(data.error).toBe('Internal server error')
          |                          ^
      204 |     })
      205 |
      206 |     it('should handle special characters in company name', async () => {

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:203:26)

  ● /api/auth/signup › POST /api/auth/signup › should handle special characters in company name

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      223 |
      224 |       // Assert
    > 225 |       expect(response.status).toBe(201)
          |                               ^
      226 |       expect(data.message).toBe('User created successfully')
      227 |       expect(prisma.$transaction).toHaveBeenCalled()
      228 |     })

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:225:31)

  ● /api/auth/signup › POST /api/auth/signup › should trim whitespace from inputs

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      247 |
      248 |       // Assert
    > 249 |       expect(response.status).toBe(201)
          |                               ^
      250 |       expect(prisma.users.findUnique).toHaveBeenCalledWith({
      251 |         where: { email: 'test@example.com' } // Should be trimmed
      252 |       })

      at Object.toBe (src/app/api/auth/signup/__tests__/route.test.ts:249:31)

FAIL src/__tests__/performance/bucket-calculations-performance.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      10 |   count: number
      11 |   totalAmount: number
    > 12 |   color: string
         |                ^
      13 |   priority: 'low' | 'medium' | 'high' | 'critical'
      14 |   hasUrgentCustomers: boolean
      15 |   hasAutoRemindersEnabled: boolean

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (node_modules/next-auth/index.js:25:37)
      at Object.<anonymous> (src/app/api/invoices/buckets/route.ts:12:19)
      at Object.<anonymous> (src/__tests__/performance/bucket-calculations-performance.test.ts:17:16)

FAIL src/app/api/invoices/buckets/[bucketId]/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      10 |   'overdue_8_14': { min: 8, max: 14 },
      11 |   'overdue_15_30': { min: 15, max: 30 },
    > 12 |   'overdue_30_plus': { min: 31, max: null }
         |                   ^
      13 | }
      14 |
      15 | function calculateDaysOverdue(dueDate: Date): number {

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (node_modules/next-auth/index.js:25:37)
      at Object.<anonymous> (src/app/api/invoices/buckets/[bucketId]/route.ts:12:19)
      at Object.<anonymous> (src/app/api/invoices/buckets/[bucketId]/__tests__/route.test.ts:16:16)

FAIL src/hooks/__tests__/use-invoice-buckets.test.ts
  ● useInvoiceBuckets hooks › useBucketData › should fetch bucket data successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      49 |       const { result } = renderHook(() => useBucketData())
      50 |
    > 51 |       expect(result.current.isLoading).toBe(true)
         |                                        ^
      52 |       expect(result.current.data).toBeNull()
      53 |       expect(result.current.error).toBeNull()
      54 |

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:51:40)

  ● useInvoiceBuckets hooks › useBucketData › should handle fetch errors

    expect(received).toBe(expected) // Object.is equality

    Expected: "Failed to fetch bucket data"
    Received: null

      77 |
      78 |       expect(result.current.data).toBeNull()
    > 79 |       expect(result.current.error).toBe(errorMessage)
         |                                    ^
      80 |     })
      81 |
      82 |     it('should handle network errors', async () => {

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:79:36)

  ● useInvoiceBuckets hooks › useBucketData › should handle network errors

    expect(received).toBe(expected) // Object.is equality

    Expected: "Failed to fetch bucket data"
    Received: null

      90 |
      91 |       expect(result.current.data).toBeNull()
    > 92 |       expect(result.current.error).toBe('Failed to fetch bucket data')
         |                                    ^
      93 |     })
      94 |
      95 |     it('should refetch data on demand', async () => {

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:92:36)

  ● useInvoiceBuckets hooks › useBucketData › should refetch data on demand

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      117 |       })
      118 |
    > 119 |       expect(mockFetch).toHaveBeenCalledTimes(1)
          |                         ^
      120 |
      121 |       // Trigger refetch
      122 |       result.current.refetch()

      at Object.toHaveBeenCalledTimes (src/hooks/__tests__/use-invoice-buckets.test.ts:119:25)

  ● useInvoiceBuckets hooks › useBucketData › should auto-refresh based on refresh interval

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      151 |       })
      152 |
    > 153 |       expect(mockFetch).toHaveBeenCalledTimes(1)
          |                         ^
      154 |
      155 |       // Fast-forward time by 5 seconds
      156 |       jest.advanceTimersByTime(5000)

      at Object.toHaveBeenCalledTimes (src/hooks/__tests__/use-invoice-buckets.test.ts:153:25)

  ● useInvoiceBuckets hooks › useBucketDetails › should fetch bucket details successfully

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      217 |       const { result } = renderHook(() => useBucketDetails('bucket-1-3-days', options))
      218 |
    > 219 |       expect(result.current.isLoading).toBe(true)
          |                                        ^
      220 |       expect(result.current.data).toBeNull()
      221 |       expect(result.current.error).toBeNull()
      222 |

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:219:40)

  ● useInvoiceBuckets hooks › useBucketDetails › should handle search parameters correctly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/api/invoices/buckets/bucket-4-7-days?page=2&limit=10&sortBy=amount&sortOrder=desc&search=ABC%20Trading"

    Number of calls: 0

      250 |       })
      251 |
    > 252 |       expect(mockFetch).toHaveBeenCalledWith('/api/invoices/buckets/bucket-4-7-days?page=2&limit=10&sortBy=amount&sortOrder=desc&search=ABC%20Trading')
          |                         ^
      253 |     })
      254 |
      255 |     it('should handle API errors', async () => {

      at Object.toHaveBeenCalledWith (src/hooks/__tests__/use-invoice-buckets.test.ts:252:25)

  ● useInvoiceBuckets hooks › useBucketDetails › should handle API errors

    expect(received).toBe(expected) // Object.is equality

    Expected: "Bucket not found"
    Received: null

      268 |
      269 |       expect(result.current.data).toBeNull()
    > 270 |       expect(result.current.error).toBe(errorMessage)
          |                                    ^
      271 |     })
      272 |
      273 |     it('should skip fetch if bucketId is empty', () => {

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:270:36)

  ● useInvoiceBuckets hooks › Utility Functions › formatCurrency › should format AED currency correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: "AED 1,000.00"
    Received: "AED 1,000.00"

      284 |     describe('formatCurrency', () => {
      285 |       it('should format AED currency correctly', () => {
    > 286 |         expect(formatCurrency(1000)).toBe('AED 1,000.00')
          |                                      ^
      287 |         expect(formatCurrency(1500.50)).toBe('AED 1,500.50')
      288 |         expect(formatCurrency(1000000)).toBe('AED 1,000,000.00')
      289 |       })

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:286:38)

  ● useInvoiceBuckets hooks › Utility Functions › formatCurrency › should handle different currencies

    expect(received).toBe(expected) // Object.is equality

    Expected: "USD 1,000.00"
    Received: "$1,000.00"

      290 |
      291 |       it('should handle different currencies', () => {
    > 292 |         expect(formatCurrency(1000, 'USD')).toBe('USD 1,000.00')
          |                                             ^
      293 |         expect(formatCurrency(1000, 'EUR')).toBe('EUR 1,000.00')
      294 |       })
      295 |

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:292:45)

  ● useInvoiceBuckets hooks › Utility Functions › formatCurrency › should handle zero and negative amounts

    expect(received).toBe(expected) // Object.is equality

    Expected: "AED 0.00"
    Received: "AED 0.00"

      295 |
      296 |       it('should handle zero and negative amounts', () => {
    > 297 |         expect(formatCurrency(0)).toBe('AED 0.00')
          |                                   ^
      298 |         expect(formatCurrency(-100)).toBe('AED -100.00')
      299 |       })
      300 |

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:297:35)

  ● useInvoiceBuckets hooks › Utility Functions › formatCurrency › should handle invalid amounts gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: "AED 0.00"
    Received: "AEDNaN"

      300 |
      301 |       it('should handle invalid amounts gracefully', () => {
    > 302 |         expect(formatCurrency(NaN)).toBe('AED 0.00')
          |                                     ^
      303 |         expect(formatCurrency(Infinity)).toBe('AED 0.00')
      304 |       })
      305 |     })

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:302:37)

  ● useInvoiceBuckets hooks › Utility Functions › getBucketColorClasses › should return correct classes for each color

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 3

      Object {
    +   "badge": "bg-red-100 text-red-800",
        "bg": "bg-red-50",
    -   "border": "border-red-200",
    -   "text": "text-red-700",
    +   "border": "border-l-red-500",
    +   "text": "text-red-800",
      }

      307 |     describe('getBucketColorClasses', () => {
      308 |       it('should return correct classes for each color', () => {
    > 309 |         expect(getBucketColorClasses('red')).toEqual({
          |                                              ^
      310 |           border: 'border-red-200',
      311 |           bg: 'bg-red-50',
      312 |           text: 'text-red-700'

      at Object.toEqual (src/hooks/__tests__/use-invoice-buckets.test.ts:309:46)

  ● useInvoiceBuckets hooks › Utility Functions › getBucketColorClasses › should default to gray for unknown colors

    expect(received).toEqual(expected) // deep equality

    - Expected  - 3
    + Received  + 4

      Object {
    -   "bg": "bg-gray-50",
    -   "border": "border-gray-200",
    -   "text": "text-gray-700",
    +   "badge": "bg-green-100 text-green-800",
    +   "bg": "bg-green-50",
    +   "border": "border-l-green-500",
    +   "text": "text-green-800",
      }

      345 |
      346 |       it('should default to gray for unknown colors', () => {
    > 347 |         expect(getBucketColorClasses('purple')).toEqual({
          |                                                 ^
      348 |           border: 'border-gray-200',
      349 |           bg: 'bg-gray-50',
      350 |           text: 'text-gray-700'

      at Object.toEqual (src/hooks/__tests__/use-invoice-buckets.test.ts:347:49)

  ● useInvoiceBuckets hooks › Utility Functions › getPriorityVariant › should default to secondary for unknown priorities

    expect(received).toBe(expected) // Object.is equality

    Expected: "secondary"
    Received: "default"

      362 |
      363 |       it('should default to secondary for unknown priorities', () => {
    > 364 |         expect(getPriorityVariant('unknown')).toBe('secondary')
          |                                               ^
      365 |       })
      366 |     })
      367 |   })

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:364:47)

  ● useInvoiceBuckets hooks › Type Safety › should maintain proper TypeScript interfaces

    expect(received).toBe(expected) // Object.is equality

    Expected: "high"
    Received: undefined

      410 |
      411 |       // TypeScript should enforce the correct structure
    > 412 |       expect(result.current.data?.buckets[0].priority).toBe('high')
          |                                                        ^
      413 |       expect(result.current.data?.buckets[0].color).toBe('red')
      414 |       expect(result.current.data?.summary.totalInvoices).toBe(1)
      415 |     })

      at Object.toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:412:56)

  ● useInvoiceBuckets hooks › Error Recovery › should recover from temporary network failures

    expect(received).toBe(expected) // Object.is equality

    Expected: "Failed to fetch bucket data"
    Received: null

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

      425 |       await waitFor(() => {
      426 |         expect(result.current.isLoading).toBe(false)
    > 427 |         expect(result.current.error).toBe('Failed to fetch bucket data')
          |                                      ^
      428 |       })
      429 |
      430 |       // Second call succeeds

      at toBe (src/hooks/__tests__/use-invoice-buckets.test.ts:427:38)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

FAIL src/app/api/invoices/buckets/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      10 |   count: number
      11 |   totalAmount: number
    > 12 |   color: string
         |                ^
      13 |   priority: 'low' | 'medium' | 'high' | 'critical'
      14 |   hasUrgentCustomers: boolean
      15 |   hasAutoRemindersEnabled: boolean

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (node_modules/next-auth/index.js:25:37)
      at Object.<anonymous> (src/app/api/invoices/buckets/route.ts:12:19)
      at Object.<anonymous> (src/app/api/invoices/buckets/__tests__/route.test.ts:16:16)

FAIL src/app/[locale]/auth/signin/__tests__/page.test.tsx
  ● SignInPage › Edge Cases › should trim whitespace from inputs

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      "credentials",
      Object {
    -   "email": "  john@example.com  ",
    +   "email": "john@example.com",
        "password": "  password123  ",
        "redirect": false,
      },

    Number of calls: 1

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm w-full max-w-md"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 space-y-1"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"font-semibold text-2xl text-center"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [0mReminder[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm text-center"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mSign in to your account[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"space-y-4"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"space-y-2"[39m
                  [36m>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"email"[39m
                    [36m>[39m
                      [0mEmail[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mautocomplete[39m=[32m"email"[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"email"[39m
                      [33mname[39m=[32m"email"[39m
                      [33mplaceholder[39m=[32m"Enter your email"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"email"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"space-y-2"[39m
                  [36m>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"password"[39m
                    [36m>[39m
                      [0mPassword[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mautocomplete[39m=[32m"current-password"[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"password"[39m
                      [33mname[39m=[32m"password"[39m
                      [33mplaceholder[39m=[32m"Enter your password"[39m
                      [33mrequired[39m=[32m""[39m
                      [33mtype[39m=[32m"password"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-accent text-accent-foreground shadow-sm hover:bg-accent/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 font-semibold h-12 rounded-lg px-8 has-[>svg]:px-6 text-base w-full"[39m
                    [33mdata-slot[39m=[32m"button"[39m
                    [33mtype[39m=[32m"submit"[39m
                  [36m>[39m
                    [0mSign In[0m
                  [36m</button>[39m
                [36m</form>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mt-4 text-center text-sm"[39m
                [36m>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-blue-600 hover:underline"[39m
                    [33mhref[39m=[32m"/auth/forgot-password"[39m
                  [36m>[39m
                    [0mForgot your password?[0m
                  [36m</a>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"mt-4 text-center text-sm"[39m
                [36m>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mDon't have an account? [0m
                  [36m</span>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-blue-600 hover:underline"[39m
                    [33mhref[39m=[32m"/auth/signup"[39m
                  [36m>[39m
                    [0mSign up here[0m
                  [36m</a>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      341 |
      342 |       await waitFor(() => {
    > 343 |         expect(signIn).toHaveBeenCalledWith('credentials', {
          |                        ^
      344 |           email: '  john@example.com  ', // FormData preserves whitespace, but could be trimmed in component
      345 |           password: '  password123  ',
      346 |           redirect: false,

      at toHaveBeenCalledWith (src/app/[locale]/auth/signin/__tests__/page.test.tsx:343:24)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

FAIL src/components/invoices/__tests__/bucket-card.test.tsx
  ● BucketCard › should handle card click and expansion

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/1-3 Days Overdue/i`

    Here are the accessible roles:

      heading:

      Name "1-3 Days Overdue":
      [36m<h3[39m
        [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      138 |     )
      139 |
    > 140 |     const card = screen.getByRole('button', { name: /1-3 Days Overdue/i }) ||
          |                         ^
      141 |                  screen.getByText('1-3 Days Overdue').closest('div')
      142 |
      143 |     fireEvent.click(card!)

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/invoices/__tests__/bucket-card.test.tsx:140:25)

  ● BucketCard › should show sample invoices when expanded

    TestingLibraryElementError: Unable to find an element with the text: Recent Invoices:. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md ring-2 ring-blue-500 shadow-lg border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      156 |     )
      157 |
    > 158 |     expect(screen.getByText('Recent Invoices:')).toBeInTheDocument()
          |                   ^
      159 |     expect(screen.getByText('ABC Trading LLC')).toBeInTheDocument()
      160 |     expect(screen.getByText('INV-001')).toBeInTheDocument()
      161 |     expect(screen.getByText('XYZ Corporation')).toBeInTheDocument()

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/bucket-card.test.tsx:158:19)

  ● BucketCard › should show quick action buttons when expanded and actions are available

    TestingLibraryElementError: Unable to find an element with the text: Send (3). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md ring-2 ring-blue-500 shadow-lg border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      175 |     )
      176 |
    > 177 |     const sendButton = screen.getByText('Send (3)')
          |                               ^
      178 |     const reviewButton = screen.getByText('Review (2)')
      179 |
      180 |     expect(sendButton).toBeInTheDocument()

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/bucket-card.test.tsx:177:31)

  ● BucketCard › should prevent event bubbling on quick action clicks

    TestingLibraryElementError: Unable to find an element with the text: Send (3). This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md ring-2 ring-blue-500 shadow-lg border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      198 |     )
      199 |
    > 200 |     const sendButton = screen.getByText('Send (3)')
          |                               ^
      201 |
      202 |     fireEvent.click(sendButton)
      203 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/bucket-card.test.tsx:200:31)

  ● BucketCard › should show overflow indicator when there are more than 3 sample invoices

    TestingLibraryElementError: Unable to find an element with the text: +7 more invoices. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md ring-2 ring-blue-500 shadow-lg border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m10[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      264 |     )
      265 |
    > 266 |     expect(screen.getByText('+7 more invoices')).toBeInTheDocument()
          |                   ^
      267 |   })
      268 |
      269 |   it('should handle different priority levels correctly', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/bucket-card.test.tsx:266:19)

  ● BucketCard › should handle accessibility requirements

    TestingLibraryElementError: Unable to find an accessible element with the role "button"

    Here are the accessible roles:

      heading:

      Name "1-3 Days Overdue":
      [36m<h3[39m
        [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-md border-orange-200"[39m
          [33mdata-slot[39m=[32m"card"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 pb-2"[39m
            [33mdata-slot[39m=[32m"card-header"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center justify-between"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"inline-flex items-center justify-center rounded-md border px-2 py-0.5 w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-xs font-medium"[39m
                [33mdata-slot[39m=[32m"badge"[39m
              [36m>[39m
                [0mHIGH[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-triangle-alert h-4 w-4 text-red-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Has urgent customers"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 9v4"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 17h.01"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"lucide lucide-activity h-4 w-4 text-green-500"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mtitle[39m=[32m"Recent activity"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"px-6 space-y-3"[39m
            [33mdata-slot[39m=[32m"card-content"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"font-semibold text-sm text-gray-900 mb-2"[39m
              [36m>[39m
                [0m1-3 Days Overdue[0m
              [36m</h3>[39m
              [36m<div[39m
                [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-file-text h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M14 2v4a2 2 0 0 0 2 2h4"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M10 9H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 13H8"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M16 17H8"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mInvoices:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold"[39m
                  [36m>[39m
                    [0m5[0m
                  [36m</span>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex items-center gap-1"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-dollar-sign h-3 w-3 text-gray-400"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<line[39m
                      [33mx1[39m=[32m"12"[39m
                      [33mx2[39m=[32m"12"[39m
                      [33my1[39m=[32m"2"[39m
                      [33my2[39m=[32m"22"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"text-gray-600"[39m
                  [36m>[39m
                    [0mTotal:[0m
                  [36m</span>[39m
                  [36m<span[39m
                    [33mclass[39m=[32m"font-mono font-bold text-right"[39m
                  [36m>[39m
                    [0mAED 15,000.00[0m
                  [36m</span>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 gap-2 text-xs"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-blue-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-mail h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
                  [36m/>[39m
                  [36m<rect[39m
                    [33mheight[39m=[32m"16"[39m
                    [33mrx[39m=[32m"2"[39m
                    [33mwidth[39m=[32m"20"[39m
                    [33mx[39m=[32m"2"[39m
                    [33my[39m=[32m"4"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mCan send: [0m
                  [0m3[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-1 text-orange-600"[39m
              [36m>[39m
                [36m<svg[39m
                  [33maria-hidden[39m=[32m"true"[39m
                  [33mclass[39m=[32m"lucide lucide-eye h-3 w-3"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mheight[39m=[32m"24"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mstroke-linecap[39m=[32m"round"[39m
                  [33mstroke-linejoin[39m=[32m"round"[39m
                  [33mstroke-width[39m=[32m"2"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [33mwidth[39m=[32m"24"[39m
                  [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[39m
                  [36m/>[39m
                  [36m<circle[39m
                    [33mcx[39m=[32m"12"[39m
                    [33mcy[39m=[32m"12"[39m
                    [33mr[39m=[32m"3"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [36m<span>[39m
                  [0mReview: [0m
                  [0m2[0m
                [36m</span>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</body>[39m

      330 |
      331 |     // Check for proper ARIA labels and roles
    > 332 |     const card = screen.getByRole('button') || screen.getByText('1-3 Days Overdue').closest('[role]')
          |                         ^
      333 |     expect(card).toBeInTheDocument()
      334 |
      335 |     // Check that action buttons are properly labeled

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/invoices/__tests__/bucket-card.test.tsx:332:25)

FAIL src/__tests__/e2e/bucket-invoice-management-e2e.test.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      151 | }
      152 |
    > 153 | test.describe('Bucket-Based Invoice Management E2E Tests', () => {
          |      ^
      154 |   test.beforeEach(async ({ page }) => {
      155 |     await setupTestData(page)
      156 |     await loginUser(page)

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.describe (src/__tests__/e2e/bucket-invoice-management-e2e.test.ts:153:6)

FAIL src/app/api/invoices/[id]/status/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/[id]/status/route.ts:21:20)
      at Object.require (src/app/api/invoices/[id]/status/__tests__/route.test.ts:8:19)

FAIL src/app/api/email/templates/[id]/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/email/templates/[id]/route.ts:24:20)
      at Object.<anonymous> (src/app/api/email/templates/[id]/__tests__/route.test.ts:9:16)

FAIL src/app/api/invoices/bulk/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/bulk/route.ts:21:20)
      at Object.require (src/app/api/invoices/bulk/__tests__/route.test.ts:8:23)

FAIL src/app/api/invoices/[id]/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/[id]/route.ts:24:20)
      at Object.require (src/app/api/invoices/[id]/__tests__/route.test.ts:8:30)

FAIL src/app/api/email/templates/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/email/templates/route.ts:21:20)
      at Object.<anonymous> (src/app/api/email/templates/__tests__/route.test.ts:9:16)

FAIL src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx (5.493 s)
  ● Drag & Drop Functionality › Step Order Updates › shows step numbers correctly

    TestingLibraryElementError: Found multiple elements with the text: 2

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m2[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m2[0m
    [36m</span>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m2[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r6g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      425 |       // Should show step numbers 1, 2, 3, 4
      426 |       expect(screen.getByText('1')).toBeInTheDocument() // Step order number
    > 427 |       expect(screen.getByText('2')).toBeInTheDocument()
          |                     ^
      428 |       expect(screen.getByText('3')).toBeInTheDocument()
      429 |       expect(screen.getByText('4')).toBeInTheDocument()
      430 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:427:21)

  ● Drag & Drop Functionality › Performance with Large Lists › handles sequences with many steps efficiently

    expect(received).toBeLessThan(expected)

    Expected: < 100
    Received:   213.3144170000005

      479 |
      480 |       // Should render within reasonable time (< 100ms for 20 items)
    > 481 |       expect(endTime - startTime).toBeLessThan(100)
          |                                   ^
      482 |
      483 |       // Should render all drag handles
      484 |       for (let i = 1; i <= 20; i++) {

      at Object.toBeLessThan (src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:481:35)

  ● Drag & Drop Functionality › Performance with Large Lists › maintains responsive UI during drag operations

    TestingLibraryElementError: Unable to find an element with the text: Save Sequence. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r90»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      525 |
      526 |       // UI should remain responsive - all controls should be accessible
    > 527 |       expect(screen.getByText('Save Sequence')).toBeInTheDocument()
          |                     ^
      528 |       expect(screen.getByText('Cancel')).toBeInTheDocument()
      529 |       expect(screen.getByLabelText('Sequence Name *')).toBeInTheDocument()
      530 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:527:21)

  ● Drag & Drop Functionality › Integration with Sequence Features › updates sequence duration calculation after reordering

    TestingLibraryElementError: Found multiple elements with the text: /6\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m6.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m6.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rfk»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      760 |       // Should show duration calculation
      761 |       // With 2 WAIT steps of 3 days each = 6 days total
    > 762 |       expect(screen.getByText(/6\.0 days/)).toBeInTheDocument()
          |                     ^
      763 |     })
      764 |
      765 |     it('maintains step validation after reordering', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:762:21)

  ● Drag & Drop Functionality › Integration with Sequence Features › integrates with step editing after reordering

    TestingLibraryElementError: Unable to find a label with the text of: /edit/i

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rgk»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      786 |
      787 |       // Should still be able to edit steps after reordering
    > 788 |       const editButtons = screen.getAllByLabelText(/edit/i)
          |                                  ^
      789 |       
      790 |       if (editButtons.length > 0) {
      791 |         await user.click(editButtons[0])

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:111:38)
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByLabelText (src/components/follow-ups/__tests__/drag-drop-functionality.test.tsx:788:34)

FAIL src/app/[locale]/dashboard/analytics/__tests__/page.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../../components/analytics/__tests__/test-utils' from 'src/app/[locale]/dashboard/analytics/__tests__/page.test.tsx'

      12 |   mockDashboardMetrics,
      13 |   mockPerformanceData,
    > 14 |   mockEmailMetrics,
         |                    ^
      15 |   mockAnalyticsApi,
      16 |   mockCompany,
      17 |   mockUser,

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (src/app/[locale]/dashboard/analytics/__tests__/page.test.tsx:14:20)

FAIL src/app/api/users/__tests__/route.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/users/route.ts:26:20)
      at Object.<anonymous> (src/app/api/users/__tests__/route.test.ts:8:16)

FAIL src/app/api/payments/__tests__/payment-api.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/payments/route.ts:32:20)
      at Object.<anonymous> (src/app/api/payments/__tests__/payment-api.test.ts:9:16)

FAIL src/lib/services/__tests__/email-scheduling-service.test.ts
  ● Test suite failed to run

    Cannot find module '../email-service' from 'src/lib/services/__tests__/email-scheduling-service.test.ts'

      54 | }))
      55 |
    > 56 | jest.mock('../email-service', () => ({
         |      ^
      57 |   getDefaultEmailService: jest.fn(() => ({
      58 |     sendEmail: jest.fn()
      59 |   }))

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (src/lib/services/__tests__/email-scheduling-service.test.ts:56:6)

FAIL src/lib/services/__tests__/invoice-status-service.test.ts
  ● Test suite failed to run

      [31mx[0m Expression expected
         ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/src/lib/services/__tests__/invoice-status-service.test.ts[0m:536:1]
     [2m533[0m |       expect(formatUAECurrency).toBeDefined()
     [2m534[0m |     })
     [2m535[0m |   })
     [2m536[0m | })
         : [35;1m^[0m
         `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL src/lib/services/__tests__/customer-consolidation-service.test.ts
  ● Test suite failed to run

    ReferenceError: Cannot access 'mockPrisma' before initialization

      43 | // Mock the prisma import
      44 | jest.mock('../../prisma', () => ({
    > 45 |   prisma: mockPrisma
         |           ^
      46 | }))
      47 |
      48 | describe('CustomerConsolidationService', () => {

      at mockPrisma (src/lib/services/__tests__/customer-consolidation-service.test.ts:45:11)
      at Object.<anonymous> (src/lib/services/customer-consolidation-service.ts:23:17)
      at Object.<anonymous> (src/lib/services/__tests__/customer-consolidation-service.test.ts:12:39)

FAIL src/components/follow-ups/__tests__/uae-calendar-integration.test.ts
  ● UAE Calendar Integration › Prayer Time Avoidance › avoids sending communications during Isha prayer (night)

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      210 |       
      211 |       // 8 PM should be outside business hours anyway
    > 212 |       expect(nightPrayerValidation.withinHours).toBe(false)
          |                                                 ^
      213 |       if (nightPrayerValidation.reason) {
      214 |         expect(nightPrayerValidation.reason).toContain('outside UAE business hours')
      215 |       }

      at Object.toBe (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:212:49)

  ● UAE Calendar Integration › Ramadan Special Hours Handling › validates Ramadan template cultural appropriateness

    expect(received).toBeGreaterThan(expected)

    Expected: > 80
    Received:   80

      266 |       
      267 |       expect(englishValidation.appropriate).toBe(true)
    > 268 |       expect(englishValidation.score).toBeGreaterThan(80)
          |                                       ^
      269 |       expect(englishValidation.recommendations.length).toBeLessThan(2)
      270 |     })
      271 |

      at Object.toBeGreaterThan (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:268:39)

  ● UAE Calendar Integration › Calendar Integration Edge Cases › handles invalid date inputs gracefully

    expect(received).not.toThrow()

    Error name:    "RangeError"
    Error message: "Invalid time zone specified: Invalid/Timezone"

          211 |   } => {
          212 |     const now = new Date()
        > 213 |     const dubaiTime = new Intl.DateTimeFormat('en-CA', {
              |                       ^
          214 |       timeZone: timezone,
          215 |       hour12: false,
          216 |       hour: '2-digit',

      at Object.validateBusinessHours (src/lib/uae-test-utils.ts:213:23)
      at validateBusinessHours (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:508:33)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:509:14)
      at Object.toThrow (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:509:14)

  ● UAE Calendar Integration › Calendar Integration Edge Cases › provides fallback behavior for system clock issues

    expect(received).not.toThrow()

    Error name:    "Error"
    Error message: "System clock unavailable"

          519 |           constructor(...args: any[]) {
          520 |             if (args.length === 0) {
        > 521 |               throw new Error('System clock unavailable')
              |                     ^
          522 |             }
          523 |             super(...args)
          524 |           }

      at new global.Date (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:521:21)
      at Object.validateBusinessHours (src/lib/uae-test-utils.ts:212:17)
      at validateBusinessHours (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:529:35)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:530:16)
      at Object.toThrow (src/components/follow-ups/__tests__/uae-calendar-integration.test.ts:530:16)

FAIL src/components/follow-ups/__tests__/cultural-compliance.test.ts
  ● Cultural Compliance Features › Cultural Appropriateness Scoring › scores appropriate English business content highly

    expect(received).toBeGreaterThan(expected)

    Expected: > 85
    Received:   80

      140 |       
      141 |       expect(validation.appropriate).toBe(true)
    > 142 |       expect(validation.score).toBeGreaterThan(85)
          |                                ^
      143 |       expect(validation.recommendations.length).toBeLessThan(2)
      144 |     })
      145 |

      at Object.toBeGreaterThan (src/components/follow-ups/__tests__/cultural-compliance.test.ts:142:32)

  ● Cultural Compliance Features › Arabic/English Template Integration › validates template variable consistency across languages

    expect(received).toContain(expected) // indexOf

    Expected substring: "{{customer_name}}"
    Received string:    "عزيزي {{customer_name_ar}}،·
    السلام عليكم وتحياتنا من {{company_name}}.·
    نأمل أن يصلك هذا البريد خلال ساعات العمل في الإمارات (الأحد - الخميس، 9:00 ص - 6:00 م).·
    تفاصيل الفاتورة:
    - الرقم: {{invoice_number}}
    - المبلغ: {{invoice_amount}} درهم
    - تاريخ الاستحقاق: {{due_date}}·
    يرجى الاتصال بنا خلال ساعات العمل للحصول على أي مساعدة:
    �� {{support_email}}
    �� {{contact_phone}}·
    أطيب التحيات،
    {{company_name}}
    الرقم الضريبي: {{company_trn}}"

      326 |       // Should have common variables like customer_name, invoice_number, etc.
      327 |       expect(template.contentEn).toContain('{{customer_name}}')
    > 328 |       expect(template.contentAr).toContain('{{customer_name}}')
          |                                  ^
      329 |     })
      330 |
      331 |     it('supports language-specific formatting', () => {

      at Object.toContain (src/components/follow-ups/__tests__/cultural-compliance.test.ts:328:34)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates proper Islamic greetings

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      353 |       )
      354 |       
    > 355 |       expect(englishValidation.appropriate).toBe(true)
          |                                             ^
      356 |       expect(englishValidation.score).toBeGreaterThan(85)
      357 |     })
      358 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:355:45)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates respectful titles and forms of address

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      371 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(respectfulContent, 'en')
      372 |       
    > 373 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      374 |       expect(validation.score).toBeGreaterThan(90)
      375 |       expect(validation.recommendations.length).toBeLessThan(2)
      376 |     })

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:373:38)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates appropriate closing formulas

    expect(received).toBeGreaterThan(expected)

    Expected: > 70
    Received:   65

      389 |         const validation = culturalComplianceUtils.validateBusinessEtiquette(content, 'en')
      390 |         
    > 391 |         expect(validation.score).toBeGreaterThan(70)
          |                                  ^
      392 |       })
      393 |     })
      394 |

      at toBeGreaterThan (src/components/follow-ups/__tests__/cultural-compliance.test.ts:391:34)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/components/follow-ups/__tests__/cultural-compliance.test.ts:387:22)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates patience and understanding in communication

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      413 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(patientContent, 'en')
      414 |       
    > 415 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      416 |       expect(validation.score).toBeGreaterThan(85)
      417 |     })
      418 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:415:38)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates cultural sensitivity during Ramadan

    expect(received).toBeGreaterThan(expected)

    Expected: > 85
    Received:   80

      425 |       
      426 |       expect(validation.appropriate).toBe(true)
    > 427 |       expect(validation.score).toBeGreaterThan(85)
          |                                ^
      428 |       expect(ramadanTemplate.contentEn).toContain('Ramadan Kareem')
      429 |       expect(ramadanTemplate.contentEn).toContain('blessed month')
      430 |     })

      at Object.toBeGreaterThan (src/components/follow-ups/__tests__/cultural-compliance.test.ts:427:32)

  ● Cultural Compliance Features › UAE Business Etiquette Compliance › validates family and community respect

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      443 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(familyRespectContent, 'en')
      444 |       
    > 445 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      446 |       expect(validation.score).toBeGreaterThan(90)
      447 |     })
      448 |   })

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:445:38)

  ● Cultural Compliance Features › Tone Progression Validation › ensures progression maintains respect

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      522 |       )
      523 |       
    > 524 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      525 |       expect(validation.score).toBeGreaterThan(75)
      526 |     })
      527 |   })

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:524:38)

  ● Cultural Compliance Features › Template Validation Edge Cases › validates templates with excessive length

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      570 |       const validation = templateValidationUtils.validateUAETemplate(longTemplate)
      571 |       
    > 572 |       expect(validation.valid).toBe(true) // Should handle long content
          |                                ^
      573 |       expect(validation.score).toBeGreaterThan(70)
      574 |     })
      575 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:572:32)

  ● Cultural Compliance Features › Template Validation Edge Cases › handles templates with special characters and emojis

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      582 |       const validation = templateValidationUtils.validateUAETemplate(emojiTemplate)
      583 |       
    > 584 |       expect(validation.valid).toBe(true) // Should handle emojis appropriately
          |                                ^
      585 |       expect(validation.score).toBeGreaterThan(70)
      586 |     })
      587 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:584:32)

  ● Cultural Compliance Features › Template Validation Edge Cases › validates templates with mixed script content

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      596 |       const validation = templateValidationUtils.validateUAETemplate(mixedScriptTemplate)
      597 |       
    > 598 |       expect(validation.valid).toBe(true) // Mixed script is acceptable in UAE
          |                                ^
      599 |       expect(validation.score).toBeGreaterThan(60)
      600 |     })
      601 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:598:32)

  ● Cultural Compliance Features › Cultural Context Integration › validates Eid holiday greetings

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      624 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(eidTemplate.contentEn, 'en')
      625 |       
    > 626 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      627 |       expect(validation.score).toBeGreaterThan(85)
      628 |     })
      629 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:626:38)

  ● Cultural Compliance Features › Cultural Context Integration › validates business communication during Islamic months

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      636 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(islamicMonthTemplate.contentEn, 'en')
      637 |       
    > 638 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      639 |       expect(validation.score).toBeGreaterThan(80)
      640 |     })
      641 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:638:38)

  ● Cultural Compliance Features › Cultural Context Integration › validates respect for UAE National Day

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      649 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(nationalDayTemplate.contentEn, 'en')
      650 |       
    > 651 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      652 |       expect(validation.score).toBeGreaterThan(85)
      653 |     })
      654 |

      at Object.toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:651:38)

  ● Cultural Compliance Features › Cultural Context Integration › ensures multi-emirate cultural sensitivity

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      662 |         
      663 |         const validation = templateValidationUtils.validateUAETemplate(emirateTemplate)
    > 664 |         expect(validation.valid).toBe(true)
          |                                  ^
      665 |         expect(validation.score).toBeGreaterThan(80)
      666 |       })
      667 |     })

      at toBe (src/components/follow-ups/__tests__/cultural-compliance.test.ts:664:34)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/components/follow-ups/__tests__/cultural-compliance.test.ts:656:30)

FAIL src/components/follow-ups/__tests__/automation-dashboard.test.tsx
  ● Test suite failed to run

    Cannot find module 'vitest' from 'src/components/follow-ups/__tests__/automation-dashboard.test.tsx'

      19 | vi.mock('../manual-override-controls', () => ({
      20 |   ManualOverrideControls: ({ onBulkAction }: any) => (
    > 21 |     <div data-testid="manual-override-controls">
         |                 ^
      22 |       <button onClick={() => onBulkAction('PAUSE', ['seq1'])}>
      23 |         Pause
      24 |       </button>

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (src/components/follow-ups/__tests__/automation-dashboard.test.tsx:21:17)

FAIL src/components/email-templates/__tests__/template-library.test.tsx
  ● TemplateLibrary Component › Basic Rendering › renders template library correctly

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:24:26)

  ● TemplateLibrary Component › Basic Rendering › displays search and filter controls

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:41:26)

  ● TemplateLibrary Component › Basic Rendering › shows UAE template categories

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:53:26)

  ● TemplateLibrary Component › Template Categories › displays category icons and descriptions

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:71:26)

  ● TemplateLibrary Component › Template Categories › shows template counts for each category

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:90:26)

  ● TemplateLibrary Component › Template Categories › displays templates within categories

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:103:26)

  ● TemplateLibrary Component › Template Details › shows template statistics

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:120:26)

  ● TemplateLibrary Component › Template Details › displays effectiveness progress bars

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:138:26)

  ● TemplateLibrary Component › Template Details › shows template tags

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:150:26)

  ● TemplateLibrary Component › Template Details › indicates bilingual support

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:164:26)

  ● TemplateLibrary Component › Search and Filtering › filters templates by search query

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:179:26)

  ● TemplateLibrary Component › Search and Filtering › filters templates by category

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:195:26)

  ● TemplateLibrary Component › Search and Filtering › searches in Arabic content

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:214:26)

  ● TemplateLibrary Component › Search and Filtering › shows no results state when search yields nothing

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:229:26)

  ● TemplateLibrary Component › Search and Filtering › clears filters when clear button is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:245:26)

  ● TemplateLibrary Component › Template Actions › shows preview button for each template

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:267:26)

  ● TemplateLibrary Component › Template Actions › shows use template button for each template

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:280:26)

  ● TemplateLibrary Component › Template Actions › shows select button when onSelectTemplate is provided

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:293:26)

  ● TemplateLibrary Component › Template Actions › calls onImportTemplate when use template is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:308:26)

  ● TemplateLibrary Component › Template Actions › calls onSelectTemplate when select button is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:330:26)

  ● TemplateLibrary Component › Template Preview › opens preview dialog when preview button is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:351:26)

  ● TemplateLibrary Component › Template Preview › shows preview tabs for different content types

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:366:26)

  ● TemplateLibrary Component › Template Preview › switches between preview tabs

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:382:26)

  ● TemplateLibrary Component › Template Preview › shows preview note about variable replacement

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:401:26)

  ● TemplateLibrary Component › Template Preview › allows importing template from preview dialog

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:417:26)

  ● TemplateLibrary Component › Template Preview › closes preview dialog when close button is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:435:26)

  ● TemplateLibrary Component › Localization › displays Arabic names when locale is Arabic

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:454:26)

  ● TemplateLibrary Component › Localization › shows Arabic template names in Arabic locale

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:468:26)

  ● TemplateLibrary Component › UAE Business Features › shows UAE-specific template content

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:498:26)

  ● TemplateLibrary Component › UAE Business Features › includes UAE business variables in templates

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:511:26)

  ● TemplateLibrary Component › UAE Business Features › shows effectiveness ratings for UAE market

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:530:26)

  ● TemplateLibrary Component › Error Handling › handles import errors gracefully

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:552:26)

  ● TemplateLibrary Component › Error Handling › shows loading state during import

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:573:26)

  ● TemplateLibrary Component › Accessibility › has proper ARIA labels and roles

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:591:26)

  ● TemplateLibrary Component › Accessibility › supports keyboard navigation

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:604:26)

  ● TemplateLibrary Component › Performance › renders large number of templates efficiently

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-library.test.tsx:624:26)

FAIL src/components/email-templates/__tests__/template-builder.test.tsx
  ● TemplateBuilder Component › Basic Rendering › renders create template form correctly

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:27:26)

  ● TemplateBuilder Component › Basic Rendering › renders edit template form when templateId is provided

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:45:26)

  ● TemplateBuilder Component › Basic Rendering › displays all required tabs

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:61:26)

  ● TemplateBuilder Component › Basic Information Tab › validates required fields

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:79:26)

  ● TemplateBuilder Component › Basic Information Tab › populates template content when category is selected

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:97:26)

  ● TemplateBuilder Component › Basic Information Tab › shows UAE business context alert

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:117:26)

  ● TemplateBuilder Component › Basic Information Tab › displays quick template options

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:131:26)

  ● TemplateBuilder Component › Basic Information Tab › applies quick template when clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:146:26)

  ● TemplateBuilder Component › Content Tab › shows language selector

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:169:26)

  ● TemplateBuilder Component › Content Tab › switches between English and Arabic content

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:169:26)

  ● TemplateBuilder Component › Content Tab › validates bilingual content requirements

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:169:26)

  ● TemplateBuilder Component › Content Tab › shows proper font family for Arabic content

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:169:26)

  ● TemplateBuilder Component › Variable Insertion › displays template variables sidebar

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:232:26)

  ● TemplateBuilder Component › Variable Insertion › shows UAE-specific variables

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:232:26)

  ● TemplateBuilder Component › Variable Insertion › inserts variables when clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:232:26)

  ● TemplateBuilder Component › Variable Insertion › shows variable descriptions in current locale

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:232:26)

  ● TemplateBuilder Component › Settings Tab › shows UAE-specific settings

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:281:26)

  ● TemplateBuilder Component › Settings Tab › defaults to UAE timezone

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:281:26)

  ● TemplateBuilder Component › Settings Tab › shows UAE business hours information

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:281:26)

  ● TemplateBuilder Component › Settings Tab › allows priority selection

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:281:26)

  ● TemplateBuilder Component › Settings Tab › has business hours only enabled by default

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:281:26)

  ● TemplateBuilder Component › Advanced Tab › allows adding and removing tags

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:323:26)

  ● TemplateBuilder Component › Advanced Tab › shows active template toggle

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:323:26)

  ● TemplateBuilder Component › Advanced Tab › allows entering tags with Enter key

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:323:26)

  ● TemplateBuilder Component › Form Submission › submits valid template data

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:369:26)

  ● TemplateBuilder Component › Form Submission › shows loading state during submission

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:411:26)

  ● TemplateBuilder Component › Form Submission › calls onCancel when cancel button is clicked

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:440:26)

  ● TemplateBuilder Component › UAE Cultural Compliance › validates cultural appropriateness of content

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:458:26)

  ● TemplateBuilder Component › UAE Cultural Compliance › requires TRN reference in templates

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:478:26)

  ● TemplateBuilder Component › Arabic Language Support › renders Arabic interface correctly when locale is ar

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:514:26)

  ● TemplateBuilder Component › Arabic Language Support › validates Arabic text input

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:529:26)

  ● TemplateBuilder Component › Preview Functionality › shows preview button

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:550:26)

  ● TemplateBuilder Component › Preview Functionality › toggles preview visibility

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:563:26)

  ● TemplateBuilder Component › Error Handling › handles submission errors gracefully

    Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.

    Check the render method of `Wrapper`.

      135 |   }
      136 |
    > 137 |   return render(ui, { wrapper: Wrapper, ...renderOptions })
          |                ^
      138 | }
      139 |
      140 | // Mock Prisma client for testing

      at createFiberFromTypeAndProps (node_modules/react-dom/cjs/react-dom-client.development.js:4259:28)
      at createFiberFromElement (node_modules/react-dom/cjs/react-dom-client.development.js:4273:14)
      at reconcileChildFibersImpl (node_modules/react-dom/cjs/react-dom-client.development.js:7879:31)
      at node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
      at reconcileChildren (node_modules/react-dom/cjs/react-dom-client.development.js:8621:13)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:8914:7)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:26)
      at render (node_modules/@testing-library/react/dist/pure.js:292:10)
      at renderWithProviders (src/lib/test-utils.tsx:137:16)
      at Object.<anonymous> (src/components/email-templates/__tests__/template-builder.test.tsx:585:26)

FAIL src/components/analytics/__tests__/test-utils.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1056:18)
      at node_modules/@jest/core/build/index.js:1126:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/components/analytics/__tests__/sequence-performance.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../lib/api/analytics' from 'src/components/analytics/__tests__/sequence-performance.test.tsx'

      25 | jest.mock('recharts', () => mockRechartsComponents)
      26 |
    > 27 | jest.mock('../../../lib/api/analytics', () => ({
         |      ^
      28 |   analyticsApi: mockAnalyticsApi
      29 | }))
      30 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (src/components/analytics/__tests__/sequence-performance.test.tsx:27:6)

FAIL src/lib/__tests__/uae-cultural-compliance.test.ts
  ● UAE Cultural Compliance System › UAE Constants Validation › validates UAE phone number formats

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      39 |       
      40 |       expect(UAE_CONSTANTS.phoneFormats.mobile.test(validMobile)).toBe(true)
    > 41 |       expect(UAE_CONSTANTS.phoneFormats.landline.test(validLandline)).toBe(true)
         |                                                                       ^
      42 |       expect(UAE_CONSTANTS.phoneFormats.mobile.test(invalidPhone)).toBe(false)
      43 |     })
      44 |

      at Object.toBe (src/lib/__tests__/uae-cultural-compliance.test.ts:41:71)

  ● UAE Cultural Compliance System › Cultural Compliance Validation › validates appropriate English business etiquette

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  ["Use formal greetings like \"Dear\" or \"Respected\""]

      113 |       expect(validation.appropriate).toBe(true)
      114 |       expect(validation.score).toBeGreaterThan(70)
    > 115 |       expect(validation.recommendations).toHaveLength(0)
          |                                          ^
      116 |     })
      117 |
      118 |     it('flags inappropriate English content', () => {

      at Object.toHaveLength (src/lib/__tests__/uae-cultural-compliance.test.ts:115:42)

  ● UAE Cultural Compliance System › Cultural Compliance Validation › validates UAE business hours compliance

    expect(received).toHaveProperty(path)

    Expected path: "reason"
    Received path: []

    Received value: {"withinHours": true}

      159 |       const fridayTest = culturalComplianceUtils.validateBusinessHours('10:00', 'Asia/Dubai')
      160 |       expect(fridayTest).toHaveProperty('withinHours')
    > 161 |       expect(fridayTest).toHaveProperty('reason')
          |                          ^
      162 |     })
      163 |   })
      164 |

      at Object.toHaveProperty (src/lib/__tests__/uae-cultural-compliance.test.ts:161:26)

  ● UAE Cultural Compliance System › Ramadan and Cultural Sensitivity › respects Islamic business practices

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      265 |       
      266 |       const validation = culturalComplianceUtils.validateBusinessEtiquette(islamicTemplate.contentEn, 'en')
    > 267 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      268 |       expect(validation.score).toBeGreaterThan(85)
      269 |     })
      270 |   })

      at Object.toBe (src/lib/__tests__/uae-cultural-compliance.test.ts:267:38)

  ● UAE Cultural Compliance System › Multi-Emirates Support › supports different emirate variations

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      280 |         
      281 |         const validation = templateValidationUtils.validateUAETemplate(emirateTemplate)
    > 282 |         expect(validation.valid).toBe(true)
          |                                  ^
      283 |       })
      284 |     })
      285 |   })

      at toBe (src/lib/__tests__/uae-cultural-compliance.test.ts:282:34)
          at Array.forEach (<anonymous>)
      at Object.forEach (src/lib/__tests__/uae-cultural-compliance.test.ts:274:30)

  ● UAE Cultural Compliance System › Error Handling and Edge Cases › handles mixed language content

    expect(received).toBeGreaterThan(expected)

    Expected: > 50
    Received:   40

      328 |       const validation = templateValidationUtils.validateUAETemplate(mixedTemplate)
      329 |       // Should still pass basic validation despite mixed content
    > 330 |       expect(validation.score).toBeGreaterThan(50)
          |                                ^
      331 |     })
      332 |
      333 |     it('validates extremely long content', () => {

      at Object.toBeGreaterThan (src/lib/__tests__/uae-cultural-compliance.test.ts:330:32)

  ● UAE Cultural Compliance System › Error Handling and Edge Cases › validates extremely long content

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      339 |       
      340 |       const validation = templateValidationUtils.validateUAETemplate(longTemplate)
    > 341 |       expect(validation.valid).toBe(true) // Should handle large content
          |                                ^
      342 |     })
      343 |
      344 |     it('validates special characters and emojis', () => {

      at Object.toBe (src/lib/__tests__/uae-cultural-compliance.test.ts:341:32)

  ● UAE Cultural Compliance System › Error Handling and Edge Cases › validates special characters and emojis

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      349 |       
      350 |       const validation = templateValidationUtils.validateUAETemplate(emojiTemplate)
    > 351 |       expect(validation.valid).toBe(true) // Should handle emojis appropriately
          |                                ^
      352 |     })
      353 |   })
      354 | })

      at Object.toBe (src/lib/__tests__/uae-cultural-compliance.test.ts:351:32)

FAIL src/components/analytics/__tests__/analytics-dashboard.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../lib/api/analytics' from 'src/components/analytics/__tests__/analytics-dashboard.test.tsx'

      27 | jest.mock('recharts', () => mockRechartsComponents)
      28 |
    > 29 | jest.mock('../../../lib/api/analytics', () => ({
         |      ^
      30 |   analyticsApi: mockAnalyticsApi
      31 | }))
      32 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (src/components/analytics/__tests__/analytics-dashboard.test.tsx:29:6)

FAIL src/tests/payment-integration/stripe-payment-flow.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'src/tests/payment-integration/stripe-payment-flow.test.ts'

       6 | import { describe, it, expect, beforeEach, vi } from 'vitest'
       7 | import { NextRequest } from 'next/server'
    >  8 | import { getServerSession } from 'next-auth'
         |                 ^
       9 | import { prismaMock } from '../setup/prisma-mock'
      10 | import { PaymentMethod } from '@prisma/client'
      11 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (src/tests/payment-integration/stripe-payment-flow.test.ts:8:17)

FAIL src/components/analytics/__tests__/email-analytics.test.tsx
  ● Test suite failed to run

    Cannot find module '../../../lib/api/analytics' from 'src/components/analytics/__tests__/email-analytics.test.tsx'

      27 | jest.mock('recharts', () => mockRechartsComponents)
      28 |
    > 29 | jest.mock('../../../lib/api/analytics', () => ({
         |      ^
      30 |   analyticsApi: mockAnalyticsApi
      31 | }))
      32 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (src/components/analytics/__tests__/email-analytics.test.tsx:29:6)

FAIL src/lib/__tests__/uae-template-sequence-comprehensive.test.ts
  ● UAE Template and Sequence Comprehensive Tests › Template Cultural Validation › Bilingual Template Validation › should validate Arabic content for business appropriateness

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      118 |         const validation = templateValidationUtils.validateUAETemplate(arabicTemplate)
      119 |
    > 120 |         expect(validation.valid).toBe(true)
          |                                  ^
      121 |         expect(validation.score).toBeGreaterThan(70)
      122 |       })
      123 |     })

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:120:34)

  ● UAE Template and Sequence Comprehensive Tests › Template Cultural Validation › Template Variable Validation › should require essential UAE business variables

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      141 |         expect(validation.recommendations.some(rec => 
      142 |           rec.includes('customer_name')
    > 143 |         )).toBe(true)
          |            ^
      144 |       })
      145 |
      146 |       it('should validate TRN variable inclusion for UAE compliance', () => {

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:143:12)

  ● UAE Template and Sequence Comprehensive Tests › Template Cultural Validation › Template Variable Validation › should recognize standard UAE business variables

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      180 |         const validation = templateValidationUtils.validateUAETemplate(templateWithVariables)
      181 |
    > 182 |         expect(validation.valid).toBe(true)
          |                                  ^
      183 |         expect(validation.issues.some(issue => 
      184 |           issue.includes('Missing required variables')
      185 |         )).toBe(false)

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:182:34)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Multi-Step Sequence Progression › should validate a complete 4-step UAE-compliant sequence

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      389 |         )
      390 |
    > 391 |         expect(validation.appropriate).toBe(true)
          |                                        ^
      392 |         expect(validation.issues).toHaveLength(0)
      393 |         expect(validation.suggestions).toHaveLength(0)
      394 |       })

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:391:40)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Multi-Step Sequence Progression › should flag culturally inappropriate sequence progression

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

      418 |         )
      419 |
    > 420 |         expect(validation.appropriate).toBe(false)
          |                                        ^
      421 |         expect(validation.issues.length).toBeGreaterThan(2)
      422 |         expect(validation.issues.some(issue => 
      423 |           issue.includes('too soon')

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:420:40)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Customer Relationship Adaptation › should validate government-appropriate sequence content

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      463 |         )
      464 |
    > 465 |         expect(validation.appropriate).toBe(true)
          |                                        ^
      466 |       })
      467 |
      468 |       it('should validate VIP customer sequence with enhanced courtesy', () => {

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:465:40)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Customer Relationship Adaptation › should validate VIP customer sequence with enhanced courtesy

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      491 |         )
      492 |
    > 493 |         expect(validation.appropriate).toBe(true)
          |                                        ^
      494 |       })
      495 |
      496 |       it('should validate corporate customer sequence with business focus', () => {

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:493:40)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Customer Relationship Adaptation › should validate corporate customer sequence with business focus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      519 |         )
      520 |
    > 521 |         expect(validation.appropriate).toBe(true)
          |                                        ^
      522 |       })
      523 |     })
      524 |

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:521:40)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Cultural Cooldown Periods › should enforce appropriate delays between communications

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      551 |         )
      552 |
    > 553 |         expect(appropriateValidation.appropriate).toBe(true)
          |                                                   ^
      554 |         expect(inappropriateValidation.appropriate).toBe(false)
      555 |         expect(inappropriateValidation.issues.length).toBeGreaterThan(2)
      556 |       })

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:553:51)

  ● UAE Template and Sequence Comprehensive Tests › Sequence Cultural Compliance › Prayer Time and Holiday Integration › should integrate with UAE calendar for sequence scheduling

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      603 |         )
      604 |
    > 605 |         expect(validation.appropriate).toBe(true)
          |                                        ^
      606 |       })
      607 |
      608 |       it('should handle Ramadan sequence adjustments', () => {

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:605:40)

  ● UAE Template and Sequence Comprehensive Tests › Integration Testing › End-to-End Template and Sequence Integration › should validate complete business process from template to sequence

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

      937 |           sequence, 'REGULAR'
      938 |         )
    > 939 |         expect(sequenceValidation.appropriate).toBe(true)
          |                                                ^
      940 |
      941 |         // Score the cultural compliance
      942 |         const culturalScore = CulturalComplianceService.calculateCulturalScore(

      at Object.toBe (src/lib/__tests__/uae-template-sequence-comprehensive.test.ts:939:48)

FAIL src/__tests__/utils/uae-test-data.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      62 | }
      63 |
    > 64 | // UAE business email generator
         |                ^
      65 | export const generateBusinessEmail = (companyName?: string): string => {
      66 |   const domain = companyName 
      67 |     ? `${companyName.toLowerCase().replace(/\s+/g, '')}.ae`

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.ts:64:16)

FAIL src/__tests__/mocks/email-service-mocks.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1056:18)
      at node_modules/@jest/core/build/index.js:1126:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/__tests__/utils/uae-test-data.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      62 | }
      63 |
    > 64 | // UAE business email generator
         |                ^
      65 | export const generateBusinessEmail = (companyName?: string): string => {
      66 |   const domain = companyName 
      67 |     ? `${companyName.toLowerCase().replace(/\s+/g, '')}.ae`

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.ts:64:16)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.test.ts:8:22)

FAIL src/__tests__/mocks/prisma.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1056:18)
      at node_modules/@jest/core/build/index.js:1126:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/__tests__/integration/import-functionality.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      62 | }
      63 |
    > 64 | // UAE business email generator
         |                ^
      65 | export const generateBusinessEmail = (companyName?: string): string => {
      66 |   const domain = companyName 
      67 |     ? `${companyName.toLowerCase().replace(/\s+/g, '')}.ae`

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.ts:64:16)
      at Object.<anonymous> (src/__tests__/integration/import-functionality.test.ts:11:22)

FAIL src/__tests__/e2e/test-environment-setup.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1056:18)
      at node_modules/@jest/core/build/index.js:1126:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL src/__tests__/e2e/uae-payment-automation-e2e.test.ts
  ● Test suite failed to run

    TypeError: (0 , _emailservice.getDefaultEmailService) is not a function

      77 |
      78 |   private rateLimits: RateLimitConfig
    > 79 |   private emailService = getDefaultEmailService()
         |                                                ^
      80 |
      81 |   constructor(customRateLimits?: Partial<RateLimitConfig>) {
      82 |     this.rateLimits = { ...this.DEFAULT_RATE_LIMITS, ...customRateLimits }

      at new EmailSchedulingService (src/lib/services/email-scheduling-service.ts:79:48)
      at Object.<anonymous> (src/lib/services/email-scheduling-service.ts:685:39)
      at Object.<anonymous> (src/lib/services/sequence-execution-service.ts:20:33)
      at Object.<anonymous> (src/__tests__/e2e/uae-payment-automation-e2e.test.ts:20:35)

FAIL src/__tests__/e2e/performance-scale-e2e.test.ts
  ● Performance and Scale End-to-End Tests › Single Sequence Performance › should execute single sequence within performance threshold

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Single Sequence Performance › should maintain cultural compliance check performance

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Single Sequence Performance › should schedule emails efficiently

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Bulk Processing Performance › should handle 100 concurrent sequence executions efficiently

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Bulk Processing Performance › should maintain performance with large email queues

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Bulk Processing Performance › should handle cultural compliance validation at scale

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Database Performance Under Load › should handle complex analytics queries efficiently

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Database Performance Under Load › should maintain performance with large result sets

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Concurrent User Simulation › should handle multiple concurrent operations from different companies

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Concurrent User Simulation › should maintain cultural compliance under concurrent load

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Memory and Resource Management › should not have memory leaks during extended operations

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)

  ● Performance and Scale End-to-End Tests › Memory and Resource Management › should handle database connection pooling efficiently

    TypeError: Cannot read properties of undefined (reading 'generateId')

      90 |     profiler = new PerformanceProfiler()
      91 |     
    > 92 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      93 |     testUserId = UAETestUtils.generateId()
      94 |
      95 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/performance-scale-e2e.test.ts:92:34)


  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      248 | // Setup for each test
      249 | export function setupTestDatabase() {
    > 250 |   beforeEach(() => {
          |   ^
      251 |     const db = initTestDatabase()
      252 |     db.setupDefaultMocks()
      253 |   })

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at beforeEach (src/lib/test-db-setup.ts:250:3)
      at Object.<anonymous> (src/__tests__/e2e/performance-scale-e2e.test.ts:89:28)

  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      253 |   })
      254 |
    > 255 |   afterEach(() => {
          |   ^
      256 |     cleanupTestDatabase()
      257 |   })
      258 |

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at afterEach (src/lib/test-db-setup.ts:255:3)
      at Object.<anonymous> (src/__tests__/e2e/performance-scale-e2e.test.ts:89:28)

FAIL src/__tests__/e2e/invoice-lifecycle-workflow.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      62 | }
      63 |
    > 64 | // UAE business email generator
         |                ^
      65 | export const generateBusinessEmail = (companyName?: string): string => {
      66 |   const domain = companyName 
      67 |     ? `${companyName.toLowerCase().replace(/\s+/g, '')}.ae`

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.ts:64:16)
      at Object.<anonymous> (src/__tests__/e2e/invoice-lifecycle-workflow.test.ts:12:22)

FAIL src/__tests__/e2e/cron-orchestration-e2e.test.ts
  ● Test suite failed to run

      [31mx[0m Expected ';', '}' or <eof>
        ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/src/__tests__/e2e/cron-orchestration-e2e.test.ts[0m:18:1]
     [2m15[0m | import { uaeBusinessHours } from '@/lib/services/uae-business-hours-service'
     [2m16[0m | 
     [2m17[0m | // Mock external dependencies for testing
     [2m18[0m | jest.mock '@/lib/email-service'
        : [35;1m^^^^|^^^^[0m[33;1m ^^^^^^^^^^^^^^^^^^^^^[0m
        :     [35;1m`-- [35;1mThis is the expression part of an expression statement[0m[0m
     [2m19[0m | 
     [2m20[0m | describe('Cron Job Orchestration E2E Tests', () => {
     [2m21[0m |   let testCompanyId: string
        `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL src/__tests__/e2e/cultural-compliance-e2e.test.ts
  ● UAE Cultural Compliance End-to-End Tests › Islamic Greetings and Etiquette Validation › should validate proper Islamic greetings in different contexts

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Islamic Greetings and Etiquette Validation › should validate closing phrases with Islamic context

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Islamic Greetings and Etiquette Validation › should recognize and reward use of Islamic phrases

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Customer Relationship Context Compliance › should enforce very formal tone for government customers

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Customer Relationship Context Compliance › should handle VIP customers with special consideration

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Customer Relationship Context Compliance › should validate tone escalation appropriateness

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Customer Relationship Context Compliance › should flag inappropriate tone escalation

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Ramadan and Islamic Calendar Awareness › should apply Ramadan-specific schedule adjustments

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Ramadan and Islamic Calendar Awareness › should detect and handle Ramadan period appropriately

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Ramadan and Islamic Calendar Awareness › should provide appropriate cultural timing preferences

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Arabic Language and RTL Support › should accurately detect Arabic content and RTL requirements

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Arabic Language and RTL Support › should validate bilingual template content

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Arabic Language and RTL Support › should extract and validate Arabic words correctly

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Business Hours and Prayer Time Integration › should validate scheduling respects prayer times throughout day

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Business Hours and Prayer Time Integration › should validate scheduled times against UAE business culture

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Business Hours and Prayer Time Integration › should provide culturally appropriate subject line suggestions

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Integration with Sequence Execution › should validate cultural compliance during sequence execution

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)

  ● UAE Cultural Compliance End-to-End Tests › Integration with Sequence Execution › should handle mixed language sequence execution

    TypeError: Cannot read properties of undefined (reading 'generateId')

      21 |     await setupTestDatabase()
      22 |     
    > 23 |     testCompanyId = UAETestUtils.generateId()
         |                                  ^
      24 |     testUserId = UAETestUtils.generateId()
      25 |
      26 |     await prisma.companies.create({

      at Object.generateId (src/__tests__/e2e/cultural-compliance-e2e.test.ts:23:34)


  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      248 | // Setup for each test
      249 | export function setupTestDatabase() {
    > 250 |   beforeEach(() => {
          |   ^
      251 |     const db = initTestDatabase()
      252 |     db.setupDefaultMocks()
      253 |   })

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at beforeEach (src/lib/test-db-setup.ts:250:3)
      at Object.<anonymous> (src/__tests__/e2e/cultural-compliance-e2e.test.ts:21:28)

  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      253 |   })
      254 |
    > 255 |   afterEach(() => {
          |   ^
      256 |     cleanupTestDatabase()
      257 |   })
      258 |

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at afterEach (src/lib/test-db-setup.ts:255:3)
      at Object.<anonymous> (src/__tests__/e2e/cultural-compliance-e2e.test.ts:21:28)

FAIL tests/performance/follow-up-automation-load.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      10 | import { faker } from '@faker-js/faker'
      11 |
    > 12 | // Performance test database
         |                ^
      13 | const prisma = new PrismaClient({
      14 |   datasources: {
      15 |     db: {

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (tests/performance/follow-up-automation-load.test.ts:12:16)

FAIL src/__tests__/e2e/analytics-monitoring-e2e.test.ts
  ● Analytics and Monitoring End-to-End Tests › Sequence Analytics Collection and Reporting › should track sequence performance metrics accurately

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Sequence Analytics Collection and Reporting › should provide real-time sequence execution monitoring

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Sequence Analytics Collection and Reporting › should track conversion rates and payment correlations

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Sequence Analytics Collection and Reporting › should provide UAE business hours compliance analytics

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Email Engagement Analytics › should track email delivery and engagement metrics

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Email Engagement Analytics › should analyze engagement patterns by customer type

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Email Engagement Analytics › should track cultural compliance impact on engagement

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Business Intelligence and Reporting › should generate comprehensive UAE business performance reports

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Business Intelligence and Reporting › should provide real-time monitoring dashboard data

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Business Intelligence and Reporting › should track and alert on system health metrics

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Custom Analytics and KPIs › should calculate UAE-specific KPIs and success metrics

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)

  ● Analytics and Monitoring End-to-End Tests › Custom Analytics and KPIs › should provide predictive analytics for sequence optimization

    TypeError: Cannot read properties of undefined (reading 'generateId')

      510 |     // Create test companies
      511 |     for (let i = 0; i < 2; i++) {
    > 512 |       const companyId = UAETestUtils.generateId()
          |                                      ^
      513 |       const company = await prisma.companies.create({
      514 |         data: {
      515 |           id: companyId,

      at generateId (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:512:38)
      at Object.createAnalyticsTestEnvironment (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:32:25)


  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      248 | // Setup for each test
      249 | export function setupTestDatabase() {
    > 250 |   beforeEach(() => {
          |   ^
      251 |     const db = initTestDatabase()
      252 |     db.setupDefaultMocks()
      253 |   })

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at beforeEach (src/lib/test-db-setup.ts:250:3)
      at Object.<anonymous> (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:31:28)

  ● Test suite failed to run

    Cannot add a hook after tests have started running. Hooks must be defined synchronously.

      253 |   })
      254 |
    > 255 |   afterEach(() => {
          |   ^
      256 |     cleanupTestDatabase()
      257 |   })
      258 |

      at eventHandler (node_modules/jest-circus/build/jestAdapterInit.js:114:38)
      at afterEach (src/lib/test-db-setup.ts:255:3)
      at Object.<anonymous> (src/__tests__/e2e/analytics-monitoring-e2e.test.ts:31:28)

FAIL tests/integration/sprint-2-consolidation-integration.test.ts
  ● Test suite failed to run

    Cannot find module '@jest/testing-library/jest-dom' from 'tests/integration/sprint-2-consolidation-integration.test.ts'

       7 | import { describe, it, expect, beforeAll, afterAll, beforeEach, afterEach } from '@jest/testing-library/jest-dom'
       8 | import { consolidatedEmailService } from '@/lib/services/consolidated-email-service'
    >  9 | import { pdfAttachmentService } from '@/lib/services/pdf-attachment-service'
         |                  ^
      10 | import { enhancedEmailSchedulingService } from '@/lib/services/enhanced-email-scheduling-service'
      11 | import { culturalComplianceEnhancedService } from '@/lib/services/cultural-compliance-enhanced-service'
      12 | import { awsSESConsolidationService } from '@/lib/services/aws-ses-consolidation-service'

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/integration/sprint-2-consolidation-integration.test.ts:9:18)

FAIL tests/integration/sprint-1.5-acceptance-criteria.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/route.ts:21:20)
      at Object.<anonymous> (tests/integration/sprint-1.5-acceptance-criteria.test.ts:23:16)

FAIL src/components/follow-ups/__tests__/complex-scenarios.test.tsx (9.393 s)
  ● Complex Scenarios › Multi-Step Sequences Spanning Weeks › handles complex multi-week sequence correctly

    TestingLibraryElementError: Found multiple elements with the text: 7

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m7[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m7[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Complex multi_week Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[3...

      415 |
      416 |       // Should show all 7 steps
    > 417 |       expect(screen.getByText('7')).toBeInTheDocument() // Total steps
          |                     ^
      418 |
      419 |       // Should calculate total duration: 1 + 2 + 1 = 4 weeks = 28 days
      420 |       expect(screen.getByText(/28\.0 days/)).toBeInTheDocument()

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:417:21)

  ● Complex Scenarios › Multi-Step Sequences Spanning Weeks › supports reordering of complex sequences

    TestingLibraryElementError: Found multiple elements with the text: 7

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m7[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m7[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Complex multi_week Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r1g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[...

      488 |       // Should maintain order display
      489 |       expect(screen.getByText('1')).toBeInTheDocument()
    > 490 |       expect(screen.getByText('7')).toBeInTheDocument()
          |                     ^
      491 |     })
      492 |   })
      493 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:490:21)

  ● Complex Scenarios › Sequences That Cross UAE Holidays › provides appropriate timing for pre/post holiday communications

    TestingLibraryElementError: Found multiple elements with the text: /5\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m5.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m5.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Holiday-Aware Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r2g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      535 |
      536 |       // Should calculate appropriate buffer time
    > 537 |       expect(screen.getByText(/5\.0 days/)).toBeInTheDocument()
          |                     ^
      538 |     })
      539 |
      540 |     it('maintains cultural sensitivity during holiday periods', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:537:21)

  ● Complex Scenarios › Mixed Language Sequences (Arabic/English) › validates template compatibility with language settings

    expect(received).toBeDefined()

    Received: undefined

      654 |
      655 |       // Templates should exist for all language options
    > 656 |       expect(englishTemplate).toBeDefined()
          |                               ^
      657 |       expect(arabicTemplate).toBeDefined()
      658 |       expect(bilingualTemplate).toBeDefined()
      659 |     })

      at Object.toBeDefined (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:656:31)

  ● Complex Scenarios › Mixed Language Sequences (Arabic/English) › calculates appropriate timing between language switches

    TestingLibraryElementError: Found multiple elements with the text: /8\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m8.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m8.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Mixed Language Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r40»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
    ...

      671 |
      672 |       // Should calculate total duration: 3 + 5 = 8 days
    > 673 |       expect(screen.getByText(/8\.0 days/)).toBeInTheDocument()
          |                     ^
      674 |     })
      675 |   })
      676 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:673:21)

  ● Complex Scenarios › Business Hours Compliance Validation › validates business hours compliance in step editor

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Complex multi_week Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4g»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4h»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Contact":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Week 1 Wait":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Professional Follow-up":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Week 2 Wait":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Firm Notice":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Final Wait":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Final Notice":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Complex multi_week Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r4g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[...

      733 |
      734 |       // Edit a wait step
    > 735 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      736 |       await user.click(editButtons[1]) // Second step (wait step)
      737 |
      738 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:735:34)

  ● Complex Scenarios › Full Escalation Sequence Integration › handles complete escalation sequence correctly

    TestingLibraryElementError: Found multiple elements with the text: 8

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m8[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m8[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Full Escalation Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r50»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m...

      769 |
      770 |       // Should show total of 8 steps
    > 771 |       expect(screen.getByText('8')).toBeInTheDocument()
          |                     ^
      772 |     })
      773 |
      774 |     it('validates escalation tone progression', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:771:21)

  ● Complex Scenarios › Full Escalation Sequence Integration › calculates correct total duration for escalation

    TestingLibraryElementError: Found multiple elements with the text: /24\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m24.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m24.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Full Escalation Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r5g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m...

      816 |
      817 |       // Should calculate total duration: 3 + 7 + 14 = 24 days
    > 818 |       expect(screen.getByText(/24\.0 days/)).toBeInTheDocument()
          |                     ^
      819 |     })
      820 |   })
      821 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:818:21)

  ● Complex Scenarios › Performance with Complex Scenarios › handles large complex sequences efficiently

    TestingLibraryElementError: Found multiple elements with the text: 17

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m17[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m17[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Complex multi_week Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r60»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[...

      849 |
      850 |       // Should show correct step count
    > 851 |       expect(screen.getByText('17')).toBeInTheDocument() // 7 original + 10 additional
          |                     ^
      852 |     })
      853 |
      854 |     it('maintains responsiveness during complex drag operations', async () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:851:21)

  ● Complex Scenarios › Performance with Complex Scenarios › maintains responsiveness during complex drag operations

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/save sequence/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Full Escalation Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r6g»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r6h»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Gentle Reminder":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Grace Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Professional Follow-up":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Standard Wait":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Firm Notice":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Pre-Legal Wait":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Final Legal Notice":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Legal Escalation":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Full Escalation Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r6g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m...

      869 |
      870 |       // UI should remain responsive
    > 871 |       expect(screen.getByRole('button', { name: /save sequence/i })).toBeInTheDocument()
          |                     ^
      872 |     })
      873 |
      874 |     it('handles rapid sequence modifications efficiently', async () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:871:21)

  ● Complex Scenarios › Error Handling in Complex Scenarios › validates complex sequences before saving

    Found multiple elements with the text: /Email template or custom content is required/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<li[39m
      [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-circle-alert h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12"[39m
          [33my1[39m=[32m"8"[39m
          [33my2[39m=[32m"12"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12.01"[39m
          [33my1[39m=[32m"16"[39m
          [33my2[39m=[32m"16"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mStep 1: Email template or custom content is required[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<li[39m
      [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-circle-alert h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12"[39m
          [33my1[39m=[32m"8"[39m
          [33my2[39m=[32m"12"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12.01"[39m
          [33my1[39m=[32m"16"[39m
          [33my2[39m=[32m"16"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mStep 3: Email template or custom content is required[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<li[39m
      [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-circle-alert h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12"[39m
          [33my1[39m=[32m"8"[39m
          [33my2[39m=[32m"12"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12.01"[39m
          [33my1[39m=[32m"16"[39m
          [33my2[39m=[32m"16"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mStep 5: Email template or custom content is required[0m
    [36m</li>[39m

    Ignored nodes: comments, script, style
    [36m<li[39m
      [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-circle-alert h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12"[39m
          [33my1[39m=[32m"8"[39m
          [33my2[39m=[32m"12"[39m
        [36m/>[39m
        [36m<line[39m
          [33mx1[39m=[32m"12"[39m
          [33mx2[39m=[32m"12.01"[39m
          [33my1[39m=[32m"16"[39m
          [33my2[39m=[32m"16"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mStep 7: Email template or custom content is required[0m
    [36m</li>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Full Escalation Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r80»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mProfessional Standard[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m...

      939 |       await user.click(saveButton)
      940 |
    > 941 |       await waitFor(() => {
          |                    ^
      942 |         expect(screen.getByText('Validation Errors')).toBeInTheDocument()
      943 |         expect(screen.getByText(/Email template or custom content is required/)).toBeInTheDocument()
      944 |       })

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at Object.<anonymous> (src/components/follow-ups/__tests__/complex-scenarios.test.tsx:941:20)

FAIL tests/integration/uae-compliance-validation.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/route.ts:21:20)
      at Object.<anonymous> (tests/integration/uae-compliance-validation.test.ts:18:16)

FAIL src/__tests__/components/dashboard-comprehensive.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      62 | }
      63 |
    > 64 | // UAE business email generator
         |                ^
      65 | export const generateBusinessEmail = (companyName?: string): string => {
      66 |   const domain = companyName 
      67 |     ? `${companyName.toLowerCase().replace(/\s+/g, '')}.ae`

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (src/__tests__/utils/uae-test-data.ts:64:16)
      at Object.<anonymous> (src/__tests__/components/dashboard-comprehensive.test.tsx:19:22)

FAIL tests/integration/performance-validation.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation, specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /Users/ibbs/Development/reminder-mvp/node_modules/@faker-js/faker/dist/index.js:1
    import{a as he,b as Ge}from"./chunk-EX7KKKVL.js";import{a as Ee,b as Ae}from"./chunk-GLSQM7BA.js";import{a as ye,b as ce}from"./chunk-J2RPPXOW.js";import{a as De,b as Ce}from"./chunk-5QATRU3X.js";import{a as Me,b as Re}from"./chunk-WPKX44R7.js";import{a as Se,b as Be}from"./chunk-C3XWLMRZ.js";import{a as He,b as Ue}from"./chunk-T5AE4D37.js";import{a as Fe,b as Te}from"./chunk-JYQBVMKC.js";import{a as Ze,b as Ie}from"./chunk-MXEBYDF4.js";import{a as fe}from"./chunk-L6ZADBO7.js";import{a as ae,b as te}from"./chunk-LPSJBLNR.js";import{a as oe}from"./chunk-WFBH3POG.js";import{a as me,b as pe}from"./chunk-BIVSWDLN.js";import{a as ke,b as ie}from"./chunk-PDBS7Y2Q.js";import{a as se,b as _e}from"./chunk-WARIN3NB.js";import{a as ne,b as le}from"./chunk-E2UJNAEO.js";import{a as xe,b as de}from"./chunk-MTGFJMAI.js";import{a as ue,b as Ne}from"./chunk-JORKQWOG.js";import{a as Pr,b as br}from"./chunk-IPQMUZOW.js";import{a as vr,b as gr}from"./chunk-ZYEKVNBA.js";import{a as Vr,b as Wr}from"./chunk-QNO6ASHF.js";import{a as wr}from"./chunk-DEA2TBOY.js";import{a as Xr,b as jr}from"./chunk-HCGAOEEU.js";import{a as Yr}from"./chunk-BVTGCSSB.js";import{a as Jr,b as qr}from"./chunk-6ZMOYQUT.js";import{a as Qr,b as $r}from"./chunk-2ECI2B3U.js";import{a as re,b as ee}from"./chunk-4QJFSH6N.js";import{a as Mr,b as Rr}from"./chunk-4PRIFTAA.js";import{a as Sr,b as Br}from"./chunk-IOOTFDS6.js";import{a as Hr,b as Ur}from"./chunk-ST7ILI7W.js";import{a as Fr,b as Tr}from"./chunk-6IEGC3NL.js";import{a as Zr,b as Ir}from"./chunk-3COS7QD5.js";import{a as hr,b as Gr}from"./chunk-2EL733NW.js";import{a as Lr,b as Or}from"./chunk-A3JATQSO.js";import{a as Kr,b as zr}from"./chunk-Q6S2ZWNV.js";import{a as ir}from"./chunk-EYKDQYAH.js";import{a as sr,b as _r}from"./chunk-NF3TUA5I.js";import{a as nr,b as lr}from"./chunk-Y3IJGE4R.js";import{a as xr,b as dr}from"./chunk-W3W2D2NH.js";import{a as ur,b as Nr}from"./chunk-FSTVVTY3.js";import{a as Er,b as Ar}from"./chunk-IPFBKKCS.js";import{a as kr}from"./chunk-BKUYYLI4.js";import{a as yr,b as cr}from"./chunk-OKT4S3KH.js";import{a as Dr,b as Cr}from"./chunk-ICA3K4KO.js";import{a as Y,b as w}from"./chunk-ZRHYSKS4.js";import{a as X,b as j}from"./chunk-EJROM23G.js";import{a as J,b as q}from"./chunk-PTUKSM4R.js";import{a as Q,b as $}from"./chunk-OFZOY253.js";import{a as er}from"./chunk-V63ZNJJC.js";import{a as or,b as fr}from"./chunk-UUKUK2K5.js";import{a as rr}from"./chunk-7TT5MNTH.js";import{a as ar,b as tr}from"./chunk-3CNJTEWY.js";import{a as mr,b as pr}from"./chunk-C5XELZY4.js";import{a as F,b as T}from"./chunk-A7OWPVCS.js";import{a as Z,b as I}from"./chunk-HOGCZYQT.js";import{a as h,b as G}from"./chunk-DKZKWYIH.js";import{a as L,b as O}from"./chunk-USO3RQJG.js";import{a as K,b as z}from"./chunk-2QOESBNW.js";import{a as P,b}from"./chunk-IJLC2WSS.js";import{a as v,b as g}from"./chunk-D4U2SLSM.js";import{a as V,b as W}from"./chunk-VBAAP66R.js";import{a as u,b as N}from"./chunk-D3ZI6UDW.js";import{a as A}from"./chunk-MOAH2R73.js";import{a as y,b as c}from"./chunk-2I2EKFA6.js";import{a as D,b as C}from"./chunk-U22RNJ2B.js";import{a as E}from"./chunk-RCCYSHWF.js";import{a as M,b as R}from"./chunk-K5NNETXE.js";import{a as S,b as B}from"./chunk-XZY5TJQL.js";import{a as r}from"./chunk-4X5ZEQ5K.js";import{a as U}from"./chunk-QN2CV5WC.js";import{a as H}from"./chunk-QA3QK7DB.js";import{a as e,b as a}from"./chunk-P6LKJ3SA.js";import{a as t,b as m}from"./chunk-N5MEQFNW.js";import{a as p,b as k}from"./chunk-FYHIOWK6.js";import{a as i}from"./chunk-LMPJOTSL.js";import{a as s,b as _}from"./chunk-DBJFQXTK.js";import{a as n,b as l}from"./chunk-BHHONLW7.js";import{a as x,b as d}from"./chunk-33DZQNTB.js";import{a as f}from"./chunk-KKGCPNDS.js";import{a as Le,b as Oe,c as Ke,d as ze,e as Pe,f as be,g as ve,h as ge,i as Ve,j as We,k as Ye,l as we,m as Xe,n as je,o}from"./chunk-LTLDPYW5.js";var uf={af_ZA:a,ar:m,az:k,base:i,bn_BD:_,cs_CZ:l,cy:d,da:N,de:A,de_AT:c,de_CH:C,dv:R,el:B,en:r,en_AU:U,en_AU_ocker:T,en_BORK:I,en_CA:G,en_GB:O,en_GH:z,en_HK:b,en_IE:g,en_IN:W,en_NG:w,en_US:j,en_ZA:q,eo:$,es:er,es_MX:fr,fa:tr,fi:pr,fr:ir,fr_BE:_r,fr_CA:lr,fr_CH:dr,fr_LU:Nr,fr_SN:Ar,he:cr,hr:Cr,hu:Rr,hy:Br,id_ID:Ur,it:Tr,ja:Ir,ka_GE:Gr,ko:Or,lv:zr,mk:br,nb_NO:gr,ne:Wr,nl:wr,nl_BE:jr,pl:qr,pt_BR:$r,pt_PT:ee,ro:fe,ro_MD:te,ru:pe,sk:ie,sr_RS_latin:_e,sv:le,ta_IN:de,th:Ne,tr:Ae,uk:ce,ur:Ce,uz_UZ_latin:Re,vi:Be,yo_NG:Ue,zh_CN:Te,zh_TW:Ie,zu_ZA:Ge};var rm={af_ZA:e,ar:t,az:p,base:o,bn_BD:s,cs_CZ:n,cy:x,da:u,de:E,de_AT:y,de_CH:D,dv:M,el:S,en:f,en_AU:H,en_AU_ocker:F,en_BORK:Z,en_CA:h,en_GB:L,en_GH:K,en_HK:P,en_IE:v,en_IN:V,en_NG:Y,en_US:X,en_ZA:J,eo:Q,es:rr,es_MX:or,fa:ar,fi:mr,fr:kr,fr_BE:sr,fr_CA:nr,fr_CH:xr,fr_LU:ur,fr_SN:Er,he:yr,hr:Dr,hu:Mr,hy:Sr,id_ID:Hr,it:Fr,ja:Zr,ka_GE:hr,ko:Lr,lv:Kr,mk:Pr,nb_NO:vr,ne:Vr,nl:Yr,nl_BE:Xr,pl:Jr,pt_BR:Qr,pt_PT:re,ro:oe,ro_MD:ae,ru:me,sk:ke,sr_RS_latin:se,sv:ne,ta_IN:xe,th:ue,tr:Ee,uk:ye,ur:De,uz_UZ_latin:Me,vi:Se,yo_NG:He,zh_CN:Fe,zh_TW:Ze,zu_ZA:he};export{Oe as Aircraft,Pe as BitcoinAddressFamily,be as BitcoinNetwork,ze as CssFunction,Ke as CssSpace,je as Faker,Le as FakerError,ve as IPv4Network,ge as Sex,Ye as SimpleFaker,e as af_ZA,uf as allFakers,rm as allLocales,t as ar,p as az,o as base,s as bn_BD,n as cs_CZ,x as cy,u as da,E as de,y as de_AT,D as de_CH,M as dv,S as el,f as en,H as en_AU,F as en_AU_ocker,Z as en_BORK,h as en_CA,L as en_GB,K as en_GH,P as en_HK,v as en_IE,V as en_IN,Y as en_NG,X as en_US,J as en_ZA,Q as eo,rr as es,or as es_MX,ar as fa,r as faker,a as fakerAF_ZA,m as fakerAR,k as fakerAZ,i as fakerBASE,_ as fakerBN_BD,l as fakerCS_CZ,d as fakerCY,N as fakerDA,A as fakerDE,c as fakerDE_AT,C as fakerDE_CH,R as fakerDV,B as fakerEL,r as fakerEN,U as fakerEN_AU,T as fakerEN_AU_ocker,I as fakerEN_BORK,G as fakerEN_CA,O as fakerEN_GB,z as fakerEN_GH,b as fakerEN_HK,g as fakerEN_IE,W as fakerEN_IN,w as fakerEN_NG,j as fakerEN_US,q as fakerEN_ZA,$ as fakerEO,er as fakerES,fr as fakerES_MX,tr as fakerFA,pr as fakerFI,ir as fakerFR,_r as fakerFR_BE,lr as fakerFR_CA,dr as fakerFR_CH,Nr as fakerFR_LU,Ar as fakerFR_SN,cr as fakerHE,Cr as fakerHR,Rr as fakerHU,Br as fakerHY,Ur as fakerID_ID,Tr as fakerIT,Ir as fakerJA,Gr as fakerKA_GE,Or as fakerKO,zr as fakerLV,br as fakerMK,gr as fakerNB_NO,Wr as fakerNE,wr as fakerNL,jr as fakerNL_BE,qr as fakerPL,$r as fakerPT_BR,ee as fakerPT_PT,fe as fakerRO,te as fakerRO_MD,pe as fakerRU,ie as fakerSK,_e as fakerSR_RS_latin,le as fakerSV,de as fakerTA_IN,Ne as fakerTH,Ae as fakerTR,ce as fakerUK,Ce as fakerUR,Re as fakerUZ_UZ_latin,Be as fakerVI,Ue as fakerYO_NG,Te as fakerZH_CN,Ie as fakerZH_TW,Ge as fakerZU_ZA,mr as fi,kr as fr,sr as fr_BE,nr as fr_CA,xr as fr_CH,ur as fr_LU,Er as fr_SN,Ve as generateMersenne32Randomizer,We as generateMersenne53Randomizer,yr as he,Dr as hr,Mr as hu,Sr as hy,Hr as id_ID,Fr as it,Zr as ja,hr as ka_GE,Lr as ko,Kr as lv,Xe as mergeLocales,Pr as mk,vr as nb_NO,Vr as ne,Yr as nl,Xr as nl_BE,Jr as pl,Qr as pt_BR,re as pt_PT,oe as ro,ae as ro_MD,me as ru,we as simpleFaker,ke as sk,se as sr_RS_latin,ne as sv,xe as ta_IN,ue as th,Ee as tr,ye as uk,De as ur,Me as uz_UZ_latin,Se as vi,He as yo_NG,Fe as zh_CN,Ze as zh_TW,he as zu_ZA};
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      16 | import { faker } from '@faker-js/faker'
      17 |
    > 18 | // Import API handlers
         |                ^
      19 | import { GET as InvoicesGet, POST as InvoicesPost } from '../../src/app/api/invoices/route'
      20 | import { POST as PaymentsPost } from '../../src/app/api/payments/route'
      21 | import { POST as BulkPost } from '../../src/app/api/invoices/bulk/route'

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)
      at Object.<anonymous> (tests/integration/performance-validation.test.ts:18:16)

FAIL src/components/invoices/__tests__/email-campaign-modal.test.tsx (6.957 s)
  ● EmailCampaignModal › should select email templates

    expect(received).toBeChecked()

    received value must be an HTMLElement or an SVGElement.
    Received has value: null

      164 |     // Template should be selected (checkbox checked)
      165 |     const checkbox = gentleReminderTemplate.closest('div')?.querySelector('input[type="checkbox"]')
    > 166 |     expect(checkbox).toBeChecked()
          |                      ^
      167 |   })
      168 |
      169 |   it('should insert merge tags', async () => {

      at __EXTERNAL_MATCHER_TRAP__ (node_modules/expect/build/index.js:2240:22)
      at Object.throwingMatcher [as toBeChecked] (node_modules/expect/build/index.js:2241:6)
      at Object.toBeChecked (src/components/invoices/__tests__/email-campaign-modal.test.tsx:166:22)

  ● EmailCampaignModal › should handle language selection

    TestingLibraryElementError: Found a label with the text of: Language, however no form control was found associated to that label. Make sure you're using the "for" attribute or "aria-labelledby" attribute correctly.

    Ignored nodes: comments, script, style
    [36m<body[39m
      [33mdata-scroll-locked[39m=[32m"1"[39m
      [33mstyle[39m=[32m"pointer-events: none;"[39m
    [36m>[39m
      [36m<span[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-radix-focus-guard[39m=[32m""[39m
        [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
        [33mtabindex[39m=[32m"0"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-slot[39m=[32m"dialog-overlay"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-describedby[39m=[32m"radix-«r2j»"[39m
        [33maria-labelledby[39m=[32m"radix-«r2i»"[39m
        [33mclass[39m=[32m"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg max-w-4xl max-h-[90vh] overflow-y-auto"[39m
        [33mdata-slot[39m=[32m"dialog-content"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mid[39m=[32m"radix-«r2h»"[39m
        [33mrole[39m=[32m"dialog"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
        [33mtabindex[39m=[32m"-1"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-2 text-center sm:text-left"[39m
          [33mdata-slot[39m=[32m"dialog-header"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg leading-none font-semibold flex items-center gap-2"[39m
            [33mdata-slot[39m=[32m"dialog-title"[39m
            [33mid[39m=[32m"radix-«r2i»"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-mail h-5 w-5"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
              [36m/>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"16"[39m
                [33mrx[39m=[32m"2"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mCreate Email Campaign[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
            [33mdata-slot[39m=[32m"dialog-description"[39m
            [33mid[39m=[32m"radix-«r2j»"[39m
          [36m>[39m
            [0mSend payment reminders to [0m
            [0m2[0m
            [0m customers for outstanding invoices[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600"[39m
            [36m>[39m
              [0m2[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mInvoices[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-green-600"[39m
            [36m>[39m
              [0mAED 15,000.00[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mTotal Amount[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-orange-600"[39m
            [36m>[39m
              [0m4[0m
              [0md[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mAvg Days Overdue[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mdata-orientation[39m=[32m"horizontal"[39m
          [33mdir[39m=[32m"ltr"[39m
        [36m>[39m
          [36m<div[39m
            [33maria-orientation[39m=[32m"horizontal"[39m
            [33mclass[39m=[32m"h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground grid w-full grid-cols-4"[39m
            [33mdata-orientation[39m=[32m"horizontal"[39m
            [33mrole[39m=[32m"tablist"[39m
            [33mstyle[39m=[32m"outline: none;"[39m
            [33mtabindex[39m=[32m"0"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-controls[39m=[32m"radix-«r2k»-content-1"[39m
              [33maria-selected[39m=[32m"true"[39m
              [33mclass[39m=[32m"justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2"[39m
              [33mdata-orientation[39m=[32m"horizontal"[39m
              [33mdata-radix-collection-item[39m=[32m""[39m
              [33mdata-state[39m=[32m"active"[39m
              [33mid[39m=[32m"radix-«r2k»-trigger-1"[39m
              [33mrole[39m=[32m"tab"[39m
              [33mtabindex[39m=[32m"0"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-file-text h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linejoin...

      204 |
      205 |     // Open language select
    > 206 |     const languageSelect = screen.getByLabelText('Language')
          |                                   ^
      207 |     await user.click(languageSelect)
      208 |
      209 |     // Select Arabic

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:108:40)
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByLabelText (src/components/invoices/__tests__/email-campaign-modal.test.tsx:206:35)

  ● EmailCampaignModal › should configure sending settings

    TestingLibraryElementError: Found a label with the text of: Batch Size, however no form control was found associated to that label. Make sure you're using the "for" attribute or "aria-labelledby" attribute correctly.

    Ignored nodes: comments, script, style
    [36m<body[39m
      [33mdata-scroll-locked[39m=[32m"1"[39m
      [33mstyle[39m=[32m"pointer-events: none;"[39m
    [36m>[39m
      [36m<span[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-radix-focus-guard[39m=[32m""[39m
        [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
        [33mtabindex[39m=[32m"0"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-slot[39m=[32m"dialog-overlay"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-describedby[39m=[32m"radix-«r2u»"[39m
        [33maria-labelledby[39m=[32m"radix-«r2t»"[39m
        [33mclass[39m=[32m"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg max-w-4xl max-h-[90vh] overflow-y-auto"[39m
        [33mdata-slot[39m=[32m"dialog-content"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mid[39m=[32m"radix-«r2s»"[39m
        [33mrole[39m=[32m"dialog"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
        [33mtabindex[39m=[32m"-1"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-2 text-center sm:text-left"[39m
          [33mdata-slot[39m=[32m"dialog-header"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg leading-none font-semibold flex items-center gap-2"[39m
            [33mdata-slot[39m=[32m"dialog-title"[39m
            [33mid[39m=[32m"radix-«r2t»"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-mail h-5 w-5"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
              [36m/>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"16"[39m
                [33mrx[39m=[32m"2"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mCreate Email Campaign[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
            [33mdata-slot[39m=[32m"dialog-description"[39m
            [33mid[39m=[32m"radix-«r2u»"[39m
          [36m>[39m
            [0mSend payment reminders to [0m
            [0m2[0m
            [0m customers for outstanding invoices[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600"[39m
            [36m>[39m
              [0m2[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mInvoices[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-green-600"[39m
            [36m>[39m
              [0mAED 15,000.00[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mTotal Amount[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-orange-600"[39m
            [36m>[39m
              [0m4[0m
              [0md[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mAvg Days Overdue[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mdata-orientation[39m=[32m"horizontal"[39m
          [33mdir[39m=[32m"ltr"[39m
        [36m>[39m
          [36m<div[39m
            [33maria-orientation[39m=[32m"horizontal"[39m
            [33mclass[39m=[32m"h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground grid w-full grid-cols-4"[39m
            [33mdata-orientation[39m=[32m"horizontal"[39m
            [33mrole[39m=[32m"tablist"[39m
            [33mstyle[39m=[32m"outline: none;"[39m
            [33mtabindex[39m=[32m"0"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-controls[39m=[32m"radix-«r2v»-content-1"[39m
              [33maria-selected[39m=[32m"false"[39m
              [33mclass[39m=[32m"justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2"[39m
              [33mdata-orientation[39m=[32m"horizontal"[39m
              [33mdata-radix-collection-item[39m=[32m""[39m
              [33mdata-state[39m=[32m"inactive"[39m
              [33mid[39m=[32m"radix-«r2v»-trigger-1"[39m
              [33mrole[39m=[32m"tab"[39m
              [33mtabindex[39m=[32m"-1"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-file-text h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linej...

      236 |
      237 |     // Change batch size
    > 238 |     const batchSizeSelect = screen.getByLabelText('Batch Size')
          |                                    ^
      239 |     await user.click(batchSizeSelect)
      240 |     const batchOption = screen.getByText('10 emails per batch')
      241 |     await user.click(batchOption)

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:108:40)
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByLabelText (src/components/invoices/__tests__/email-campaign-modal.test.tsx:238:36)

  ● EmailCampaignModal › should show email preview with real data

    TestingLibraryElementError: Unable to find an element with the text: ABC Trading LLC. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body[39m
      [33mdata-scroll-locked[39m=[32m"1"[39m
      [33mstyle[39m=[32m"pointer-events: none;"[39m
    [36m>[39m
      [36m<span[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-radix-focus-guard[39m=[32m""[39m
        [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
        [33mtabindex[39m=[32m"0"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-slot[39m=[32m"dialog-overlay"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-describedby[39m=[32m"radix-«r3l»"[39m
        [33maria-labelledby[39m=[32m"radix-«r3k»"[39m
        [33mclass[39m=[32m"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg max-w-4xl max-h-[90vh] overflow-y-auto"[39m
        [33mdata-slot[39m=[32m"dialog-content"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mid[39m=[32m"radix-«r3j»"[39m
        [33mrole[39m=[32m"dialog"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
        [33mtabindex[39m=[32m"-1"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-2 text-center sm:text-left"[39m
          [33mdata-slot[39m=[32m"dialog-header"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg leading-none font-semibold flex items-center gap-2"[39m
            [33mdata-slot[39m=[32m"dialog-title"[39m
            [33mid[39m=[32m"radix-«r3k»"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-mail h-5 w-5"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
              [36m/>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"16"[39m
                [33mrx[39m=[32m"2"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mCreate Email Campaign[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
            [33mdata-slot[39m=[32m"dialog-description"[39m
            [33mid[39m=[32m"radix-«r3l»"[39m
          [36m>[39m
            [0mSend payment reminders to [0m
            [0m2[0m
            [0m customers for outstanding invoices[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600"[39m
            [36m>[39m
              [0m2[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mInvoices[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-green-600"[39m
            [36m>[39m
              [0mAED 15,000.00[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mTotal Amount[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-orange-600"[39m
            [36m>[39m
              [0m4[0m
              [0md[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mAvg Days Overdue[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mdata-orientation[39m=[32m"horizontal"[39m
          [33mdir[39m=[32m"ltr"[39m
        [36m>[39m
          [36m<div[39m
            [33maria-orientation[39m=[32m"horizontal"[39m
            [33mclass[39m=[32m"h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground grid w-full grid-cols-4"[39m
            [33mdata-orientation[39m=[32m"horizontal"[39m
            [33mrole[39m=[32m"tablist"[39m
            [33mstyle[39m=[32m"outline: none;"[39m
            [33mtabindex[39m=[32m"0"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-controls[39m=[32m"radix-«r3m»-content-1"[39m
              [33maria-selected[39m=[32m"false"[39m
              [33mclass[39m=[32m"justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2"[39m
              [33mdata-orientation[39m=[32m"horizontal"[39m
              [33mdata-radix-collection-item[39m=[32m""[39m
              [33mdata-state[39m=[32m"inactive"[39m
              [33mid[39m=[32m"radix-«r3m»-trigger-1"[39m
              [33mrole[39m=[32m"tab"[39m
              [33mtabindex[39m=[32m"-1"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-file-text h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linej...

      265 |     expect(screen.getByText('Email Preview')).toBeInTheDocument()
      266 |     expect(screen.getByText('Sample Personalized Email')).toBeInTheDocument()
    > 267 |     expect(screen.getByText('ABC Trading LLC')).toBeInTheDocument() // Customer name
          |                   ^
      268 |     expect(screen.getByText('accounts@abctrading.ae')).toBeInTheDocument() // Customer email
      269 |   })
      270 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/email-campaign-modal.test.tsx:267:19)

  ● EmailCampaignModal › should submit campaign successfully

    expect(element).toHaveTextContent()

    Expected element to have text content:
      Creating Campaign...
    Received:
      Send Campaign

      293 |     await user.click(sendButton)
      294 |
    > 295 |     expect(sendButton).toHaveTextContent('Creating Campaign...')
          |                        ^
      296 |
      297 |     await waitFor(() => {
      298 |       expect(mockFetch).toHaveBeenCalledWith('/api/campaigns/from-invoices', {

      at Object.toHaveTextContent (src/components/invoices/__tests__/email-campaign-modal.test.tsx:295:24)

  ● EmailCampaignModal › should show personalization preview correctly

    TestingLibraryElementError: Found multiple elements with the text: /ABC Trading LLC/i

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mExample with real data from [0m
      [0mABC Trading LLC[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"whitespace-pre-wrap text-sm"[39m
    [36m>[39m
      [0mDear ABC Trading LLC,

    We hope this message finds you well. This is a friendly reminder regarding the following outstanding invoice:

    Invoice Number: INV-001
    Amount: AED 5,000.00
    Due Date: {due_date}
    Days Overdue: 5

    We kindly request that you arrange payment at your earliest convenience. If you have any questions or require assistance, please don't hesitate to contact us.

    Thank you for your business and cooperation.

    Best regards,
    Your Company Team[0m
    [36m</div>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body[39m
      [33mdata-scroll-locked[39m=[32m"1"[39m
      [33mstyle[39m=[32m"pointer-events: none;"[39m
    [36m>[39m
      [36m<span[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-radix-focus-guard[39m=[32m""[39m
        [33mstyle[39m=[32m"outline: none; opacity: 0; position: fixed; pointer-events: none;"[39m
        [33mtabindex[39m=[32m"0"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50"[39m
        [33mdata-aria-hidden[39m=[32m"true"[39m
        [33mdata-slot[39m=[32m"dialog-overlay"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
      [36m/>[39m
      [36m<div[39m
        [33maria-describedby[39m=[32m"radix-«r7k»"[39m
        [33maria-labelledby[39m=[32m"radix-«r7j»"[39m
        [33mclass[39m=[32m"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg max-w-4xl max-h-[90vh] overflow-y-auto"[39m
        [33mdata-slot[39m=[32m"dialog-content"[39m
        [33mdata-state[39m=[32m"open"[39m
        [33mid[39m=[32m"radix-«r7i»"[39m
        [33mrole[39m=[32m"dialog"[39m
        [33mstyle[39m=[32m"pointer-events: auto;"[39m
        [33mtabindex[39m=[32m"-1"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex flex-col gap-2 text-center sm:text-left"[39m
          [33mdata-slot[39m=[32m"dialog-header"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-lg leading-none font-semibold flex items-center gap-2"[39m
            [33mdata-slot[39m=[32m"dialog-title"[39m
            [33mid[39m=[32m"radix-«r7j»"[39m
          [36m>[39m
            [36m<svg[39m
              [33maria-hidden[39m=[32m"true"[39m
              [33mclass[39m=[32m"lucide lucide-mail h-5 w-5"[39m
              [33mfill[39m=[32m"none"[39m
              [33mheight[39m=[32m"24"[39m
              [33mstroke[39m=[32m"currentColor"[39m
              [33mstroke-linecap[39m=[32m"round"[39m
              [33mstroke-linejoin[39m=[32m"round"[39m
              [33mstroke-width[39m=[32m"2"[39m
              [33mviewBox[39m=[32m"0 0 24 24"[39m
              [33mwidth[39m=[32m"24"[39m
              [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
            [36m>[39m
              [36m<path[39m
                [33md[39m=[32m"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"[39m
              [36m/>[39m
              [36m<rect[39m
                [33mheight[39m=[32m"16"[39m
                [33mrx[39m=[32m"2"[39m
                [33mwidth[39m=[32m"20"[39m
                [33mx[39m=[32m"2"[39m
                [33my[39m=[32m"4"[39m
              [36m/>[39m
            [36m</svg>[39m
            [0mCreate Email Campaign[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
            [33mdata-slot[39m=[32m"dialog-description"[39m
            [33mid[39m=[32m"radix-«r7k»"[39m
          [36m>[39m
            [0mSend payment reminders to [0m
            [0m2[0m
            [0m customers for outstanding invoices[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-blue-600"[39m
            [36m>[39m
              [0m2[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mInvoices[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-green-600"[39m
            [36m>[39m
              [0mAED 15,000.00[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mTotal Amount[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-2xl font-bold text-orange-600"[39m
            [36m>[39m
              [0m4[0m
              [0md[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm text-gray-600"[39m
            [36m>[39m
              [0mAvg Days Overdue[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mdata-orientation[39m=[32m"horizontal"[39m
          [33mdir[39m=[32m"ltr"[39m
        [36m>[39m
          [36m<div[39m
            [33maria-orientation[39m=[32m"horizontal"[39m
            [33mclass[39m=[32m"h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground grid w-full grid-cols-4"[39m
            [33mdata-orientation[39m=[32m"horizontal"[39m
            [33mrole[39m=[32m"tablist"[39m
            [33mstyle[39m=[32m"outline: none;"[39m
            [33mtabindex[39m=[32m"0"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-controls[39m=[32m"radix-«r7l»-content-1"[39m
              [33maria-selected[39m=[32m"false"[39m
              [33mclass[39m=[32m"justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex items-center gap-2"[39m
              [33mdata-orientation[39m=[32m"horizontal"[39m
              [33mdata-radix-collection-item[39m=[32m""[39m
              [33mdata-state[39m=[32m"inactive"[39m
              [33mid[39m=[32m"radix-«r7l»-trigger-1"[39m
              [33mrole[39m=[32m"tab"[39m
              [33mtabindex[39m=[32m"-1"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [36m<svg[39m
                [33maria-hidden[39m=[32m"true"[39m
                [33mclass[39m=[32m"lucide lucide-file-text h-4 w-4"[39m
                [33mfill[39m=[32m"none"[39m
                [33mheight[39m=[32m"24"[39m
                [33mstroke[39m=[32m"currentColor"[39m
                [33mstroke-linecap[39m=[32m"round"[39m
                [33mstroke-linej...

      474 |
      475 |     // Check that merge tags are replaced with actual data
    > 476 |     const emailPreview = screen.getByText(/ABC Trading LLC/i)
          |                                 ^
      477 |     expect(emailPreview).toBeInTheDocument()
      478 |
      479 |     // Check currency formatting

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/invoices/__tests__/email-campaign-modal.test.tsx:476:33)

FAIL tests/integration/error-handling-edge-cases.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/route.ts:21:20)
      at Object.<anonymous> (tests/integration/error-handling-edge-cases.test.ts:20:16)

FAIL tests/integration/invoice-workflow-integration.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/invoices/route.ts:21:20)
      at Object.<anonymous> (tests/integration/invoice-workflow-integration.test.ts:19:16)

FAIL tests/e2e/follow-up-automation-e2e.test.ts
  ● Test suite failed to run

      [31mx[0m Expected unicode escape
       ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/tests/e2e/follow-up-automation-e2e.test.ts[0m:1:1]
     [2m1[0m | /**\n * End-to-End Follow-up Automation User Journey Tests\n * Complete user workflows for UAE business automation\n */\n\nimport { test, expect, Page, BrowserContext } from '@playwright/test'\nimport { faker } from '@faker-js/faker'\n\n// Test data interfaces\ninterface TestCompany {\n  name: string\n  email: string\n  trn: string\n  address: string\n  phone: string\n}\n\ninterface TestCustomer {\n  name: string\n  email: string\n  phone: string\n  address: string\n  trn?: string\n}\n\ninterface TestInvoice {\n  number: string\n  amount: string\n  currency: string\n  dueDate: string\n  description: string\n}\n\n// UAE-specific test data generators\nclass UAETestDataGenerator {\n  static generateCompany(): TestCompany {\n    return {\n      name: `${faker.company.name()} LLC`,\n      email: faker.internet.email(),\n      trn: `100${faker.string.numeric(9)}001`,\n      address: `${faker.location.streetAddress()}, Dubai, UAE`,\n      phone: '+971-4-' + faker.string.numeric(7)\n    }\n  }\n\n  static generateCustomer(): TestCustomer {\n    return {\n      name: faker.person.fullName(),\n      email: faker.internet.email(),\n      phone: '+971-50-' + faker.string.numeric(7),\n      address: `${faker.location.streetAddress()}, Abu Dhabi, UAE`,\n      trn: `100${faker.string.numeric(9)}001`\n    }\n  }\n\n  static generateInvoice(): TestInvoice {\n    const amount = faker.number.int({ min: 1000, max: 50000 })\n    return {\n      number: `INV-${faker.string.numeric(4)}-${faker.string.numeric(3)}`,\n      amount: amount.toString(),\n      currency: 'AED',\n      dueDate: faker.date.future().toISOString().split('T')[0],\n      description: `${faker.commerce.productName()} - Professional Services`\n    }\n  }\n}\n\n// Page Object Model for Follow-up Automation\nclass FollowUpAutomationPage {\n  constructor(private page: Page) {}\n\n  // Navigation\n  async navigateToFollowUps() {\n    await this.page.goto('/dashboard/follow-ups')\n    await this.page.waitForSelector('[data-testid=\"follow-ups-dashboard\"]', { timeout: 10000 })\n  }\n\n  async navigateToSequenceBuilder() {\n    await this.page.click('[data-testid=\"create-sequence-btn\"]')\n    await this.page.waitForSelector('[data-testid=\"sequence-builder\"]', { timeout: 5000 })\n  }\n\n  // Sequence Creation\n  async createSequence(name: string, description: string) {\n    await this.page.fill('[data-testid=\"sequence-name\"]', name)\n    await this.page.fill('[data-testid=\"sequence-description\"]', description)\n  }\n\n  async addSequenceStep(stepData: {\n    delay: string\n    subject: string\n    content: string\n    tone: string\n    language: string\n  }) {\n    await this.page.click('[data-testid=\"add-step-btn\"]')\n    \n    const stepIndex = await this.page.locator('[data-testid^=\"step-\"]').count() - 1\n    const stepSelector = `[data-testid=\"step-${stepIndex}\"]`\n    \n    await this.page.fill(`${stepSelector} [data-testid=\"step-delay\"]`, stepData.delay)\n    await this.page.fill(`${stepSelector} [data-testid=\"step-subject\"]`, stepData.subject)\n    await this.page.fill(`${stepSelector} [data-testid=\"step-content\"]`, stepData.content)\n    await this.page.selectOption(`${stepSelector} [data-testid=\"step-tone\"]`, stepData.tone)\n    await this.page.selectOption(`${stepSelector} [data-testid=\"step-language\"]`, stepData.language)\n  }\n\n  async saveSequence() {\n    await this.page.click('[data-testid=\"save-sequence-btn\"]')\n    await this.page.waitForSelector('[data-testid=\"sequence-saved-success\"]', { timeout: 5000 })\n  }\n\n  // Invoice Management\n  async navigateToInvoices() {\n    await this.page.goto('/dashboard/invoices')\n    await this.page.waitForSelector('[data-testid=\"invoices-list\"]', { timeout: 10000 })\n  }\n\n  async createInvoice(customer: TestCustomer, invoice: TestInvoice) {\n    await this.page.click('[data-testid=\"create-invoice-btn\"]')\n    await this.page.waitForSelector('[data-testid=\"invoice-form\"]')\n\n    // Fill customer information\n    await this.page.fill('[data-testid=\"customer-name\"]', customer.name)\n    await this.page.fill('[data-testid=\"customer-email\"]', customer.email)\n    await this.page.fill('[data-testid=\"customer-phone\"]', customer.phone)\n    await this.page.fill('[data-testid=\"customer-address\"]', customer.address)\n\n    // Fill invoice details\n    await this.page.fill('[data-testid=\"invoice-number\"]', invoice.number)\n    await this.page.fill('[data-testid=\"invoice-amount\"]', invoice.amount)\n    await this.page.selectOption('[data-testid=\"invoice-currency\"]', invoice.currency)\n    await this.page.fill('[data-testid=\"invoice-due-date\"]', invoice.dueDate)\n    await this.page.fill('[data-testid=\"invoice-description\"]', invoice.description)\n\n    await this.page.click('[data-testid=\"save-invoice-btn\"]')\n    await this.page.waitForSelector('[data-testid=\"invoice-created-success\"]', { timeout: 5000 })\n  }\n\n  async assignSequenceToInvoice(invoiceNumber: string, sequenceName: string) {\n    // Find invoice in list\n    await this.page.click(`[data-testid=\"invoice-${invoiceNumber}\"] [data-testid=\"assign-sequence-btn\"]`)\n    await this.page.waitForSelector('[data-testid=\"sequence-assignment-dialog\"]')\n    \n    // Select sequence\n    await this.page.selectOption('[data-testid=\"sequence-select\"]', sequenceName)\n    await this.page.click('[data-testid=\"assign-sequence-confirm\"]')\n    await this.page.waitForSelector('[data-testid=\"sequence-assigned-success\"]', { timeout: 5000 })\n  }\n\n  // Monitoring and Analytics\n  async viewSequenceAnalytics(sequenceName: string) {\n    await this.navigateToFollowUps()\n    await this.page.click(`[data-testid=\"sequence-${sequenceName}\"] [data-testid=\"view-analytics-btn\"]`)\n    await this.page.waitForSelector('[data-testid=\"sequence-analytics\"]', { timeout: 5000 })\n  }\n\n  async getAnalyticsData() {\n    const totalExecutions = await this.page.textContent('[data-testid=\"total-executions\"]')\n    const successRate = await this.page.textContent('[data-testid=\"success-rate\"]')\n    const openRate = await this.page.textContent('[data-testid=\"open-rate\"]')\n    const conversionRate = await this.page.textContent('[data-testid=\"conversion-rate\"]')\n\n    return {\n      totalExecutions: parseInt(totalExecutions || '0'),\n      successRate: parseFloat(successRate || '0'),\n      openRate: parseFloat(openRate || '0'),\n      conversionRate: parseFloat(conversionRate || '0')\n    }\n  }\n\n  // Cultural Compliance Validation\n  async validateCulturalCompliance() {\n    await this.page.click('[data-testid=\"cultural-compliance-check\"]')\n    await this.page.waitForSelector('[data-testid=\"compliance-results\"]', { timeout: 5000 })\n    \n    const complianceScore = await this.page.textContent('[data-testid=\"compliance-score\"]')\n    const issues = await this.page.locator('[data-testid=\"compliance-issues\"] li').allTextContents()\n    const suggestions = await this.page.locator('[data-testid=\"compliance-suggestions\"] li').allTextContents()\n\n    return {\n      score: parseInt(complianceScore || '0'),\n      issues,\n      suggestions\n    }\n  }\n\n  // Business Hours Testing\n  async testBusinessHoursScheduling() {\n    await this.page.click('[data-testid=\"test-scheduling-btn\"]')\n    await this.page.waitForSelector('[data-testid=\"scheduling-test-results\"]', { timeout: 10000 })\n    \n    const scheduledTime = await this.page.textContent('[data-testid=\"scheduled-time\"]')\n    const businessHoursCompliant = await this.page.isVisible('[data-testid=\"business-hours-compliant\"]')\n    const prayerTimeAvoidance = await this.page.isVisible('[data-testid=\"prayer-time-avoided\"]')\n    const holidayRespected = await this.page.isVisible('[data-testid=\"holiday-respected\"]')\n\n    return {\n      scheduledTime,\n      businessHoursCompliant,\n      prayerTimeAvoidance,\n      holidayRespected\n    }\n  }\n}\n\n// Authentication helper\nclass AuthHelper {\n  static async loginAsUAEBusiness(page: Page) {\n    await page.goto('/auth/signin')\n    await page.fill('[data-testid=\"email\"]', 'test@uaebusiness.ae')\n    await page.fill('[data-testid=\"password\"]', 'testpassword123')\n    await page.click('[data-testid=\"signin-btn\"]')\n    await page.waitForSelector('[data-testid=\"dashboard\"]', { timeout: 10000 })\n  }\n\n  static async logout(page: Page) {\n    await page.click('[data-testid=\"user-menu\"]')\n    await page.click('[data-testid=\"logout-btn\"]')\n    await page.waitForSelector('[data-testid=\"signin-form\"]', { timeout: 5000 })\n  }\n}\n\ntest.describe('Follow-up Automation E2E User Journeys', () => {\n  let followUpPage: FollowUpAutomationPage\n  let testCompany: TestCompany\n  let testCustomer: TestCustomer\n  let testInvoice: TestInvoice\n\n  test.beforeEach(async ({ page }) => {\n    followUpPage = new FollowUpAutomationPage(page)\n    testCompany = UAETestDataGenerator.generateCompany()\n    testCustomer = UAETestDataGenerator.generateCustomer()\n    testInvoice = UAETestDataGenerator.generateInvoice()\n\n    // Login as UAE business user\n    await AuthHelper.loginAsUAEBusiness(page)\n  })\n\n  test.afterEach(async ({ page }) => {\n    await AuthHelper.logout(page)\n  })\n\n  test.describe('Complete Automation Setup Journey', () => {\n    test('should create culturally compliant follow-up sequence', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      await followUpPage.navigateToSequenceBuilder()\n\n      // Create UAE-culturally appropriate sequence\n      await followUpPage.createSequence(\n        'UAE Professional Follow-up Sequence',\n        'Culturally sensitive follow-up sequence for UAE business clients'\n      )\n\n      // Step 1: Gentle reminder\n      await followUpPage.addSequenceStep({\n        delay: '7',\n        subject: 'Gentle Reminder: Invoice {{invoiceNumber}} - {{customerName}}',\n        content: 'As-salamu alaykum {{customerName}},\\n\\nWe hope this email finds you in good health. This is a respectful reminder regarding Invoice {{invoiceNumber}} for {{invoiceAmount}} {{currency}}.\\n\\nWe would appreciate your kind attention to this matter at your earliest convenience.\\n\\nBarakallahu feeki for your continued partnership.\\n\\nBest regards,\\n{{companyName}} Team',\n        tone: 'BUSINESS',\n        language: 'ENGLISH'\n      })\n\n      // Step 2: Follow-up notice\n      await followUpPage.addSequenceStep({\n        delay: '7',\n        subject: 'Follow-up: Invoice {{invoiceNumber}} - Your Cooperation Appreciated',\n        content: 'Dear Valued Customer {{customerName}},\\n\\nWe respectfully follow up on our previous communication regarding Invoice {{invoiceNumber}}.\\n\\nWe kindly request your cooperation in settling this matter or discussing any concerns you may have.\\n\\nPlease contact us at your earliest convenience.\\n\\nJazakAllahu khair for your attention.\\n\\nWith sincere regards,\\n{{companyName}} Finance Team',\n        tone: 'FORMAL',\n        language: 'ENGLISH'\n      })\n\n      // Step 3: Final respectful notice\n      await followUpPage.addSequenceStep({\n        delay: '5',\n        subject: 'Important: Invoice {{invoiceNumber}} - Discussion Required',\n        content: 'Dear Esteemed Customer {{customerName}},\\n\\nWe respectfully write regarding Invoice {{invoiceNumber}} which remains outstanding.\\n\\nWe would very much appreciate the opportunity to discuss this matter with you.\\n\\nPlease contact us within the next few business days so we can work together amicably.\\n\\nWe value our business relationship greatly.\\n\\nRespectfully yours,\\n{{companyName}} Management',\n        tone: 'VERY_FORMAL',\n        language: 'ENGLISH'\n      })\n\n      await followUpPage.saveSequence()\n\n      // Validate cultural compliance\n      const compliance = await followUpPage.validateCulturalCompliance()\n      expect(compliance.score).toBeGreaterThan(80) // High cultural compliance\n      expect(compliance.issues.length).toBeLessThan(3) // Minimal issues\n    })\n\n    test('should create and automate invoice with follow-up sequence', async ({ page }) => {\n      // First create the sequence\n      await followUpPage.navigateToFollowUps()\n      await followUpPage.navigateToSequenceBuilder()\n      await followUpPage.createSequence('Test Automation Sequence', 'E2E test sequence')\n      \n      await followUpPage.addSequenceStep({\n        delay: '1', // Short delay for testing\n        subject: 'Test Reminder: {{invoiceNumber}}',\n        content: 'Dear {{customerName}}, test reminder for {{invoiceAmount}} {{currency}}.',\n        tone: 'BUSINESS',\n        language: 'ENGLISH'\n      })\n      \n      await followUpPage.saveSequence()\n\n      // Create invoice\n      await followUpPage.navigateToInvoices()\n      await followUpPage.createInvoice(testCustomer, testInvoice)\n\n      // Assign sequence to invoice\n      await followUpPage.assignSequenceToInvoice(testInvoice.number, 'Test Automation Sequence')\n\n      // Verify assignment\n      const assignmentSuccess = await page.isVisible('[data-testid=\"sequence-assigned-success\"]')\n      expect(assignmentSuccess).toBe(true)\n\n      // Check automation status\n      await page.click(`[data-testid=\"invoice-${testInvoice.number}\"] [data-testid=\"view-automation-status\"]`)\n      await page.waitForSelector('[data-testid=\"automation-status\"]')\n      \n      const automationStatus = await page.textContent('[data-testid=\"automation-status\"]')\n      expect(automationStatus).toContain('ACTIVE')\n    })\n  })\n\n  test.describe('UAE Business Compliance Validation', () => {\n    test('should respect UAE business hours in scheduling', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      \n      // Test business hours compliance\n      const schedulingTest = await followUpPage.testBusinessHoursScheduling()\n      \n      expect(schedulingTest.businessHoursCompliant).toBe(true)\n      expect(schedulingTest.prayerTimeAvoidance).toBe(true)\n      \n      // Verify scheduled time is within UAE business hours (Sunday-Thursday, 8 AM-6 PM)\n      const scheduledDate = new Date(schedulingTest.scheduledTime || '')\n      const dayOfWeek = scheduledDate.getDay()\n      const hour = scheduledDate.getHours()\n      \n      expect([0, 1, 2, 3, 4]).toContain(dayOfWeek) // Sunday-Thursday\n      expect(hour).toBeGreaterThanOrEqual(8)\n      expect(hour).toBeLessThan(18)\n    })\n\n    test('should avoid Islamic holidays and Ramadan periods', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      \n      // Navigate to scheduling settings\n      await page.click('[data-testid=\"scheduling-settings-btn\"]')\n      await page.waitForSelector('[data-testid=\"scheduling-settings\"]')\n      \n      // Enable Islamic calendar compliance\n      await page.check('[data-testid=\"respect-islamic-calendar\"]')\n      await page.check('[data-testid=\"avoid-ramadan-iftar\"]')\n      await page.check('[data-testid=\"respect-islamic-holidays\"]')\n      \n      await page.click('[data-testid=\"save-settings-btn\"]')\n      await page.waitForSelector('[data-testid=\"settings-saved-success\"]')\n      \n      // Test scheduling during Islamic observances\n      const schedulingTest = await followUpPage.testBusinessHoursScheduling()\n      expect(schedulingTest.holidayRespected).toBe(true)\n    })\n\n    test('should validate Arabic RTL template support', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      await followUpPage.navigateToSequenceBuilder()\n      \n      await followUpPage.createSequence('Arabic Bilingual Sequence', 'Supports Arabic RTL')\n      \n      // Add Arabic language step\n      await followUpPage.addSequenceStep({\n        delay: '7',\n        subject: 'تذكير: فاتورة {{invoiceNumber}}',\n        content: 'عزيزي العميل {{customerName}},\\n\\nنتمنى أن تكون بخير. هذا تذكير لطيف بخصوص الفاتورة {{invoiceNumber}}.\\n\\nنقدر تعاونكم في هذا الأمر.\\n\\nمع خالص التقدير',\n        tone: 'BUSINESS',\n        language: 'ARABIC'\n      })\n      \n      await followUpPage.saveSequence()\n      \n      // Verify RTL support\n      const arabicContent = await page.locator('[data-testid=\"step-content\"][dir=\"rtl\"]')\n      expect(await arabicContent.count()).toBeGreaterThan(0)\n      \n      // Validate Arabic text detection\n      const hasArabicText = await page.isVisible('[data-testid=\"arabic-detected\"]')\n      expect(hasArabicText).toBe(true)\n    })\n  })\n\n  test.describe('Monitoring and Analytics Journey', () => {\n    test('should provide comprehensive sequence analytics', async ({ page }) => {\n      // Setup test sequence with some execution data\n      await followUpPage.navigateToFollowUps()\n      \n      // Assume we have some existing sequence data\n      await followUpPage.viewSequenceAnalytics('Test Analytics Sequence')\n      \n      const analytics = await followUpPage.getAnalyticsData()\n      \n      // Verify analytics are displayed\n      expect(analytics.totalExecutions).toBeGreaterThanOrEqual(0)\n      expect(analytics.successRate).toBeGreaterThanOrEqual(0)\n      expect(analytics.successRate).toBeLessThanOrEqual(100)\n      expect(analytics.openRate).toBeGreaterThanOrEqual(0)\n      expect(analytics.openRate).toBeLessThanOrEqual(100)\n      expect(analytics.conversionRate).toBeGreaterThanOrEqual(0)\n      expect(analytics.conversionRate).toBeLessThanOrEqual(100)\n      \n      // Check for detailed step analytics\n      const stepAnalytics = await page.locator('[data-testid=\"step-analytics\"]')\n      expect(await stepAnalytics.count()).toBeGreaterThan(0)\n    })\n\n    test('should show real-time execution monitoring', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      \n      // Navigate to execution monitor\n      await page.click('[data-testid=\"execution-monitor-btn\"]')\n      await page.waitForSelector('[data-testid=\"execution-monitor\"]')\n      \n      // Check for active executions\n      const activeExecutions = await page.locator('[data-testid=\"active-execution\"]')\n      const executionCount = await activeExecutions.count()\n      \n      // Should display execution status\n      if (executionCount > 0) {\n        const firstExecution = activeExecutions.first()\n        const status = await firstExecution.locator('[data-testid=\"execution-status\"]').textContent()\n        expect(['ACTIVE', 'PENDING', 'SCHEDULED', 'PAUSED']).toContain(status)\n        \n        const progress = await firstExecution.locator('[data-testid=\"execution-progress\"]').textContent()\n        expect(progress).toMatch(/\\d+\\/\\d+/) // Format like \"2/3\"\n      }\n    })\n\n    test('should handle sequence pause and resume operations', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      \n      // Find an active sequence\n      const activeSequence = page.locator('[data-testid^=\"sequence-\"][data-status=\"active\"]').first()\n      \n      if (await activeSequence.count() > 0) {\n        // Pause sequence\n        await activeSequence.locator('[data-testid=\"pause-sequence-btn\"]').click()\n        await page.waitForSelector('[data-testid=\"sequence-paused-success\"]')\n        \n        // Verify paused status\n        const pausedStatus = await activeSequence.locator('[data-testid=\"sequence-status\"]').textContent()\n        expect(pausedStatus).toBe('PAUSED')\n        \n        // Resume sequence\n        await activeSequence.locator('[data-testid=\"resume-sequence-btn\"]').click()\n        await page.waitForSelector('[data-testid=\"sequence-resumed-success\"]')\n        \n        // Verify active status\n        const resumedStatus = await activeSequence.locator('[data-testid=\"sequence-status\"]').textContent()\n        expect(resumedStatus).toBe('ACTIVE')\n      }\n    })\n  })\n\n  test.describe('Error Handling and Edge Cases', () => {\n    test('should handle network failures gracefully', async ({ page }) => {\n      // Simulate network failure\n      await page.route('**/api/sequences/**', route => route.abort())\n      \n      await followUpPage.navigateToFollowUps()\n      \n      // Attempt to create sequence\n      await followUpPage.navigateToSequenceBuilder()\n      await followUpPage.createSequence('Network Test Sequence', 'Testing network failure')\n      \n      try {\n        await followUpPage.saveSequence()\n      } catch (error) {\n        // Should show appropriate error message\n        const errorMessage = await page.isVisible('[data-testid=\"network-error-message\"]')\n        expect(errorMessage).toBe(true)\n      }\n      \n      // Restore network\n      await page.unroute('**/api/sequences/**')\n    })\n\n    test('should validate form inputs correctly', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      await followUpPage.navigateToSequenceBuilder()\n      \n      // Try to save without required fields\n      await page.click('[data-testid=\"save-sequence-btn\"]')\n      \n      // Should show validation errors\n      const nameError = await page.isVisible('[data-testid=\"sequence-name-error\"]')\n      const stepsError = await page.isVisible('[data-testid=\"sequence-steps-error\"]')\n      \n      expect(nameError).toBe(true)\n      expect(stepsError).toBe(true)\n      \n      // Should not navigate away\n      const stillOnBuilder = await page.isVisible('[data-testid=\"sequence-builder\"]')\n      expect(stillOnBuilder).toBe(true)\n    })\n\n    test('should handle large sequence configurations', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      await followUpPage.navigateToSequenceBuilder()\n      \n      await followUpPage.createSequence('Large Sequence Test', 'Testing large sequence handling')\n      \n      // Add maximum allowed steps (e.g., 10 steps)\n      for (let i = 1; i <= 10; i++) {\n        await followUpPage.addSequenceStep({\n          delay: '7',\n          subject: `Step ${i}: Invoice {{invoiceNumber}}`,\n          content: `This is step ${i} of our follow-up sequence. Please review your invoice.`,\n          tone: 'BUSINESS',\n          language: 'ENGLISH'\n        })\n      }\n      \n      // Should handle all steps without performance issues\n      const stepCount = await page.locator('[data-testid^=\"step-\"]').count()\n      expect(stepCount).toBe(10)\n      \n      // Should save successfully\n      await followUpPage.saveSequence()\n      const saved = await page.isVisible('[data-testid=\"sequence-saved-success\"]')\n      expect(saved).toBe(true)\n    })\n  })\n\n  test.describe('Mobile Responsiveness', () => {\n    test('should work correctly on mobile devices', async ({ page, isMobile }) => {\n      if (!isMobile) {\n        // Set mobile viewport\n        await page.setViewportSize({ width: 375, height: 667 })\n      }\n      \n      await followUpPage.navigateToFollowUps()\n      \n      // Check mobile navigation\n      const mobileMenu = await page.isVisible('[data-testid=\"mobile-menu-toggle\"]')\n      if (mobileMenu) {\n        await page.click('[data-testid=\"mobile-menu-toggle\"]')\n        await page.waitForSelector('[data-testid=\"mobile-nav-menu\"]')\n      }\n      \n      // Verify key elements are accessible on mobile\n      const sequenceList = await page.isVisible('[data-testid=\"sequences-list\"]')\n      expect(sequenceList).toBe(true)\n      \n      const createButton = await page.isVisible('[data-testid=\"create-sequence-btn\"]')\n      expect(createButton).toBe(true)\n    })\n  })\n\n  test.describe('Accessibility Compliance', () => {\n    test('should meet accessibility standards', async ({ page }) => {\n      await followUpPage.navigateToFollowUps()\n      \n      // Check for proper heading structure\n      const h1Count = await page.locator('h1').count()\n      expect(h1Count).toBe(1) // Should have exactly one H1\n      \n      // Check for alt text on images\n      const images = await page.locator('img').all()\n      for (const img of images) {\n        const alt = await img.getAttribute('alt')\n        expect(alt).toBeTruthy() // All images should have alt text\n      }\n      \n      // Check for proper form labels\n      const inputs = await page.locator('input, textarea, select').all()\n      for (const input of inputs) {\n        const id = await input.getAttribute('id')\n        if (id) {\n          const label = await page.locator(`label[for=\"${id}\"]`).count()\n          const ariaLabel = await input.getAttribute('aria-label')\n          const ariaLabelledBy = await input.getAttribute('aria-labelledby')\n          \n          // Should have either a label, aria-label, or aria-labelledby\n          expect(label > 0 || ariaLabel || ariaLabelledBy).toBeTruthy()\n        }\n      }\n      \n      // Check for keyboard navigation\n      await page.keyboard.press('Tab')\n      const focusedElement = await page.locator(':focus')\n      expect(await focusedElement.count()).toBe(1) // Should have a focused element\n    })\n  })\n})"
       : [35;1m                                                                                                                       ^[0m
       `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL tests/analytics/uae-features-validation.test.ts
  ● Test suite failed to run

      [31mx[0m Expected '>', got 'companyId'
        ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/tests/analytics/uae-features-validation.test.ts[0m:66:1]
     [2m63[0m | 
     [2m64[0m |       render(
     [2m65[0m |         <UAEBusinessIntelligence
     [2m66[0m |           companyId="company-123"
        : [35;1m          ^^^^^^^^^[0m
     [2m67[0m |           dateRange="90"
     [2m68[0m |           locale="en"
     [2m69[0m |         />
        `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL tests/analytics/sprint-3.1-analytics-dashboard.test.ts
  ● Test suite failed to run

      [31mx[0m Expected '>', got 'session'
        ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/tests/analytics/sprint-3.1-analytics-dashboard.test.ts[0m:61:1]
     [2m58[0m | 
     [2m59[0m | const renderWithSession = (component: React.ReactElement) => {
     [2m60[0m |   return render(
     [2m61[0m |     <SessionProvider session={mockSession}>
        : [35;1m                     ^^^^^^^[0m
     [2m62[0m |       {component}
     [2m63[0m |     </SessionProvider>
     [2m64[0m |   )
        `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL tests/analytics/security-data-isolation.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/analytics/security-data-isolation.test.ts'

       6 | import { describe, it, expect, beforeEach, afterEach, vi } from 'vitest'
       7 | import { NextRequest } from 'next/server'
    >  8 | import { getServerSession } from 'next-auth'
         |                 ^
       9 |
      10 | // Import API routes
      11 | import { GET as dashboardGET } from '@/app/api/analytics/dashboard/route'

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/analytics/security-data-isolation.test.ts:8:17)

FAIL tests/analytics/payment-analytics.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/analytics/payment-analytics.test.ts'

       6 | import { describe, it, expect, beforeEach, afterEach, vi } from 'vitest'
       7 | import { Decimal } from 'decimal.js'
    >  8 | import { paymentAnalyticsService } from '@/lib/services/payment-analytics-service'
         |                 ^
       9 | import { prismaMock } from '../setup/prisma-mock'
      10 | import { createMockCompany, createMockInvoice, createMockPayment, createMockCustomer } from '../setup/analytics-fixtures'
      11 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/analytics/payment-analytics.test.ts:8:17)

FAIL tests/analytics/mobile-cross-browser.test.ts
  ● Test suite failed to run

      [31mx[0m Expected '>', got 'session'
         ,-[[36;1;4m/Users/ibbs/Development/reminder-mvp/tests/analytics/mobile-cross-browser.test.ts[0m:100:1]
     [2m 97[0m | 
     [2m 98[0m | const renderWithSession = (component: React.ReactElement) => {
     [2m 99[0m |   return render(
     [2m100[0m |     <SessionProvider session={mockSession}>
         : [35;1m                     ^^^^^^^[0m
     [2m101[0m |       {component}
     [2m102[0m |     </SessionProvider>
     [2m103[0m |   )
         `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1396:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1516:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:105:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL tests/analytics/kpi-calculation-engine.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/analytics/kpi-calculation-engine.test.ts'

       6 | import { describe, it, expect, beforeEach, afterEach, vi } from 'vitest'
       7 | import { Decimal } from 'decimal.js'
    >  8 | import { kpiCalculationEngine } from '@/lib/services/kpi-calculation-engine'
         |                 ^
       9 | import { prismaMock } from '../setup/prisma-mock'
      10 | import { createMockCompany, createMockAnalyticsFilters } from '../setup/analytics-fixtures'
      11 |

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/analytics/kpi-calculation-engine.test.ts:8:17)

FAIL tests/analytics/api-performance.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/analytics/api-performance.test.ts'

       6 | import { describe, it, expect, beforeEach, afterEach, vi } from 'vitest'
       7 | import { NextRequest } from 'next/server'
    >  8 | import { getServerSession } from 'next-auth'
         |                 ^
       9 |
      10 | // Import API routes
      11 | import { GET as dashboardGET } from '@/app/api/analytics/dashboard/route'

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/analytics/api-performance.test.ts:8:17)

FAIL tests/analytics/analytics-api.test.ts
  ● Test suite failed to run

    Cannot find module 'vitest' from 'tests/analytics/analytics-api.test.ts'

       6 | import { describe, it, expect, beforeEach, afterEach, vi } from 'vitest'
       7 | import { NextRequest } from 'next/server'
    >  8 | import { getServerSession } from 'next-auth'
         |                 ^
       9 | import { Decimal } from 'decimal.js'
      10 |
      11 | // Mock NextAuth

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (tests/analytics/analytics-api.test.ts:8:17)

FAIL tests/critical-flows/pdf-upload-integration.test.ts
  ● Test suite failed to run

    ReferenceError: TextEncoder is not defined

      38 |     throw new NotFoundError('User')
      39 |   }
    > 40 |
         | ^
      41 |   if (!user.companies) {
      42 |     throw new NotFoundError('User company association')
      43 |   }

      at Object.<anonymous> (node_modules/jose/dist/node/cjs/lib/buffer_utils.js:5:23)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/runtime/base64url.js:5:27)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/flattened/decrypt.js:4:24)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/jwe/compact/decrypt.js:4:22)
      at Object.<anonymous> (node_modules/jose/dist/node/cjs/index.js:4:20)
      at Object.<anonymous> (node_modules/openid-client/lib/client.js:9:14)
      at Object.<anonymous> (node_modules/openid-client/lib/issuer.js:5:19)
      at Object.<anonymous> (node_modules/openid-client/lib/index.js:1:16)
      at Object.<anonymous> (node_modules/next-auth/core/lib/oauth/callback.js:7:21)
      at Object.<anonymous> (node_modules/next-auth/core/routes/callback.js:8:40)
      at Object.<anonymous> (node_modules/next-auth/core/routes/index.js:37:40)
      at Object.<anonymous> (node_modules/next-auth/core/index.js:10:38)
      at Object.<anonymous> (node_modules/next-auth/next/index.js:9:13)
      at Object.<anonymous> (src/lib/auth-utils.ts:40:15)
      at Object.<anonymous> (src/app/api/import/upload/route.ts:20:20)
      at Object.<anonymous> (tests/critical-flows/pdf-upload-integration.test.ts:32:16)

FAIL src/__tests__/test-runner.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/@jest/core/build/index.js:1056:18)
      at node_modules/@jest/core/build/index.js:1126:165
      at node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/emittery/index.js:361:23)

FAIL tests/e2e/user-journey.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      1 | import { test, expect } from '@playwright/test';
      2 |
    > 3 | test.describe('UAEPay User Journey', () => {
        |      ^
      4 |   test('Complete user registration and dashboard navigation', async ({ page }) => {
      5 |     // Navigate to homepage
      6 |     await page.goto('/');

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.describe (tests/e2e/user-journey.spec.ts:3:6)

FAIL tests/e2e/invoice-workflow-e2e.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      37 | }
      38 |
    > 39 | test.describe('Complete Invoice Workflow E2E Tests - Sprint 1.5', () => {
         |      ^
      40 |   let companyData: any
      41 |   let invoiceData: any
      42 |

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.describe (tests/e2e/invoice-workflow-e2e.spec.ts:39:6)

FAIL tests/critical-flows/invoice-upload-e2e.spec.ts
  ● Test suite failed to run

    Playwright Test needs to be invoked via 'npx playwright test' and excluded from Jest test runs.
    Creating one directory for Playwright tests and one for Jest is the recommended way of doing it.
    See https://playwright.dev/docs/intro for more information about Playwright Test.

      12 | const TEST_PASSWORD = 'testpassword123'
      13 |
    > 14 | test.describe('Invoice Upload E2E Flow', () => {
         |      ^
      15 |   let page: Page
      16 |
      17 |   test.beforeEach(async ({ browser }) => {

      at throwIfRunningInsideJest (node_modules/playwright/lib/common/testType.js:272:11)
      at TestTypeImpl._describe (node_modules/playwright/lib/common/testType.js:113:5)
      at Function.describe (node_modules/playwright/lib/transform/transform.js:275:12)
      at Object.describe (tests/critical-flows/invoice-upload-e2e.spec.ts:14:6)

FAIL src/components/follow-ups/__tests__/component-interactions.test.tsx (13.042 s)
  ● Component Interactions › Step Addition and Removal › adds new email step and opens step editor

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r0»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r1»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r2»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</svg...

      157 |
      158 |       // Add a new EMAIL step
    > 159 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      160 |       await user.click(addStepSelect)
      161 |
      162 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:159:36)

  ● Component Interactions › Step Addition and Removal › adds new wait step with default configuration

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rk»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rl»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rm»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rk»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</svg...

      173 |       render(<SequenceBuilder {...defaultProps} />)
      174 |
    > 175 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      176 |       await user.click(addStepSelect)
      177 |
      178 |       const waitOption = screen.getByText('Wait')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:175:36)

  ● Component Interactions › Step Addition and Removal › removes step and updates sequence order

    TestingLibraryElementError: Unable to find an element with the text: /Step \d/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r18»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      193 |       render(<SequenceBuilder {...propsWithSequence} />)
      194 |
    > 195 |       const initialStepCount = screen.getAllByText(/Step \d/).length
          |                                       ^
      196 |
      197 |       // Find and click delete button for first step
      198 |       const deleteButtons = screen.getAllByRole('button', { name: /delete|remove/i })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:195:39)

  ● Component Interactions › Step Addition and Removal › duplicates step with correct configuration

    TestingLibraryElementError: Unable to find an element with the text: /Step \d/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r1o»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      217 |       render(<SequenceBuilder {...propsWithSequence} />)
      218 |
    > 219 |       const initialStepCount = screen.getAllByText(/Step \d/).length
          |                                       ^
      220 |
      221 |       // Find and click duplicate button
      222 |       const duplicateButtons = screen.getAllByRole('button', { name: /copy|duplicate/i })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:219:39)

  ● Component Interactions › Step Addition and Removal › maintains step order after addition and removal

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add.*step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r28»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r29»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r2a»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r28»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      238 |       // Add multiple steps
      239 |       for (let i = 0; i < 3; i++) {
    > 240 |         const addStepSelect = screen.getByRole('combobox', { name: /add.*step/i })
          |                                      ^
      241 |         await user.click(addStepSelect)
      242 |
      243 |         const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:240:38)

  ● Component Interactions › Timeline Updates When Steps Change › updates duration when adding wait steps

    TestingLibraryElementError: Found multiple elements with the text: /3\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m3.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m3.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r2s»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      269 |
      270 |       // Initial duration should be 3 days (one wait step)
    > 271 |       expect(screen.getByText(/3\.0 days/)).toBeInTheDocument()
          |                     ^
      272 |
      273 |       // Add another wait step
      274 |       const addStepSelect = screen.getByRole('combobox', { name: /add step/i })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:271:21)

  ● Component Interactions › Timeline Updates When Steps Change › updates step count display

    TestingLibraryElementError: Found multiple elements with the text: 2

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m2[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m2[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r3c»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      302 |       // Should show initial step count
      303 |       expect(screen.getByText('Total Steps:')).toBeInTheDocument()
    > 304 |       expect(screen.getByText('2')).toBeInTheDocument() // 2 steps initially
          |                     ^
      305 |
      306 |       // Add a new step
      307 |       const addStepSelect = screen.getByRole('combobox', { name: /add step/i })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:304:21)

  ● Component Interactions › Timeline Updates When Steps Change › recalculates when step configuration changes

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4c»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4d»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r4c»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      346 |
      347 |       // Edit the wait step to change duration
    > 348 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      349 |       if (editButtons.length > 1) {
      350 |         await user.click(editButtons[1]) // Second step (wait step)
      351 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:348:34)

  ● Component Interactions › Form Validation and Error Handling › validates step configuration before saving

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r5g»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r5h»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r5i»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r5g»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      399 |
      400 |       // Add an email step without template
    > 401 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      402 |       await user.click(addStepSelect)
      403 |
      404 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:401:36)

  ● Component Interactions › Form Validation and Error Handling › clears validation errors when form is corrected

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Valid Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r64»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r65»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r66»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------
      list:

      Name "":
      [36m<ul[39m
        [33mclass[39m=[32m"space-y-1"[39m
      [36m/>[39m

      --------------------------------------------------
      listitem:

      Name "":
      [36m<li[39m
        [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
      [36m/>[39m

      Name "":
      [36m<li[39m
        [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
      [36m/>[39m

      Name "":
      [36m<li[39m
        [33mclass[39m=[32m"text-sm text-red-600 flex items-center gap-2"[39m
      [36m/>[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Valid Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r64»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                 ...

      438 |
      439 |       // Add a valid step
    > 440 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      441 |       await user.click(addStepSelect)
      442 |
      443 |       const waitOption = screen.getByText('Wait')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:440:36)

  ● Component Interactions › Form Validation and Error Handling › handles network errors gracefully

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r6o»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r6p»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r6q»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r6o»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      472 |
      473 |       // Add valid step
    > 474 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      475 |       await user.click(addStepSelect)
      476 |
      477 |       const waitOption = screen.getByText('Wait')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:474:36)

  ● Component Interactions › Save and Preview Functionality › saves sequence with valid configuration

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r7c»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r7d»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r7e»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r7c»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      511 |
      512 |       // Add valid step
    > 513 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      514 |       await user.click(addStepSelect)
      515 |
      516 |       const waitOption = screen.getByText('Wait')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:513:36)

  ● Component Interactions › Save and Preview Functionality › disables test functionality when no steps exist

    TestingLibraryElementError: Found multiple elements with the role "button" and name `/test sequence/i`

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
      [33mdata-slot[39m=[32m"button"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-test-tube h-4 w-4 mr-2"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M8.5 2h7"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M14.5 16h-5"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mTest Sequence[0m
    [36m</button>[39m

    Ignored nodes: comments, script, style
    [36m<button[39m
      [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
      [33mdata-slot[39m=[32m"button"[39m
      [33mdisabled[39m=[32m""[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-test-tube h-4 w-4 mr-2"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M8.5 2h7"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M14.5 16h-5"[39m
        [36m/>[39m
      [36m</svg>[39m
      [0mTest Sequence[0m
    [36m</button>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r9o»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      578 |
      579 |       // Test button should be disabled when no steps exist
    > 580 |       const testButton = screen.getByRole('button', { name: /test sequence/i })
          |                                 ^
      581 |       expect(testButton).toBeDisabled()
      582 |     })
      583 |   })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:580:33)

  ● Component Interactions › Template Selection Integration › loads templates on component mount

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      587 |       render(<SequenceBuilder {...defaultProps} />)
      588 |
    > 589 |       expect(mockEmailTemplateStore().fetchTemplates).toHaveBeenCalled()
          |                                                       ^
      590 |     })
      591 |
      592 |     it('filters templates by FOLLOW_UP type', () => {

      at Object.toHaveBeenCalled (src/components/follow-ups/__tests__/component-interactions.test.tsx:589:55)

  ● Component Interactions › Template Selection Integration › filters templates by FOLLOW_UP type

    TypeError: Cannot read properties of undefined (reading '1')

      594 |
      595 |       const fetchCall = (mockEmailTemplateStore().fetchTemplates as jest.Mock).mock.calls[0]
    > 596 |       expect(fetchCall[1]).toEqual({ templateType: 'FOLLOW_UP' })
          |                       ^
      597 |     })
      598 |
      599 |     it('shows template selection in email step configuration', async () => {

      at Object.<anonymous> (src/components/follow-ups/__tests__/component-interactions.test.tsx:596:23)

  ● Component Interactions › Template Selection Integration › shows template selection in email step configuration

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rbk»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rbl»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rbm»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rbk»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      602 |
      603 |       // Add email step
    > 604 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      605 |       await user.click(addStepSelect)
      606 |
      607 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:604:36)

  ● Component Interactions › Template Selection Integration › allows switching between template and custom content

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rc8»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rc9»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rca»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rc8»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      619 |
      620 |       // Add email step
    > 621 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      622 |       await user.click(addStepSelect)
      623 |
      624 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:621:36)

  ● Component Interactions › Template Selection Integration › displays template preview when selected

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rcs»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rct»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rcu»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rcs»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      646 |
      647 |       // Add email step
    > 648 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      649 |       await user.click(addStepSelect)
      650 |
      651 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:648:36)

  ● Component Interactions › UAE Settings Integration › shows UAE business settings sidebar

    TestingLibraryElementError: Found multiple elements with the text: Respect UAE Holidays

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<label[39m
      [33mclass[39m=[32m"flex items-center gap-2 font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50 text-sm"[39m
      [33mdata-slot[39m=[32m"label"[39m
      [33mfor[39m=[32m"holidays"[39m
    [36m>[39m
      [0mRespect UAE Holidays[0m
    [36m</label>[39m

    Ignored nodes: comments, script, style
    [36m<label[39m
      [33mclass[39m=[32m"flex items-center gap-2 font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50 text-sm"[39m
      [33mdata-slot[39m=[32m"label"[39m
    [36m>[39m
      [0mRespect UAE Holidays[0m
    [36m</label>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rdg»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      670 |       expect(screen.getByText('UAE Business Settings')).toBeInTheDocument()
      671 |       expect(screen.getByText('Business Hours Only')).toBeInTheDocument()
    > 672 |       expect(screen.getByText('Respect UAE Holidays')).toBeInTheDocument()
          |                     ^
      673 |     })
      674 |
      675 |     it('synchronizes UAE settings between main form and sidebar', async () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:672:21)

  ● Component Interactions › UAE Settings Integration › synchronizes UAE settings between main form and sidebar

    expect(received).toHaveProperty(path, value)

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

      683 |       // Sidebar should reflect the change
      684 |       const sidebarToggle = screen.getAllByLabelText(/Business Hours Only/)[1]
    > 685 |       expect(sidebarToggle).toHaveProperty('checked', mainToggle.checked)
          |                             ^
      686 |     })
      687 |
      688 |     it('shows UAE compliance indicators on steps', () => {

      at Object.toHaveProperty (src/components/follow-ups/__tests__/component-interactions.test.tsx:685:29)

  ● Component Interactions › UAE Settings Integration › displays UAE business hours information

    TestingLibraryElementError: Unable to find an element with the text: Sunday-Thursday: 9 AM - 6 PM. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rf8»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      702 |       render(<SequenceBuilder {...defaultProps} />)
      703 |
    > 704 |       expect(screen.getByText('Sunday-Thursday: 9 AM - 6 PM')).toBeInTheDocument()
          |                     ^
      705 |       expect(screen.getByText('Avoids prayer times automatically')).toBeInTheDocument()
      706 |       expect(screen.getByText('Respects Islamic holidays')).toBeInTheDocument()
      707 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:704:21)

  ● Component Interactions › UAE Settings Integration › propagates UAE settings to new steps

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rfs»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rft»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rfu»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rfs»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      718 |
      719 |       // Add a new step
    > 720 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      721 |       await user.click(addStepSelect)
      722 |
      723 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:720:36)

  ● Component Interactions › Step Editor Dialog Integration › opens step editor when editing existing step

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rgg»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rgh»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rgg»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      749 |
      750 |       // Click edit button for first step
    > 751 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      752 |       await user.click(editButtons[0])
      753 |
      754 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:751:34)

  ● Component Interactions › Step Editor Dialog Integration › shows step configuration tabs

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rh0»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rh1»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rh0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      767 |       render(<SequenceBuilder {...propsWithSequence} />)
      768 |
    > 769 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      770 |       await user.click(editButtons[0])
      771 |
      772 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:769:34)

  ● Component Interactions › Step Editor Dialog Integration › updates step when saved from editor

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rhg»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rhh»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rhg»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      786 |       render(<SequenceBuilder {...propsWithSequence} />)
      787 |
    > 788 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      789 |       await user.click(editButtons[0])
      790 |
      791 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:788:34)

  ● Component Interactions › Step Editor Dialog Integration › cancels step editing without changes

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«ri0»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«ri1»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«ri0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      814 |       render(<SequenceBuilder {...propsWithSequence} />)
      815 |
    > 816 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      817 |       await user.click(editButtons[0])
      818 |
      819 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:816:34)

  ● Component Interactions › Step Editor Dialog Integration › shows step preview in editor

    TestingLibraryElementError: Unable to find an accessible element with the role "button" and name `/edit/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rig»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rih»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent dark:hover:bg-accent/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-red-600 hover:text-red-700"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Update Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "Initial Email":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      Name "Wait Period":
      [36m<h4[39m
        [33mclass[39m=[32m"font-medium"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-sm text-gray-600"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rig»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      837 |       render(<SequenceBuilder {...propsWithSequence} />)
      838 |
    > 839 |       const editButtons = screen.getAllByRole('button', { name: /edit/i })
          |                                  ^
      840 |       await user.click(editButtons[0])
      841 |
      842 |       await waitFor(() => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:839:34)

  ● Component Interactions › Real-time Updates and Synchronization › updates timeline when steps are modified

    TestingLibraryElementError: Found multiple elements with the text: /3\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m3.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m3.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rj0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      863 |
      864 |       // Initial duration
    > 865 |       const initialDuration = screen.getByText(/3\.0 days/)
          |                                      ^
      866 |       expect(initialDuration).toBeInTheDocument()
      867 |
      868 |       // Edit wait step to change duration

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/component-interactions.test.tsx:865:38)

  ● Component Interactions › Real-time Updates and Synchronization › maintains form state during step operations

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rjg»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rjh»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rji»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rjg»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      897 |
      898 |       // Add a step
    > 899 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      900 |       await user.click(addStepSelect)
      901 |
      902 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:899:36)

  ● Component Interactions › Real-time Updates and Synchronization › synchronizes UAE settings across components

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rk4»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rk5»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rk6»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rk4»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      921 |
      922 |       // Add a step and check UAE settings
    > 923 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      924 |       await user.click(addStepSelect)
      925 |
      926 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/component-interactions.test.tsx:923:36)

FAIL src/components/follow-ups/__tests__/sequence-builder.test.tsx (7.703 s)
  ● SequenceBuilder Component › Initial Render and Basic UI › displays sequence settings form correctly

    TestingLibraryElementError: Found a label with the text of: Sequence Type, however no form control was found associated to that label. Make sure you're using the "for" attribute or "aria-labelledby" attribute correctly.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rk»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</svg...

      166 |
      167 |       expect(screen.getByLabelText('Sequence Name *')).toBeInTheDocument()
    > 168 |       expect(screen.getByLabelText('Sequence Type')).toBeInTheDocument()
          |                     ^
      169 |       expect(screen.getByLabelText('Description *')).toBeInTheDocument()
      170 |       expect(screen.getByLabelText('UAE Business Hours Only')).toBeInTheDocument()
      171 |       expect(screen.getByLabelText('Respect UAE Holidays')).toBeInTheDocument()

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:108:40)
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByLabelText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:168:21)

  ● SequenceBuilder Component › Initial Render and Basic UI › shows UAE business settings sidebar

    TestingLibraryElementError: Unable to find an element with the text: Sunday-Thursday: 9 AM - 6 PM. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r18»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      176 |
      177 |       expect(screen.getByText('UAE Business Settings')).toBeInTheDocument()
    > 178 |       expect(screen.getByText('Sunday-Thursday: 9 AM - 6 PM')).toBeInTheDocument()
          |                     ^
      179 |       expect(screen.getByText('Avoids prayer times automatically')).toBeInTheDocument()
      180 |       expect(screen.getByText('Respects Islamic holidays')).toBeInTheDocument()
      181 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:178:21)

  ● SequenceBuilder Component › Sequence Configuration › selects sequence type correctly

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/sequence type/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r34»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r35»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r36»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r34»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      209 |       render(<SequenceBuilder {...defaultProps} />)
      210 |
    > 211 |       const typeSelect = screen.getByRole('combobox', { name: /sequence type/i })
          |                                 ^
      212 |       await user.click(typeSelect)
      213 |
      214 |       const gentleOption = screen.getByText(/gentle collection/i)

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:211:33)

  ● SequenceBuilder Component › Step Management › adds new EMAIL step correctly

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4c»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4d»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r4e»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r4c»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      241 |       render(<SequenceBuilder {...defaultProps} />)
      242 |
    > 243 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      244 |       await user.click(addStepSelect)
      245 |
      246 |       const emailOption = screen.getByText('Email')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:243:36)

  ● SequenceBuilder Component › Step Management › adds new WAIT step correctly

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r50»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r51»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«r52»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r50»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      256 |       render(<SequenceBuilder {...defaultProps} />)
      257 |
    > 258 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      259 |       await user.click(addStepSelect)
      260 |
      261 |       const waitOption = screen.getByText('Wait')

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:258:36)

  ● SequenceBuilder Component › Step Management › calculates sequence duration correctly

    TestingLibraryElementError: Found multiple elements with the text: /10\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m10.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m10.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r5k»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      301 |
      302 |       // Should calculate total duration: 3 days + 7 days = 10 days
    > 303 |       expect(screen.getByText(/10\.0 days/)).toBeInTheDocument()
          |                     ^
      304 |     })
      305 |
      306 |     it('displays correct step statistics', () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:303:21)

  ● SequenceBuilder Component › Step Management › displays correct step statistics

    TestingLibraryElementError: Found multiple elements with the text: 2

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m2[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m2[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r64»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      312 |       render(<SequenceBuilder {...propsWithSteps} />)
      313 |
    > 314 |       expect(screen.getByText('2')).toBeInTheDocument() // Total Steps
          |                     ^
      315 |       expect(screen.getByText('1')).toBeInTheDocument() // Email Steps
      316 |       expect(screen.getByText('1')).toBeInTheDocument() // Wait Steps
      317 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:314:21)

  ● SequenceBuilder Component › Drag and Drop Functionality › updates step order after drag and drop

    TestingLibraryElementError: Unable to find an element with the text: /Step \d/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r7k»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      361 |
      362 |       // Steps should be displayed in order
    > 363 |       const steps = screen.getAllByText(/Step \d/)
          |                            ^
      364 |       expect(steps).toHaveLength(2)
      365 |     })
      366 |   })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:363:28)

  ● SequenceBuilder Component › UAE Business Hours Integration › displays UAE business hours information

    TestingLibraryElementError: Unable to find an element with the text: Sunday-Thursday: 9 AM - 6 PM. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«r84»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      370 |       render(<SequenceBuilder {...defaultProps} />)
      371 |
    > 372 |       expect(screen.getByText('Sunday-Thursday: 9 AM - 6 PM')).toBeInTheDocument()
          |                     ^
      373 |       expect(screen.getByText('Avoids prayer times automatically')).toBeInTheDocument()
      374 |       expect(screen.getByText('Respects Islamic holidays')).toBeInTheDocument()
      375 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:372:21)

  ● SequenceBuilder Component › Cultural Compliance Features › validates cultural appropriateness in sequence timing

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      459 |       )
      460 |
    > 461 |       expect(validation.appropriate).toBe(true)
          |                                      ^
      462 |       expect(validation.score).toBeGreaterThan(70)
      463 |     })
      464 |   })

      at Object.toBe (src/components/follow-ups/__tests__/sequence-builder.test.tsx:461:38)

  ● SequenceBuilder Component › Template Integration › loads available templates correctly

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      468 |       render(<SequenceBuilder {...defaultProps} />)
      469 |
    > 470 |       expect(mockEmailTemplateStore().fetchTemplates).toHaveBeenCalled()
          |                                                       ^
      471 |     })
      472 |
      473 |     it('filters templates by type', () => {

      at Object.toHaveBeenCalled (src/components/follow-ups/__tests__/sequence-builder.test.tsx:470:55)

  ● SequenceBuilder Component › Template Integration › filters templates by type

    TypeError: Cannot read properties of undefined (reading '1')

      475 |
      476 |       const fetchTemplatesCall = (mockEmailTemplateStore().fetchTemplates as jest.Mock).mock.calls[0]
    > 477 |       expect(fetchTemplatesCall[1]).toEqual({ templateType: 'FOLLOW_UP' })
          |                                ^
      478 |     })
      479 |   })
      480 |

      at Object.<anonymous> (src/components/follow-ups/__tests__/sequence-builder.test.tsx:477:32)

  ● SequenceBuilder Component › Validation and Error Handling › validates step configuration

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rco»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rcp»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rcq»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rco»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      500 |
      501 |       // Add a step first
    > 502 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      503 |       await user.click(addStepSelect)
      504 |       const emailOption = screen.getByText('Email')
      505 |       await user.click(emailOption)

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:502:36)

  ● SequenceBuilder Component › Validation and Error Handling › handles save operation correctly

    TestingLibraryElementError: Unable to find an accessible element with the role "combobox" and name `/add first step/i`

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m"Test Sequence"[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rdc»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rdd»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rde»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Test Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rdc»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                  ...

      536 |
      537 |       // Add a valid email step
    > 538 |       const addStepSelect = screen.getByRole('combobox', { name: /add first step/i })
          |                                    ^
      539 |       await user.click(addStepSelect)
      540 |       const emailOption = screen.getByText('Email')
      541 |       await user.click(emailOption)

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:538:36)

  ● SequenceBuilder Component › Complex Scenarios › handles multi-step sequences spanning weeks

    TestingLibraryElementError: Found multiple elements with the text: /17\.0 days/

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
      [33mdata-slot[39m=[32m"card-description"[39m
    [36m>[39m
      [0mDrag and drop to reorder steps. Estimated duration: [0m
      [0m17.0[0m
      [0m days[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m17.0[0m
      [0m days[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«re0»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      630 |
      631 |       // Should calculate duration including weeks: 3 days + 14 days = 17 days
    > 632 |       expect(screen.getByText(/17\.0 days/)).toBeInTheDocument()
          |                     ^
      633 |       expect(screen.getByText('Final Notice')).toBeInTheDocument()
      634 |     })
      635 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:632:21)

  ● SequenceBuilder Component › Accessibility and Mobile Responsiveness › provides proper semantic structure

    TestingLibraryElementError: Unable to find an accessible element with the role "main"

    Here are the accessible roles:

      textbox:

      Name "Sequence Name *":
      [36m<input[39m
        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
        [33mdata-slot[39m=[32m"input"[39m
        [33mid[39m=[32m"name"[39m
        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
        [33mvalue[39m=[32m""[39m
      [36m/>[39m

      Name "Description *":
      [36m<textarea[39m
        [33mclass[39m=[32m"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"[39m
        [33mid[39m=[32m"description"[39m
        [33mplaceholder[39m=[32m"Describe what this sequence does and when to use it..."[39m
        [33mrows[39m=[32m"3"[39m
      [36m/>[39m

      --------------------------------------------------
      combobox:

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rg4»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rg5»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[150px]"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-autocomplete[39m=[32m"none"[39m
        [33maria-controls[39m=[32m"radix-«rg6»"[39m
        [33maria-expanded[39m=[32m"false"[39m
        [33mclass[39m=[32m"flex h-10 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 w-[200px] mx-auto"[39m
        [33mdata-placeholder[39m=[32m""[39m
        [33mdata-state[39m=[32m"closed"[39m
        [33mdir[39m=[32m"ltr"[39m
        [33mrole[39m=[32m"combobox"[39m
        [33mtype[39m=[32m"button"[39m
      [36m/>[39m

      --------------------------------------------------
      switch:

      Name "UAE Business Hours Only":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"businessHours"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Respect UAE Holidays":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mid[39m=[32m"holidays"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "Activate After Save":
      [36m<button[39m
        [33maria-checked[39m=[32m"false"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"unchecked"[39m
        [33mid[39m=[32m"active"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      Name "":
      [36m<button[39m
        [33maria-checked[39m=[32m"true"[39m
        [33mclass[39m=[32m"peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
        [33mdata-state[39m=[32m"checked"[39m
        [33mrole[39m=[32m"switch"[39m
        [33mtype[39m=[32m"button"[39m
        [33mvalue[39m=[32m"on"[39m
      [36m/>[39m

      --------------------------------------------------
      button:

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center whitespace-nowrap text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Save Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98] transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Cancel":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
      [36m/>[39m

      Name "Test Sequence":
      [36m<button[39m
        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border border-border bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 transition-all duration-200 h-10 px-5 py-2 has-[>svg]:px-4 w-full"[39m
        [33mdata-slot[39m=[32m"button"[39m
        [33mdisabled[39m=[32m""[39m
      [36m/>[39m

      --------------------------------------------------
      heading:

      Name "No steps added yet":
      [36m<h3[39m
        [33mclass[39m=[32m"text-lg font-medium text-gray-700 mb-2"[39m
      [36m/>[39m

      --------------------------------------------------
      paragraph:

      Name "":
      [36m<p[39m
        [33mclass[39m=[32m"text-gray-500 mb-4"[39m
      [36m/>[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      Name "":
      [36m<p />[39m

      --------------------------------------------------

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m""[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rg4»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
                      [36m</sv...

      726 |       render(<SequenceBuilder {...defaultProps} />)
      727 |
    > 728 |       expect(screen.getByRole('main') || screen.getByRole('region')).toBeInTheDocument()
          |                     ^
      729 |       expect(screen.getAllByRole('button').length).toBeGreaterThan(0)
      730 |       expect(screen.getAllByRole('textbox').length).toBeGreaterThan(0)
      731 |     })

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByRole (src/components/follow-ups/__tests__/sequence-builder.test.tsx:728:21)

  ● SequenceBuilder Component › Step Configuration Dialog › opens step editor when editing a step

    TestingLibraryElementError: Unable to find a label with the text of: /edit/i

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rgo»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      743 |
      744 |       // Find and click edit button for first step
    > 745 |       const editButtons = screen.getAllByLabelText(/edit/i)
          |                                  ^
      746 |       if (editButtons.length > 0) {
      747 |         await user.click(editButtons[0])
      748 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:111:38)
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByLabelText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:745:34)

  ● SequenceBuilder Component › Step Configuration Dialog › allows step duplication

    TestingLibraryElementError: Unable to find a label with the text of: /copy/i

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rh8»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      763 |
      764 |       // Find and click duplicate button
    > 765 |       const duplicateButtons = screen.getAllByLabelText(/copy/i)
          |                                       ^
      766 |       if (duplicateButtons.length > 0) {
      767 |         await user.click(duplicateButtons[0])
      768 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:111:38)
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByLabelText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:765:39)

  ● SequenceBuilder Component › Step Configuration Dialog › allows step deletion

    TestingLibraryElementError: Unable to find a label with the text of: /delete/i

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rho»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      787 |
      788 |       // Find and click delete button
    > 789 |       const deleteButtons = screen.getAllByLabelText(/delete/i)
          |                                    ^
      790 |       if (deleteButtons.length > 0) {
      791 |         await user.click(deleteButtons[0])
      792 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getAllByLabelText (node_modules/@testing-library/dom/dist/queries/label-text.js:111:38)
      at node_modules/@testing-library/dom/dist/query-helpers.js:109:15
      at Object.getAllByLabelText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:789:36)

  ● SequenceBuilder Component › UAE Holiday Integration › respects prayer time avoidance

    TestingLibraryElementError: Unable to find an element with the text: Avoids prayer times automatically. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«ri8»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      821 |
      822 |       // Should show prayer time compliance in step settings
    > 823 |       expect(screen.getByText('Avoids prayer times automatically')).toBeInTheDocument()
          |                     ^
      824 |     })
      825 |   })
      826 |

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at node_modules/@testing-library/dom/dist/query-helpers.js:76:38
      at node_modules/@testing-library/dom/dist/query-helpers.js:52:17
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:823:21)

  ● SequenceBuilder Component › Performance and Edge Cases › handles large number of steps efficiently

    TestingLibraryElementError: Found multiple elements with the text: 20

    Here are the matching elements:

    Ignored nodes: comments, script, style
    [36m<div[39m
      [33mclass[39m=[32m"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-medium text-sm"[39m
    [36m>[39m
      [0m20[0m
    [36m</div>[39m

    Ignored nodes: comments, script, style
    [36m<span[39m
      [33mclass[39m=[32m"font-medium"[39m
    [36m>[39m
      [0m20[0m
    [36m</span>[39m

    (If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"flex h-full gap-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1 space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
              [33mdata-slot[39m=[32m"card"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                [33mdata-slot[39m=[32m"card-header"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                  [33mdata-slot[39m=[32m"card-title"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33maria-hidden[39m=[32m"true"[39m
                    [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mheight[39m=[32m"24"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                    [33mwidth[39m=[32m"24"[39m
                    [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                    [36m/>[39m
                    [36m<circle[39m
                      [33mcx[39m=[32m"12"[39m
                      [33mcy[39m=[32m"12"[39m
                      [33mr[39m=[32m"3"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mSequence Configuration[0m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                  [33mdata-slot[39m=[32m"card-description"[39m
                [36m>[39m
                  [0mConfigure the basic settings for your follow-up sequence[0m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"px-6 space-y-4"[39m
                [33mdata-slot[39m=[32m"card-content"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                [36m>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"name"[39m
                    [36m>[39m
                      [0mSequence Name *[0m
                    [36m</label>[39m
                    [36m<input[39m
                      [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                      [33mdata-slot[39m=[32m"input"[39m
                      [33mid[39m=[32m"name"[39m
                      [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                      [33mvalue[39m=[32m"Gentle Collection Sequence"[39m
                    [36m/>[39m
                  [36m</div>[39m
                  [36m<div>[39m
                    [36m<label[39m
                      [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                      [33mdata-slot[39m=[32m"label"[39m
                      [33mfor[39m=[32m"type"[39m
                    [36m>[39m
                      [0mSequence Type[0m
                    [36m</label>[39m
                    [36m<button[39m
                      [33maria-autocomplete[39m=[32m"none"[39m
                      [33maria-controls[39m=[32m"radix-«rjc»"[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                      [33mdata-state[39m=[32m"closed"[39m
                      [33mdir[39m=[32m"ltr"[39m
                      [33mrole[39m=[32m"combobox"[39m
                      [33mtype[39m=[32m"button"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mstyle[39m=[32m"pointer-events: none;"[39m
                      [36m>[39m
                        [0m��[0m
                        [0m [0m
                        [0mGentle Collection[0m
                      [36m</span>[39m
                      [36m<svg[39m
                        [33maria-hidden[39m=[32m"true"[39m
                        [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                        [33mfill[39m=[32m"none"[39m
                        [33mheight[39m=[32m"24"[39m
                        [33mstroke[39m=[32m"currentColor"[39m
                        [33mstroke-linecap[39m=[32m"round"[39m
                        [33mstroke-linejoin[39m=[32m"round"[39m
                        [33mstroke-width[39m=[32m"2"[39m
                        [33mviewBox[39m=[32m"0 0 24 24"[39m
                        [33mwidth[39m=[32m"24"[39m
                        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33md[39m=[32m"m6 9 6 6 6-6"[39m
                        [36m/>[39m
     ...

      863 |       render(<SequenceBuilder {...propsWithManySteps} />)
      864 |
    > 865 |       expect(screen.getByText('20')).toBeInTheDocument() // Total Steps count
          |                     ^
      866 |     })
      867 |
      868 |     it('handles network errors gracefully', async () => {

      at Object.getElementError (node_modules/@testing-library/dom/dist/config.js:37:19)
      at getElementError (node_modules/@testing-library/dom/dist/query-helpers.js:20:35)
      at getMultipleElementsFoundError (node_modules/@testing-library/dom/dist/query-helpers.js:23:10)
      at node_modules/@testing-library/dom/dist/query-helpers.js:55:13
      at node_modules/@testing-library/dom/dist/query-helpers.js:95:19
      at Object.getByText (src/components/follow-ups/__tests__/sequence-builder.test.tsx:865:21)

  ● SequenceBuilder Component › Performance and Edge Cases › handles network errors gracefully

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex h-full gap-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex-1 space-y-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm"[39m
                [33mdata-slot[39m=[32m"card"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6"[39m
                  [33mdata-slot[39m=[32m"card-header"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"leading-none font-semibold flex items-center gap-2"[39m
                    [33mdata-slot[39m=[32m"card-title"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-settings h-5 w-5"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"[39m
                      [36m/>[39m
                      [36m<circle[39m
                        [33mcx[39m=[32m"12"[39m
                        [33mcy[39m=[32m"12"[39m
                        [33mr[39m=[32m"3"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                    [0mSequence Configuration[0m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"text-muted-foreground text-sm"[39m
                    [33mdata-slot[39m=[32m"card-description"[39m
                  [36m>[39m
                    [0mConfigure the basic settings for your follow-up sequence[0m
                  [36m</div>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"px-6 space-y-4"[39m
                  [33mdata-slot[39m=[32m"card-content"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"grid grid-cols-2 gap-4"[39m
                  [36m>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                        [33mdata-slot[39m=[32m"label"[39m
                        [33mfor[39m=[32m"name"[39m
                      [36m>[39m
                        [0mSequence Name *[0m
                      [36m</label>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive"[39m
                        [33mdata-slot[39m=[32m"input"[39m
                        [33mid[39m=[32m"name"[39m
                        [33mplaceholder[39m=[32m"e.g., Gentle Collection Sequence"[39m
                        [33mvalue[39m=[32m"Test Sequence"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50"[39m
                        [33mdata-slot[39m=[32m"label"[39m
                        [33mfor[39m=[32m"type"[39m
                      [36m>[39m
                        [0mSequence Type[0m
                      [36m</label>[39m
                      [36m<button[39m
                        [33maria-autocomplete[39m=[32m"none"[39m
                        [33maria-controls[39m=[32m"radix-«rjs»"[39m
                        [33maria-expanded[39m=[32m"false"[39m
                        [33mclass[39m=[32m"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1"[39m
                        [33mdata-state[39m=[32m"closed"[39m
                        [33mdir[39m=[32m"ltr"[39m
                        [33mrole[39m=[32m"combobox"[39m
                        [33mtype[39m=[32m"button"[39m
                      [36m>[39m
                        [36m<span[39m
                          [33mstyle[39m=[32m"pointer-events: none;"[39m
                        [36m>[39m
                          [0m��[0m
                          [0m [0m
                          [0mGentle Collection[0m
                        [36m</span>[39m
                        [36m<svg[39m
                          [33maria-hidden[39m=[32m"true"[39m
                          [33mclass[39m=[32m"lucide lucide-chevron-down h-4 w-4 opacity-50"[39m
                          [33mfill[39m=[32m"none"[39m
                          [33mheight[39m=[32m"24"[39m
                          [33mstroke[39m=[32m"currentColor"[39m
                          [33mstroke-linecap[39m=[32m"round"[39m
                          [33mstroke-linejoin[39m=[32m"round"[39m
                          [33mstroke-width[39m=[32m"2"[39m
                          [33mviewBox[39m=[32m"0 0 24 24"[39m
                          [33mwidth[39m=[32...

      886 |       await waitFor(() => {
      887 |         // Error should be handled by the component
    > 888 |         expect(mockAddSequenceError).toHaveBeenCalled()
          |                                      ^
      889 |       })
      890 |     })
      891 |   })

      at toHaveBeenCalled (src/components/follow-ups/__tests__/sequence-builder.test.tsx:888:38)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)


Test Suites: 92 failed, 3 passed, 95 total
Tests:       590 failed, 624 passed, 1214 total
Snapshots:   0 total
Time:        16.563 s
Ran all test suites.
